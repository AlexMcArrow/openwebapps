/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(aQ,F){var a=function(a2,a3){return new a.fn.init(a2,a3)},p=aQ.jQuery,V=aQ.$,af=aQ.document,ab,T=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,a0=/^.[^:#\[\.,]*$/,aB=/\S/,P=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,e=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,b=navigator.userAgent,x,N=false,ah=[],aK,ax=Object.prototype.toString,au=Object.prototype.hasOwnProperty,g=Array.prototype.push,I=Array.prototype.slice,v=Array.prototype.indexOf;a.fn=a.prototype={init:function(a2,a5){var a4,a6,a3,a7;if(!a2){return this}if(a2.nodeType){this.context=this[0]=a2;this.length=1;return this}if(a2==="body"&&!a5){this.context=af;this[0]=af.body;this.selector="body";this.length=1;return this}if(typeof a2==="string"){a4=T.exec(a2);if(a4&&(a4[1]||!a5)){if(a4[1]){a7=(a5?a5.ownerDocument||a5:af);a3=e.exec(a2);if(a3){if(a.isPlainObject(a5)){a2=[af.createElement(a3[1])];a.fn.attr.call(a2,a5,true)}else{a2=[a7.createElement(a3[1])]}}else{a3=M([a4[1]],[a7]);a2=(a3.cacheable?a3.fragment.cloneNode(true):a3.fragment).childNodes}return a.merge(this,a2)}else{a6=af.getElementById(a4[2]);if(a6){if(a6.id!==a4[2]){return ab.find(a2)}this.length=1;this[0]=a6}this.context=af;this.selector=a2;return this}}else{if(!a5&&/^\w+$/.test(a2)){this.selector=a2;this.context=af;a2=af.getElementsByTagName(a2);return a.merge(this,a2)}else{if(!a5||a5.jquery){return(a5||ab).find(a2)}else{return a(a5).find(a2)}}}}else{if(a.isFunction(a2)){return ab.ready(a2)}}if(a2.selector!==F){this.selector=a2.selector;this.context=a2.context}return a.makeArray(a2,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return I.call(this,0)},get:function(a2){return a2==null?this.toArray():(a2<0?this.slice(a2)[0]:this[a2])},pushStack:function(a3,a5,a2){var a4=a();if(a.isArray(a3)){g.apply(a4,a3)}else{a.merge(a4,a3)}a4.prevObject=this;a4.context=this.context;if(a5==="find"){a4.selector=this.selector+(this.selector?" ":"")+a2}else{if(a5){a4.selector=this.selector+"."+a5+"("+a2+")"}}return a4},each:function(a3,a2){return a.each(this,a3,a2)},ready:function(a2){a.bindReady();if(a.isReady){a2.call(af,a)}else{if(ah){ah.push(a2)}}return this},eq:function(a2){return a2===-1?this.slice(a2):this.slice(a2,+a2+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(I.apply(this,arguments),"slice",I.call(arguments).join(","))},map:function(a2){return this.pushStack(a.map(this,function(a4,a3){return a2.call(a4,a3,a4)}))},end:function(){return this.prevObject||a(null)},push:g,sort:[].sort,splice:[].splice};a.fn.init.prototype=a.fn;a.extend=a.fn.extend=function(){var a7=arguments[0]||{},a6=1,a5=arguments.length,a9=false,ba,a4,a2,a3;if(typeof a7==="boolean"){a9=a7;a7=arguments[1]||{};a6=2}if(typeof a7!=="object"&&!a.isFunction(a7)){a7={}}if(a5===a6){a7=this;--a6}for(;a6<a5;a6++){if((ba=arguments[a6])!=null){for(a4 in ba){a2=a7[a4];a3=ba[a4];if(a7===a3){continue}if(a9&&a3&&(a.isPlainObject(a3)||a.isArray(a3))){var a8=a2&&(a.isPlainObject(a2)||a.isArray(a2))?a2:a.isArray(a3)?[]:{};a7[a4]=a.extend(a9,a8,a3)}else{if(a3!==F){a7[a4]=a3}}}}}return a7};a.extend({noConflict:function(a2){aQ.$=V;if(a2){aQ.jQuery=p}return a},isReady:false,ready:function(){if(!a.isReady){if(!af.body){return setTimeout(a.ready,13)}a.isReady=true;if(ah){var a3,a2=0;while((a3=ah[a2++])){a3.call(af,a)}ah=null}if(a.fn.triggerHandler){a(af).triggerHandler("ready")}}},bindReady:function(){if(N){return}N=true;if(af.readyState==="complete"){return a.ready()}if(af.addEventListener){af.addEventListener("DOMContentLoaded",aK,false);aQ.addEventListener("load",a.ready,false)}else{if(af.attachEvent){af.attachEvent("onreadystatechange",aK);aQ.attachEvent("onload",a.ready);var a2=false;try{a2=aQ.frameElement==null}catch(a3){}if(af.documentElement.doScroll&&a2){A()}}}},isFunction:function(a2){return ax.call(a2)==="[object Function]"},isArray:function(a2){return ax.call(a2)==="[object Array]"},isPlainObject:function(a3){if(!a3||ax.call(a3)!=="[object Object]"||a3.nodeType||a3.setInterval){return false}if(a3.constructor&&!au.call(a3,"constructor")&&!au.call(a3.constructor.prototype,"isPrototypeOf")){return false}var a2;for(a2 in a3){}return a2===F||au.call(a3,a2)},isEmptyObject:function(a3){for(var a2 in a3){return false}return true},error:function(a2){throw a2},parseJSON:function(a2){if(typeof a2!=="string"||!a2){return null}a2=a.trim(a2);if(/^[\],:{}\s]*$/.test(a2.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return aQ.JSON&&aQ.JSON.parse?aQ.JSON.parse(a2):(new Function("return "+a2))()}else{a.error("Invalid JSON: "+a2)}},noop:function(){},globalEval:function(a4){if(a4&&aB.test(a4)){var a3=af.getElementsByTagName("head")[0]||af.documentElement,a2=af.createElement("script");a2.type="text/javascript";if(a.support.scriptEval){a2.appendChild(af.createTextNode(a4))}else{a2.text=a4}a3.insertBefore(a2,a3.firstChild);a3.removeChild(a2)}},nodeName:function(a3,a2){return a3.nodeName&&a3.nodeName.toUpperCase()===a2.toUpperCase()},each:function(a5,a9,a4){var a3,a6=0,a7=a5.length,a2=a7===F||a.isFunction(a5);if(a4){if(a2){for(a3 in a5){if(a9.apply(a5[a3],a4)===false){break}}}else{for(;a6<a7;){if(a9.apply(a5[a6++],a4)===false){break}}}}else{if(a2){for(a3 in a5){if(a9.call(a5[a3],a3,a5[a3])===false){break}}}else{for(var a8=a5[0];a6<a7&&a9.call(a8,a6,a8)!==false;a8=a5[++a6]){}}}return a5},trim:function(a2){return(a2||"").replace(P,"")},makeArray:function(a4,a3){var a2=a3||[];if(a4!=null){if(a4.length==null||typeof a4==="string"||a.isFunction(a4)||(typeof a4!=="function"&&a4.setInterval)){g.call(a2,a4)}else{a.merge(a2,a4)}}return a2},inArray:function(a4,a5){if(a5.indexOf){return a5.indexOf(a4)}for(var a2=0,a3=a5.length;a2<a3;a2++){if(a5[a2]===a4){return a2}}return -1},merge:function(a6,a4){var a5=a6.length,a3=0;if(typeof a4.length==="number"){for(var a2=a4.length;a3<a2;a3++){a6[a5++]=a4[a3]}}else{while(a4[a3]!==F){a6[a5++]=a4[a3++]}}a6.length=a5;return a6},grep:function(a3,a7,a2){var a4=[];for(var a5=0,a6=a3.length;a5<a6;a5++){if(!a2!==!a7(a3[a5],a5)){a4.push(a3[a5])}}return a4},map:function(a3,a8,a2){var a4=[],a7;for(var a5=0,a6=a3.length;a5<a6;a5++){a7=a8(a3[a5],a5,a2);if(a7!=null){a4[a4.length]=a7}}return a4.concat.apply([],a4)},guid:1,proxy:function(a4,a3,a2){if(arguments.length===2){if(typeof a3==="string"){a2=a4;a4=a2[a3];a3=F}else{if(a3&&!a.isFunction(a3)){a2=a3;a3=F}}}if(!a3&&a4){a3=function(){return a4.apply(a2||this,arguments)}}if(a4){a3.guid=a4.guid=a4.guid||a3.guid||a.guid++}return a3},uaMatch:function(a3){a3=a3.toLowerCase();var a2=/(webkit)[ \/]([\w.]+)/.exec(a3)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a3)||/(msie) ([\w.]+)/.exec(a3)||!/compatible/.test(a3)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a3)||[];return{browser:a2[1]||"",version:a2[2]||"0"}},browser:{}});x=a.uaMatch(b);if(x.browser){a.browser[x.browser]=true;a.browser.version=x.version}if(a.browser.webkit){a.browser.safari=true}if(v){a.inArray=function(a2,a3){return v.call(a3,a2)}}ab=a(af);if(af.addEventListener){aK=function(){af.removeEventListener("DOMContentLoaded",aK,false);a.ready()}}else{if(af.attachEvent){aK=function(){if(af.readyState==="complete"){af.detachEvent("onreadystatechange",aK);a.ready()}}}}function A(){if(a.isReady){return}try{af.documentElement.doScroll("left")}catch(a2){setTimeout(A,1);return}a.ready()}function aZ(a2,a3){if(a3.src){a.ajax({url:a3.src,async:false,dataType:"script"})}else{a.globalEval(a3.text||a3.textContent||a3.innerHTML||"")}if(a3.parentNode){a3.parentNode.removeChild(a3)}}function ar(a2,ba,a8,a4,a7,a9){var a3=a2.length;if(typeof ba==="object"){for(var a5 in ba){ar(a2,a5,ba[a5],a4,a7,a8)}return a2}if(a8!==F){a4=!a9&&a4&&a.isFunction(a8);for(var a6=0;a6<a3;a6++){a7(a2[a6],ba,a4?a8.call(a2[a6],a6,a7(a2[a6],ba)):a8,a9)}return a2}return a3?a7(a2[0],ba):F}function aT(){return(new Date).getTime()}(function(){a.support={};var a8=af.documentElement,a7=af.createElement("script"),a2=af.createElement("div"),a3="script"+aT();a2.style.display="none";a2.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var ba=a2.getElementsByTagName("*"),a9=a2.getElementsByTagName("a")[0];if(!ba||!ba.length||!a9){return}a.support={leadingWhitespace:a2.firstChild.nodeType===3,tbody:!a2.getElementsByTagName("tbody").length,htmlSerialize:!!a2.getElementsByTagName("link").length,style:/red/.test(a9.getAttribute("style")),hrefNormalized:a9.getAttribute("href")==="/a",opacity:/^0.55$/.test(a9.style.opacity),cssFloat:!!a9.style.cssFloat,checkOn:a2.getElementsByTagName("input")[0].value==="on",optSelected:af.createElement("select").appendChild(af.createElement("option")).selected,parentNode:a2.removeChild(a2.appendChild(af.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};a7.type="text/javascript";try{a7.appendChild(af.createTextNode("window."+a3+"=1;"))}catch(a5){}a8.insertBefore(a7,a8.firstChild);if(aQ[a3]){a.support.scriptEval=true;delete aQ[a3]}try{delete a7.test}catch(a5){a.support.deleteExpando=false}a8.removeChild(a7);if(a2.attachEvent&&a2.fireEvent){a2.attachEvent("onclick",function bb(){a.support.noCloneEvent=false;a2.detachEvent("onclick",bb)});a2.cloneNode(true).fireEvent("onclick")}a2=af.createElement("div");a2.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var a4=af.createDocumentFragment();a4.appendChild(a2.firstChild);a.support.checkClone=a4.cloneNode(true).cloneNode(true).lastChild.checked;a(function(){var bc=af.createElement("div");bc.style.width=bc.style.paddingLeft="1px";af.body.appendChild(bc);a.boxModel=a.support.boxModel=bc.offsetWidth===2;af.body.removeChild(bc).style.display="none";bc=null});var a6=function(bc){var be=af.createElement("div");bc="on"+bc;var bd=(bc in be);if(!bd){be.setAttribute(bc,"return;");bd=typeof be[bc]==="function"}be=null;return bd};a.support.submitBubbles=a6("submit");a.support.changeBubbles=a6("change");a8=a7=a2=ba=a9=null})();a.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var aM="jQuery"+aT(),aL=0,aX={};a.extend({cache:{},expando:aM,noData:{embed:true,object:true,applet:true},data:function(a4,a3,a6){if(a4.nodeName&&a.noData[a4.nodeName.toLowerCase()]){return}a4=a4==aQ?aX:a4;var a7=a4[aM],a2=a.cache,a5;if(!a7&&typeof a3==="string"&&a6===F){return null}if(!a7){a7=++aL}if(typeof a3==="object"){a4[aM]=a7;a5=a2[a7]=a.extend(true,{},a3)}else{if(!a2[a7]){a4[aM]=a7;a2[a7]={}}}a5=a2[a7];if(a6!==F){a5[a3]=a6}return typeof a3==="string"?a5[a3]:a5},removeData:function(a4,a3){if(a4.nodeName&&a.noData[a4.nodeName.toLowerCase()]){return}a4=a4==aQ?aX:a4;var a6=a4[aM],a2=a.cache,a5=a2[a6];if(a3){if(a5){delete a5[a3];if(a.isEmptyObject(a5)){a.removeData(a4)}}}else{if(a.support.deleteExpando){delete a4[a.expando]}else{if(a4.removeAttribute){a4.removeAttribute(a.expando)}}delete a2[a6]}}});a.fn.extend({data:function(a2,a4){if(typeof a2==="undefined"&&this.length){return a.data(this[0])}else{if(typeof a2==="object"){return this.each(function(){a.data(this,a2)})}}var a5=a2.split(".");a5[1]=a5[1]?"."+a5[1]:"";if(a4===F){var a3=this.triggerHandler("getData"+a5[1]+"!",[a5[0]]);if(a3===F&&this.length){a3=a.data(this[0],a2)}return a3===F&&a5[1]?this.data(a5[0]):a3}else{return this.trigger("setData"+a5[1]+"!",[a5[0],a4]).each(function(){a.data(this,a2,a4)})}},removeData:function(a2){return this.each(function(){a.removeData(this,a2)})}});a.extend({queue:function(a3,a2,a5){if(!a3){return}a2=(a2||"fx")+"queue";var a4=a.data(a3,a2);if(!a5){return a4||[]}if(!a4||a.isArray(a5)){a4=a.data(a3,a2,a.makeArray(a5))}else{a4.push(a5)}return a4},dequeue:function(a5,a4){a4=a4||"fx";var a2=a.queue(a5,a4),a3=a2.shift();if(a3==="inprogress"){a3=a2.shift()}if(a3){if(a4==="fx"){a2.unshift("inprogress")}a3.call(a5,function(){a.dequeue(a5,a4)})}}});a.fn.extend({queue:function(a2,a3){if(typeof a2!=="string"){a3=a2;a2="fx"}if(a3===F){return a.queue(this[0],a2)}return this.each(function(a5,a6){var a4=a.queue(this,a2,a3);if(a2==="fx"&&a4[0]!=="inprogress"){a.dequeue(this,a2)}})},dequeue:function(a2){return this.each(function(){a.dequeue(this,a2)})},delay:function(a3,a2){a3=a.fx?a.fx.speeds[a3]||a3:a3;a2=a2||"fx";return this.queue(a2,function(){var a4=this;setTimeout(function(){a.dequeue(a4,a2)},a3)})},clearQueue:function(a2){return this.queue(a2||"fx",[])}});var at=/[\n\t]/g,W=/\s+/,az=/\r/g,aU=/href|src|style/,d=/(button|input)/i,C=/(button|input|object|select|textarea)/i,l=/^(a|area)$/i,L=/radio|checkbox/;a.fn.extend({attr:function(a2,a3){return ar(this,a2,a3,true,a.attr)},removeAttr:function(a2,a3){return this.each(function(){a.attr(this,a2,"");if(this.nodeType===1){this.removeAttribute(a2)}})},addClass:function(a9){if(a.isFunction(a9)){return this.each(function(bc){var bb=a(this);bb.addClass(a9.call(this,bc,bb.attr("class")))})}if(a9&&typeof a9==="string"){var a2=(a9||"").split(W);for(var a5=0,a4=this.length;a5<a4;a5++){var a3=this[a5];if(a3.nodeType===1){if(!a3.className){a3.className=a9}else{var a6=" "+a3.className+" ",a8=a3.className;for(var a7=0,ba=a2.length;a7<ba;a7++){if(a6.indexOf(" "+a2[a7]+" ")<0){a8+=" "+a2[a7]}}a3.className=a.trim(a8)}}}}return this},removeClass:function(a7){if(a.isFunction(a7)){return this.each(function(bb){var ba=a(this);ba.removeClass(a7.call(this,bb,ba.attr("class")))})}if((a7&&typeof a7==="string")||a7===F){var a8=(a7||"").split(W);for(var a4=0,a3=this.length;a4<a3;a4++){var a6=this[a4];if(a6.nodeType===1&&a6.className){if(a7){var a5=(" "+a6.className+" ").replace(at," ");for(var a9=0,a2=a8.length;a9<a2;a9++){a5=a5.replace(" "+a8[a9]+" "," ")}a6.className=a.trim(a5)}else{a6.className=""}}}}return this},toggleClass:function(a5,a3){var a4=typeof a5,a2=typeof a3==="boolean";if(a.isFunction(a5)){return this.each(function(a7){var a6=a(this);a6.toggleClass(a5.call(this,a7,a6.attr("class"),a3),a3)})}return this.each(function(){if(a4==="string"){var a8,a7=0,a6=a(this),a9=a3,ba=a5.split(W);while((a8=ba[a7++])){a9=a2?a9:!a6.hasClass(a8);a6[a9?"addClass":"removeClass"](a8)}}else{if(a4==="undefined"||a4==="boolean"){if(this.className){a.data(this,"__className__",this.className)}this.className=this.className||a5===false?"":a.data(this,"__className__")||""}}})},hasClass:function(a2){var a5=" "+a2+" ";for(var a4=0,a3=this.length;a4<a3;a4++){if((" "+this[a4].className+" ").replace(at," ").indexOf(a5)>-1){return true}}return false},val:function(a9){if(a9===F){var a3=this[0];if(a3){if(a.nodeName(a3,"option")){return(a3.attributes.value||{}).specified?a3.value:a3.text}if(a.nodeName(a3,"select")){var a7=a3.selectedIndex,ba=[],bb=a3.options,a6=a3.type==="select-one";if(a7<0){return null}for(var a4=a6?a7:0,a8=a6?a7+1:bb.length;a4<a8;a4++){var a5=bb[a4];if(a5.selected){a9=a(a5).val();if(a6){return a9}ba.push(a9)}}return ba}if(L.test(a3.type)&&!a.support.checkOn){return a3.getAttribute("value")===null?"on":a3.value}return(a3.value||"").replace(az,"")}return F}var a2=a.isFunction(a9);return this.each(function(be){var bd=a(this),bf=a9;if(this.nodeType!==1){return}if(a2){bf=a9.call(this,be,bd.val())}if(typeof bf==="number"){bf+=""}if(a.isArray(bf)&&L.test(this.type)){this.checked=a.inArray(bd.val(),bf)>=0}else{if(a.nodeName(this,"select")){var bc=a.makeArray(bf);a("option",this).each(function(){this.selected=a.inArray(a(this).val(),bc)>=0});if(!bc.length){this.selectedIndex=-1}}else{this.value=bf}}})}});a.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a3,a2,a8,bb){if(!a3||a3.nodeType===3||a3.nodeType===8){return F}if(bb&&a2 in a.attrFn){return a(a3)[a2](a8)}var a4=a3.nodeType!==1||!a.isXMLDoc(a3),a7=a8!==F;a2=a4&&a.props[a2]||a2;if(a3.nodeType===1){var a6=aU.test(a2);if(a2==="selected"&&!a.support.optSelected){var a9=a3.parentNode;if(a9){a9.selectedIndex;if(a9.parentNode){a9.parentNode.selectedIndex}}}if(a2 in a3&&a4&&!a6){if(a7){if(a2==="type"&&d.test(a3.nodeName)&&a3.parentNode){a.error("type property can't be changed")}a3[a2]=a8}if(a.nodeName(a3,"form")&&a3.getAttributeNode(a2)){return a3.getAttributeNode(a2).nodeValue}if(a2==="tabIndex"){var ba=a3.getAttributeNode("tabIndex");return ba&&ba.specified?ba.value:C.test(a3.nodeName)||l.test(a3.nodeName)&&a3.href?0:F}return a3[a2]}if(!a.support.style&&a4&&a2==="style"){if(a7){a3.style.cssText=""+a8}return a3.style.cssText}if(a7){a3.setAttribute(a2,""+a8)}var a5=!a.support.hrefNormalized&&a4&&a6?a3.getAttribute(a2,2):a3.getAttribute(a2);return a5===null?F:a5}return a.style(a3,a2,a8)}});var aG=/\.(.*)$/,D=function(a2){return a2.replace(/[^\w\s\.\|`]/g,function(a3){return"\\"+a3})};a.event={add:function(a5,a9,be,a7){if(a5.nodeType===3||a5.nodeType===8){return}if(a5.setInterval&&(a5!==aQ&&!a5.frameElement)){a5=aQ}var a3,bd;if(be.handler){a3=be;be=a3.handler}if(!be.guid){be.guid=a.guid++}var ba=a.data(a5);if(!ba){return}var bf=ba.events=ba.events||{},a8=ba.handle,a8;if(!a8){ba.handle=a8=function(){return typeof a!=="undefined"&&!a.event.triggered?a.event.handle.apply(a8.elem,arguments):F}}a8.elem=a5;a9=a9.split(" ");var bc,a6=0,a2;while((bc=a9[a6++])){bd=a3?a.extend({},a3):{handler:be,data:a7};if(bc.indexOf(".")>-1){a2=bc.split(".");bc=a2.shift();bd.namespace=a2.slice(0).sort().join(".")}else{a2=[];bd.namespace=""}bd.type=bc;bd.guid=be.guid;var a4=bf[bc],bb=a.event.special[bc]||{};if(!a4){a4=bf[bc]=[];if(!bb.setup||bb.setup.call(a5,a7,a2,a8)===false){if(a5.addEventListener){a5.addEventListener(bc,a8,false)}else{if(a5.attachEvent){a5.attachEvent("on"+bc,a8)}}}}if(bb.add){bb.add.call(a5,bd);if(!bd.handler.guid){bd.handler.guid=be.guid}}a4.push(bd);a.event.global[bc]=true}a5=null},global:{},remove:function(bh,bc,a3,a8){if(bh.nodeType===3||bh.nodeType===8){return}var bk,a7,a9,bf=0,a5,ba,bd,a6,bb,a2,bj,bg=a.data(bh),a4=bg&&bg.events;if(!bg||!a4){return}if(bc&&bc.type){a3=bc.handler;bc=bc.type}if(!bc||typeof bc==="string"&&bc.charAt(0)==="."){bc=bc||"";for(a7 in a4){a.event.remove(bh,a7+bc)}return}bc=bc.split(" ");while((a7=bc[bf++])){bj=a7;a2=null;a5=a7.indexOf(".")<0;ba=[];if(!a5){ba=a7.split(".");a7=ba.shift();bd=new RegExp("(^|\\.)"+a.map(ba.slice(0).sort(),D).join("\\.(?:.*\\.)?")+"(\\.|$)")}bb=a4[a7];if(!bb){continue}if(!a3){for(var be=0;be<bb.length;be++){a2=bb[be];if(a5||bd.test(a2.namespace)){a.event.remove(bh,bj,a2.handler,be);bb.splice(be--,1)}}continue}a6=a.event.special[a7]||{};for(var be=a8||0;be<bb.length;be++){a2=bb[be];if(a3.guid===a2.guid){if(a5||bd.test(a2.namespace)){if(a8==null){bb.splice(be--,1)}if(a6.remove){a6.remove.call(bh,a2)}}if(a8!=null){break}}}if(bb.length===0||a8!=null&&bb.length===1){if(!a6.teardown||a6.teardown.call(bh,ba)===false){ak(bh,a7,bg.handle)}bk=null;delete a4[a7]}}if(a.isEmptyObject(a4)){var bi=bg.handle;if(bi){bi.elem=null}delete bg.events;delete bg.handle;if(a.isEmptyObject(bg)){a.removeData(bh)}}},trigger:function(a2,a6,a4){var bb=a2.type||a2,a5=arguments[3];if(!a5){a2=typeof a2==="object"?a2[aM]?a2:a.extend(a.Event(bb),a2):a.Event(bb);if(bb.indexOf("!")>=0){a2.type=bb=bb.slice(0,-1);a2.exclusive=true}if(!a4){a2.stopPropagation();if(a.event.global[bb]){a.each(a.cache,function(){if(this.events&&this.events[bb]){a.event.trigger(a2,a6,this.handle.elem)}})}}if(!a4||a4.nodeType===3||a4.nodeType===8){return F}a2.result=F;a2.target=a4;a6=a.makeArray(a6);a6.unshift(a2)}a2.currentTarget=a4;var a7=a.data(a4,"handle");if(a7){a7.apply(a4,a6)}var bc=a4.parentNode||a4.ownerDocument;try{if(!(a4&&a4.nodeName&&a.noData[a4.nodeName.toLowerCase()])){if(a4["on"+bb]&&a4["on"+bb].apply(a4,a6)===false){a2.result=false}}}catch(a9){}if(!a2.isPropagationStopped()&&bc){a.event.trigger(a2,a6,bc,true)}else{if(!a2.isDefaultPrevented()){var a8=a2.target,a3,bd=a.nodeName(a8,"a")&&bb==="click",ba=a.event.special[bb]||{};if((!ba._default||ba._default.call(a4,a2)===false)&&!bd&&!(a8&&a8.nodeName&&a.noData[a8.nodeName.toLowerCase()])){try{if(a8[bb]){a3=a8["on"+bb];if(a3){a8["on"+bb]=null}a.event.triggered=true;a8[bb]()}}catch(a9){}if(a3){a8["on"+bb]=a3}a.event.triggered=false}}}},handle:function(a2){var ba,a4,a3,a5,bb;a2=arguments[0]=a.event.fix(a2||aQ.event);a2.currentTarget=this;ba=a2.type.indexOf(".")<0&&!a2.exclusive;if(!ba){a3=a2.type.split(".");a2.type=a3.shift();a5=new RegExp("(^|\\.)"+a3.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}var bb=a.data(this,"events"),a4=bb[a2.type];if(bb&&a4){a4=a4.slice(0);for(var a7=0,a6=a4.length;a7<a6;a7++){var a9=a4[a7];if(ba||a5.test(a9.namespace)){a2.handler=a9.handler;a2.data=a9.data;a2.handleObj=a9;var a8=a9.handler.apply(this,arguments);if(a8!==F){a2.result=a8;if(a8===false){a2.preventDefault();a2.stopPropagation()}}if(a2.isImmediatePropagationStopped()){break}}}}return a2.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a5){if(a5[aM]){return a5}var a3=a5;a5=a.Event(a3);for(var a4=this.props.length,a7;a4;){a7=this.props[--a4];a5[a7]=a3[a7]}if(!a5.target){a5.target=a5.srcElement||af}if(a5.target.nodeType===3){a5.target=a5.target.parentNode}if(!a5.relatedTarget&&a5.fromElement){a5.relatedTarget=a5.fromElement===a5.target?a5.toElement:a5.fromElement}if(a5.pageX==null&&a5.clientX!=null){var a6=af.documentElement,a2=af.body;a5.pageX=a5.clientX+(a6&&a6.scrollLeft||a2&&a2.scrollLeft||0)-(a6&&a6.clientLeft||a2&&a2.clientLeft||0);a5.pageY=a5.clientY+(a6&&a6.scrollTop||a2&&a2.scrollTop||0)-(a6&&a6.clientTop||a2&&a2.clientTop||0)}if(!a5.which&&((a5.charCode||a5.charCode===0)?a5.charCode:a5.keyCode)){a5.which=a5.charCode||a5.keyCode}if(!a5.metaKey&&a5.ctrlKey){a5.metaKey=a5.ctrlKey}if(!a5.which&&a5.button!==F){a5.which=(a5.button&1?1:(a5.button&2?3:(a5.button&4?2:0)))}return a5},guid:100000000,proxy:a.proxy,special:{ready:{setup:a.bindReady,teardown:a.noop},live:{add:function(a2){a.event.add(this,a2.origType,a.extend({},a2,{handler:Z}))},remove:function(a3){var a2=true,a4=a3.origType.replace(aG,"");a.each(a.data(this,"events").live||[],function(){if(a4===this.origType.replace(aG,"")){a2=false;return false}});if(a2){a.event.remove(this,a3.origType,Z)}}},beforeunload:{setup:function(a4,a3,a2){if(this.setInterval){this.onbeforeunload=a2}return false},teardown:function(a3,a2){if(this.onbeforeunload===a2){this.onbeforeunload=null}}}}};var ak=af.removeEventListener?function(a3,a2,a4){a3.removeEventListener(a2,a4,false)}:function(a3,a2,a4){a3.detachEvent("on"+a2,a4)};a.Event=function(a2){if(!this.preventDefault){return new a.Event(a2)}if(a2&&a2.type){this.originalEvent=a2;this.type=a2.type}else{this.type=a2}this.timeStamp=aT();this[aM]=true};function aV(){return false}function f(){return true}a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=f;var a2=this.originalEvent;if(!a2){return}if(a2.preventDefault){a2.preventDefault()}a2.returnValue=false},stopPropagation:function(){this.isPropagationStopped=f;var a2=this.originalEvent;if(!a2){return}if(a2.stopPropagation){a2.stopPropagation()}a2.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f;this.stopPropagation()},isDefaultPrevented:aV,isPropagationStopped:aV,isImmediatePropagationStopped:aV};var U=function(a3){var a2=a3.relatedTarget;try{while(a2&&a2!==this){a2=a2.parentNode}if(a2!==this){a3.type=a3.data;a.event.handle.apply(this,arguments)}}catch(a4){}},aC=function(a2){a2.type=a2.data;a.event.handle.apply(this,arguments)};a.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a3,a2){a.event.special[a3]={setup:function(a4){a.event.add(this,a2,a4&&a4.selector?aC:U,a3)},teardown:function(a4){a.event.remove(this,a2,a4&&a4.selector?aC:U)}}});if(!a.support.submitBubbles){a.event.special.submit={setup:function(a3,a2){if(this.nodeName.toLowerCase()!=="form"){a.event.add(this,"click.specialSubmit",function(a6){var a5=a6.target,a4=a5.type;if((a4==="submit"||a4==="image")&&a(a5).closest("form").length){return aE("submit",this,arguments)}});a.event.add(this,"keypress.specialSubmit",function(a6){var a5=a6.target,a4=a5.type;if((a4==="text"||a4==="password")&&a(a5).closest("form").length&&a6.keyCode===13){return aE("submit",this,arguments)}})}else{return false}},teardown:function(a2){a.event.remove(this,".specialSubmit")}}}if(!a.support.changeBubbles){var av=/textarea|input|select/i,aW,j=function(a3){var a2=a3.type,a4=a3.value;if(a2==="radio"||a2==="checkbox"){a4=a3.checked}else{if(a2==="select-multiple"){a4=a3.selectedIndex>-1?a.map(a3.options,function(a5){return a5.selected}).join("-"):""}else{if(a3.nodeName.toLowerCase()==="select"){a4=a3.selectedIndex}}}return a4},S=function S(a4){var a2=a4.target,a3,a5;if(!av.test(a2.nodeName)||a2.readOnly){return}a3=a.data(a2,"_change_data");a5=j(a2);if(a4.type!=="focusout"||a2.type!=="radio"){a.data(a2,"_change_data",a5)}if(a3===F||a5===a3){return}if(a3!=null||a5){a4.type="change";return a.event.trigger(a4,arguments[1],a2)}};a.event.special.change={filters:{focusout:S,click:function(a4){var a3=a4.target,a2=a3.type;if(a2==="radio"||a2==="checkbox"||a3.nodeName.toLowerCase()==="select"){return S.call(this,a4)}},keydown:function(a4){var a3=a4.target,a2=a3.type;if((a4.keyCode===13&&a3.nodeName.toLowerCase()!=="textarea")||(a4.keyCode===32&&(a2==="checkbox"||a2==="radio"))||a2==="select-multiple"){return S.call(this,a4)}},beforeactivate:function(a3){var a2=a3.target;a.data(a2,"_change_data",j(a2))}},setup:function(a4,a3){if(this.type==="file"){return false}for(var a2 in aW){a.event.add(this,a2+".specialChange",aW[a2])}return av.test(this.nodeName)},teardown:function(a2){a.event.remove(this,".specialChange");return av.test(this.nodeName)}};aW=a.event.special.change.filters}function aE(a3,a4,a2){a2[0].type=a3;return a.event.handle.apply(a4,a2)}if(af.addEventListener){a.each({focus:"focusin",blur:"focusout"},function(a4,a2){a.event.special[a2]={setup:function(){this.addEventListener(a4,a3,true)},teardown:function(){this.removeEventListener(a4,a3,true)}};function a3(a5){a5=a.event.fix(a5);a5.type=a2;return a.event.handle.call(this,a5)}})}a.each(["bind","one"],function(a3,a2){a.fn[a2]=function(a9,ba,a8){if(typeof a9==="object"){for(var a6 in a9){this[a2](a6,ba,a9[a6],a8)}return this}if(a.isFunction(ba)){a8=ba;ba=F}var a7=a2==="one"?a.proxy(a8,function(bb){a(this).unbind(bb,a7);return a8.apply(this,arguments)}):a8;if(a9==="unload"&&a2!=="one"){this.one(a9,ba,a8)}else{for(var a5=0,a4=this.length;a5<a4;a5++){a.event.add(this[a5],a9,a7,ba)}}return this}});a.fn.extend({unbind:function(a6,a5){if(typeof a6==="object"&&!a6.preventDefault){for(var a4 in a6){this.unbind(a4,a6[a4])}}else{for(var a3=0,a2=this.length;a3<a2;a3++){a.event.remove(this[a3],a6,a5)}}return this},delegate:function(a2,a3,a5,a4){return this.live(a3,a5,a4,a2)},undelegate:function(a2,a3,a4){if(arguments.length===0){return this.unbind("live")}else{return this.die(a3,null,a4,a2)}},trigger:function(a2,a3){return this.each(function(){a.event.trigger(a2,a3,this)})},triggerHandler:function(a2,a4){if(this[0]){var a3=a.Event(a2);a3.preventDefault();a3.stopPropagation();a.event.trigger(a3,a4,this[0]);return a3.result}},toggle:function(a4){var a2=arguments,a3=1;while(a3<a2.length){a.proxy(a4,a2[a3++])}return this.click(a.proxy(a4,function(a5){var a6=(a.data(this,"lastToggle"+a4.guid)||0)%a3;a.data(this,"lastToggle"+a4.guid,a6+1);a5.preventDefault();return a2[a6].apply(this,arguments)||false}))},hover:function(a2,a3){return this.mouseenter(a2).mouseleave(a3||a2)}});var aA={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};a.each(["live","die"],function(a3,a2){a.fn[a2]=function(bb,a8,bd,a6){var bc,a9=0,ba,a5,be,a7=a6||this.selector,a4=a6?this:a(this.context);if(a.isFunction(a8)){bd=a8;a8=F}bb=(bb||"").split(" ");while((bc=bb[a9++])!=null){ba=aG.exec(bc);a5="";if(ba){a5=ba[0];bc=bc.replace(aG,"")}if(bc==="hover"){bb.push("mouseenter"+a5,"mouseleave"+a5);continue}be=bc;if(bc==="focus"||bc==="blur"){bb.push(aA[bc]+a5);bc=bc+a5}else{bc=(aA[bc]||bc)+a5}if(a2==="live"){a4.each(function(){a.event.add(this,o(bc,a7),{data:a8,selector:a7,handler:bd,origType:bc,origHandler:bd,preType:be})})}else{a4.unbind(o(bc,a7),bd)}}return this}});function Z(a2){var bc,a3=[],bf=[],bb=arguments,be,ba,bd,a5,a7,a9,a6,a8,bg=a.data(this,"events");if(a2.liveFired===this||!bg||!bg.live||a2.button&&a2.type==="click"){return}a2.liveFired=this;var a4=bg.live.slice(0);for(a7=0;a7<a4.length;a7++){bd=a4[a7];if(bd.origType.replace(aG,"")===a2.type){bf.push(bd.selector)}else{a4.splice(a7--,1)}}ba=a(a2.target).closest(bf,a2.currentTarget);for(a9=0,a6=ba.length;a9<a6;a9++){for(a7=0;a7<a4.length;a7++){bd=a4[a7];if(ba[a9].selector===bd.selector){a5=ba[a9].elem;be=null;if(bd.preType==="mouseenter"||bd.preType==="mouseleave"){be=a(a2.relatedTarget).closest(bd.selector)[0]}if(!be||be!==a5){a3.push({elem:a5,handleObj:bd})}}}}for(a9=0,a6=a3.length;a9<a6;a9++){ba=a3[a9];a2.currentTarget=ba.elem;a2.data=ba.handleObj.data;a2.handleObj=ba.handleObj;if(ba.handleObj.origHandler.apply(ba.elem,bb)===false){bc=false;break}}return bc}function o(a3,a2){return"live."+(a3&&a3!=="*"?a3+".":"")+a2.replace(/\./g,"`").replace(/ /g,"&")}a.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(a3,a2){a.fn[a2]=function(a4){return a4?this.bind(a2,a4):this.trigger(a2)};if(a.attrFn){a.attrFn[a2]=true}});if(aQ.attachEvent&&!aQ.addEventListener){aQ.attachEvent("onunload",function(){for(var a3 in a.cache){if(a.cache[a3].handle){try{a.event.remove(a.cache[a3].handle.elem)}catch(a2){}}}});
/*
 * Sizzle CSS Selector Engine - v1.0
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
}(function(){var bd=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,be=0,bg=Object.prototype.toString,a8=false,a7=true;[0,0].sort(function(){a7=false;return 0});var a4=function(bp,bk,bs,bt){bs=bs||[];var bv=bk=bk||af;if(bk.nodeType!==1&&bk.nodeType!==9){return[]}if(!bp||typeof bp!=="string"){return bs}var bq=[],bm,bx,bA,bl,bo=true,bn=a5(bk),bu=bp;while((bd.exec(""),bm=bd.exec(bu))!==null){bu=bm[3];bq.push(bm[1]);if(bm[2]){bl=bm[3];break}}if(bq.length>1&&a9.exec(bp)){if(bq.length===2&&ba.relative[bq[0]]){bx=bh(bq[0]+bq[1],bk)}else{bx=ba.relative[bq[0]]?[bk]:a4(bq.shift(),bk);while(bq.length){bp=bq.shift();if(ba.relative[bp]){bp+=bq.shift()}bx=bh(bp,bx)}}}else{if(!bt&&bq.length>1&&bk.nodeType===9&&!bn&&ba.match.ID.test(bq[0])&&!ba.match.ID.test(bq[bq.length-1])){var bw=a4.find(bq.shift(),bk,bn);bk=bw.expr?a4.filter(bw.expr,bw.set)[0]:bw.set[0]}if(bk){var bw=bt?{expr:bq.pop(),set:bc(bt)}:a4.find(bq.pop(),bq.length===1&&(bq[0]==="~"||bq[0]==="+")&&bk.parentNode?bk.parentNode:bk,bn);bx=bw.expr?a4.filter(bw.expr,bw.set):bw.set;if(bq.length>0){bA=bc(bx)}else{bo=false}while(bq.length){var bz=bq.pop(),by=bz;if(!ba.relative[bz]){bz=""}else{by=bq.pop()}if(by==null){by=bk}ba.relative[bz](bA,by,bn)}}else{bA=bq=[]}}if(!bA){bA=bx}if(!bA){a4.error(bz||bp)}if(bg.call(bA)==="[object Array]"){if(!bo){bs.push.apply(bs,bA)}else{if(bk&&bk.nodeType===1){for(var br=0;bA[br]!=null;br++){if(bA[br]&&(bA[br]===true||bA[br].nodeType===1&&bb(bk,bA[br]))){bs.push(bx[br])}}}else{for(var br=0;bA[br]!=null;br++){if(bA[br]&&bA[br].nodeType===1){bs.push(bx[br])}}}}}else{bc(bA,bs)}if(bl){a4(bl,bv,bs,bt);a4.uniqueSort(bs)}return bs};a4.uniqueSort=function(bl){if(bf){a8=a7;bl.sort(bf);if(a8){for(var bk=1;bk<bl.length;bk++){if(bl[bk]===bl[bk-1]){bl.splice(bk--,1)}}}}return bl};a4.matches=function(bk,bl){return a4(bk,null,null,bl)};a4.find=function(br,bk,bs){var bq,bo;if(!br){return[]}for(var bn=0,bm=ba.order.length;bn<bm;bn++){var bp=ba.order[bn],bo;if((bo=ba.leftMatch[bp].exec(br))){var bl=bo[1];bo.splice(1,1);if(bl.substr(bl.length-1)!=="\\"){bo[1]=(bo[1]||"").replace(/\\/g,"");bq=ba.find[bp](bo,bk,bs);if(bq!=null){br=br.replace(ba.match[bp],"");break}}}}if(!bq){bq=bk.getElementsByTagName("*")}return{set:bq,expr:br}};a4.filter=function(bv,bu,by,bo){var bm=bv,bA=[],bs=bu,bq,bk,br=bu&&bu[0]&&a5(bu[0]);while(bv&&bu.length){for(var bt in ba.filter){if((bq=ba.leftMatch[bt].exec(bv))!=null&&bq[2]){var bl=ba.filter[bt],bz,bx,bn=bq[1];bk=false;bq.splice(1,1);if(bn.substr(bn.length-1)==="\\"){continue}if(bs===bA){bA=[]}if(ba.preFilter[bt]){bq=ba.preFilter[bt](bq,bs,by,bA,bo,br);if(!bq){bk=bz=true}else{if(bq===true){continue}}}if(bq){for(var bp=0;(bx=bs[bp])!=null;bp++){if(bx){bz=bl(bx,bq,bp,bs);var bw=bo^!!bz;if(by&&bz!=null){if(bw){bk=true}else{bs[bp]=false}}else{if(bw){bA.push(bx);bk=true}}}}}if(bz!==F){if(!by){bs=bA}bv=bv.replace(ba.match[bt],"");if(!bk){return[]}break}}}if(bv===bm){if(bk==null){a4.error(bv)}else{break}}bm=bv}return bs};a4.error=function(bk){throw"Syntax error, unrecognized expression: "+bk};var ba=a4.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(bk){return bk.getAttribute("href")}},relative:{"+":function(bq,bl){var bn=typeof bl==="string",bp=bn&&!/\W/.test(bl),br=bn&&!bp;if(bp){bl=bl.toLowerCase()}for(var bm=0,bk=bq.length,bo;bm<bk;bm++){if((bo=bq[bm])){while((bo=bo.previousSibling)&&bo.nodeType!==1){}bq[bm]=br||bo&&bo.nodeName.toLowerCase()===bl?bo||false:bo===bl}}if(br){a4.filter(bl,bq,true)}},">":function(bq,bl){var bo=typeof bl==="string";if(bo&&!/\W/.test(bl)){bl=bl.toLowerCase();for(var bm=0,bk=bq.length;bm<bk;bm++){var bp=bq[bm];if(bp){var bn=bp.parentNode;bq[bm]=bn.nodeName.toLowerCase()===bl?bn:false}}}else{for(var bm=0,bk=bq.length;bm<bk;bm++){var bp=bq[bm];if(bp){bq[bm]=bo?bp.parentNode:bp.parentNode===bl}}if(bo){a4.filter(bl,bq,true)}}},"":function(bn,bl,bp){var bm=be++,bk=bi;if(typeof bl==="string"&&!/\W/.test(bl)){var bo=bl=bl.toLowerCase();bk=a2}bk("parentNode",bl,bm,bn,bo,bp)},"~":function(bn,bl,bp){var bm=be++,bk=bi;if(typeof bl==="string"&&!/\W/.test(bl)){var bo=bl=bl.toLowerCase();bk=a2}bk("previousSibling",bl,bm,bn,bo,bp)}},find:{ID:function(bl,bm,bn){if(typeof bm.getElementById!=="undefined"&&!bn){var bk=bm.getElementById(bl[1]);return bk?[bk]:[]}},NAME:function(bm,bp){if(typeof bp.getElementsByName!=="undefined"){var bl=[],bo=bp.getElementsByName(bm[1]);for(var bn=0,bk=bo.length;bn<bk;bn++){if(bo[bn].getAttribute("name")===bm[1]){bl.push(bo[bn])}}return bl.length===0?null:bl}},TAG:function(bk,bl){return bl.getElementsByTagName(bk[1])}},preFilter:{CLASS:function(bn,bl,bm,bk,bq,br){bn=" "+bn[1].replace(/\\/g,"")+" ";if(br){return bn}for(var bo=0,bp;(bp=bl[bo])!=null;bo++){if(bp){if(bq^(bp.className&&(" "+bp.className+" ").replace(/[\t\n]/g," ").indexOf(bn)>=0)){if(!bm){bk.push(bp)}}else{if(bm){bl[bo]=false}}}}return false},ID:function(bk){return bk[1].replace(/\\/g,"")},TAG:function(bl,bk){return bl[1].toLowerCase()},CHILD:function(bk){if(bk[1]==="nth"){var bl=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(bk[2]==="even"&&"2n"||bk[2]==="odd"&&"2n+1"||!/\D/.test(bk[2])&&"0n+"+bk[2]||bk[2]);bk[2]=(bl[1]+(bl[2]||1))-0;bk[3]=bl[3]-0}bk[0]=be++;return bk},ATTR:function(bo,bl,bm,bk,bp,bq){var bn=bo[1].replace(/\\/g,"");if(!bq&&ba.attrMap[bn]){bo[1]=ba.attrMap[bn]}if(bo[2]==="~="){bo[4]=" "+bo[4]+" "}return bo},PSEUDO:function(bo,bl,bm,bk,bp){if(bo[1]==="not"){if((bd.exec(bo[3])||"").length>1||/^\w/.test(bo[3])){bo[3]=a4(bo[3],null,null,bl)}else{var bn=a4.filter(bo[3],bl,bm,true^bp);if(!bm){bk.push.apply(bk,bn)}return false}}else{if(ba.match.POS.test(bo[0])||ba.match.CHILD.test(bo[0])){return true}}return bo},POS:function(bk){bk.unshift(true);return bk}},filters:{enabled:function(bk){return bk.disabled===false&&bk.type!=="hidden"},disabled:function(bk){return bk.disabled===true},checked:function(bk){return bk.checked===true},selected:function(bk){bk.parentNode.selectedIndex;return bk.selected===true},parent:function(bk){return !!bk.firstChild},empty:function(bk){return !bk.firstChild},has:function(bm,bl,bk){return !!a4(bk[3],bm).length},header:function(bk){return/h\d/i.test(bk.nodeName)},text:function(bk){return"text"===bk.type},radio:function(bk){return"radio"===bk.type},checkbox:function(bk){return"checkbox"===bk.type},file:function(bk){return"file"===bk.type},password:function(bk){return"password"===bk.type},submit:function(bk){return"submit"===bk.type},image:function(bk){return"image"===bk.type},reset:function(bk){return"reset"===bk.type},button:function(bk){return"button"===bk.type||bk.nodeName.toLowerCase()==="button"},input:function(bk){return/input|select|textarea|button/i.test(bk.nodeName)}},setFilters:{first:function(bl,bk){return bk===0},last:function(bm,bl,bk,bn){return bl===bn.length-1},even:function(bl,bk){return bk%2===0},odd:function(bl,bk){return bk%2===1},lt:function(bm,bl,bk){return bl<bk[3]-0},gt:function(bm,bl,bk){return bl>bk[3]-0},nth:function(bm,bl,bk){return bk[3]-0===bl},eq:function(bm,bl,bk){return bk[3]-0===bl}},filter:{PSEUDO:function(bq,bm,bn,br){var bl=bm[1],bo=ba.filters[bl];if(bo){return bo(bq,bn,bm,br)}else{if(bl==="contains"){return(bq.textContent||bq.innerText||a3([bq])||"").indexOf(bm[3])>=0}else{if(bl==="not"){var bp=bm[3];for(var bn=0,bk=bp.length;bn<bk;bn++){if(bp[bn]===bq){return false}}return true}else{a4.error("Syntax error, unrecognized expression: "+bl)}}}},CHILD:function(bk,bn){var bq=bn[1],bl=bk;switch(bq){case"only":case"first":while((bl=bl.previousSibling)){if(bl.nodeType===1){return false}}if(bq==="first"){return true}bl=bk;case"last":while((bl=bl.nextSibling)){if(bl.nodeType===1){return false}}return true;case"nth":var bm=bn[2],bt=bn[3];if(bm===1&&bt===0){return true}var bp=bn[0],bs=bk.parentNode;if(bs&&(bs.sizcache!==bp||!bk.nodeIndex)){var bo=0;for(bl=bs.firstChild;bl;bl=bl.nextSibling){if(bl.nodeType===1){bl.nodeIndex=++bo}}bs.sizcache=bp}var br=bk.nodeIndex-bt;if(bm===0){return br===0}else{return(br%bm===0&&br/bm>=0)}}},ID:function(bl,bk){return bl.nodeType===1&&bl.getAttribute("id")===bk},TAG:function(bl,bk){return(bk==="*"&&bl.nodeType===1)||bl.nodeName.toLowerCase()===bk},CLASS:function(bl,bk){return(" "+(bl.className||bl.getAttribute("class"))+" ").indexOf(bk)>-1},ATTR:function(bp,bn){var bm=bn[1],bk=ba.attrHandle[bm]?ba.attrHandle[bm](bp):bp[bm]!=null?bp[bm]:bp.getAttribute(bm),bq=bk+"",bo=bn[2],bl=bn[4];return bk==null?bo==="!=":bo==="="?bq===bl:bo==="*="?bq.indexOf(bl)>=0:bo==="~="?(" "+bq+" ").indexOf(bl)>=0:!bl?bq&&bk!==false:bo==="!="?bq!==bl:bo==="^="?bq.indexOf(bl)===0:bo==="$="?bq.substr(bq.length-bl.length)===bl:bo==="|="?bq===bl||bq.substr(0,bl.length+1)===bl+"-":false},POS:function(bo,bl,bm,bp){var bk=bl[2],bn=ba.setFilters[bk];if(bn){return bn(bo,bm,bl,bp)}}}};var a9=ba.match.POS;for(var a6 in ba.match){ba.match[a6]=new RegExp(ba.match[a6].source+/(?![^\[]*\])(?![^\(]*\))/.source);ba.leftMatch[a6]=new RegExp(/(^(?:.|\r|\n)*?)/.source+ba.match[a6].source.replace(/\\(\d+)/g,function(bl,bk){return"\\"+(bk-0+1)}))}var bc=function(bl,bk){bl=Array.prototype.slice.call(bl,0);if(bk){bk.push.apply(bk,bl);return bk}return bl};try{Array.prototype.slice.call(af.documentElement.childNodes,0)[0].nodeType}catch(bj){bc=function(bo,bn){var bl=bn||[];if(bg.call(bo)==="[object Array]"){Array.prototype.push.apply(bl,bo)}else{if(typeof bo.length==="number"){for(var bm=0,bk=bo.length;bm<bk;bm++){bl.push(bo[bm])}}else{for(var bm=0;bo[bm];bm++){bl.push(bo[bm])}}}return bl}}var bf;if(af.documentElement.compareDocumentPosition){bf=function(bl,bk){if(!bl.compareDocumentPosition||!bk.compareDocumentPosition){if(bl==bk){a8=true}return bl.compareDocumentPosition?-1:1}var bm=bl.compareDocumentPosition(bk)&4?-1:bl===bk?0:1;if(bm===0){a8=true}return bm}}else{if("sourceIndex" in af.documentElement){bf=function(bl,bk){if(!bl.sourceIndex||!bk.sourceIndex){if(bl==bk){a8=true}return bl.sourceIndex?-1:1}var bm=bl.sourceIndex-bk.sourceIndex;if(bm===0){a8=true}return bm}}else{if(af.createRange){bf=function(bn,bl){if(!bn.ownerDocument||!bl.ownerDocument){if(bn==bl){a8=true}return bn.ownerDocument?-1:1}var bm=bn.ownerDocument.createRange(),bk=bl.ownerDocument.createRange();bm.setStart(bn,0);bm.setEnd(bn,0);bk.setStart(bl,0);bk.setEnd(bl,0);var bo=bm.compareBoundaryPoints(Range.START_TO_END,bk);if(bo===0){a8=true}return bo}}}}function a3(bk){var bl="",bn;for(var bm=0;bk[bm];bm++){bn=bk[bm];if(bn.nodeType===3||bn.nodeType===4){bl+=bn.nodeValue}else{if(bn.nodeType!==8){bl+=a3(bn.childNodes)}}}return bl}(function(){var bl=af.createElement("div"),bm="script"+(new Date).getTime();bl.innerHTML="<a name='"+bm+"'/>";var bk=af.documentElement;bk.insertBefore(bl,bk.firstChild);if(af.getElementById(bm)){ba.find.ID=function(bo,bp,bq){if(typeof bp.getElementById!=="undefined"&&!bq){var bn=bp.getElementById(bo[1]);return bn?bn.id===bo[1]||typeof bn.getAttributeNode!=="undefined"&&bn.getAttributeNode("id").nodeValue===bo[1]?[bn]:F:[]}};ba.filter.ID=function(bp,bn){var bo=typeof bp.getAttributeNode!=="undefined"&&bp.getAttributeNode("id");return bp.nodeType===1&&bo&&bo.nodeValue===bn}}bk.removeChild(bl);bk=bl=null})();(function(){var bk=af.createElement("div");bk.appendChild(af.createComment(""));if(bk.getElementsByTagName("*").length>0){ba.find.TAG=function(bl,bp){var bo=bp.getElementsByTagName(bl[1]);if(bl[1]==="*"){var bn=[];for(var bm=0;bo[bm];bm++){if(bo[bm].nodeType===1){bn.push(bo[bm])}}bo=bn}return bo}}bk.innerHTML="<a href='#'></a>";if(bk.firstChild&&typeof bk.firstChild.getAttribute!=="undefined"&&bk.firstChild.getAttribute("href")!=="#"){ba.attrHandle.href=function(bl){return bl.getAttribute("href",2)}}bk=null})();if(af.querySelectorAll){(function(){var bk=a4,bm=af.createElement("div");bm.innerHTML="<p class='TEST'></p>";if(bm.querySelectorAll&&bm.querySelectorAll(".TEST").length===0){return}a4=function(bq,bp,bn,bo){bp=bp||af;if(!bo&&bp.nodeType===9&&!a5(bp)){try{return bc(bp.querySelectorAll(bq),bn)}catch(br){}}return bk(bq,bp,bn,bo)};for(var bl in bk){a4[bl]=bk[bl]}bm=null})()}(function(){var bk=af.createElement("div");bk.innerHTML="<div class='test e'></div><div class='test'></div>";if(!bk.getElementsByClassName||bk.getElementsByClassName("e").length===0){return}bk.lastChild.className="e";if(bk.getElementsByClassName("e").length===1){return}ba.order.splice(1,0,"CLASS");ba.find.CLASS=function(bl,bm,bn){if(typeof bm.getElementsByClassName!=="undefined"&&!bn){return bm.getElementsByClassName(bl[1])}};bk=null})();function a2(bl,bq,bp,bt,br,bs){for(var bn=0,bm=bt.length;bn<bm;bn++){var bk=bt[bn];if(bk){bk=bk[bl];var bo=false;while(bk){if(bk.sizcache===bp){bo=bt[bk.sizset];break}if(bk.nodeType===1&&!bs){bk.sizcache=bp;bk.sizset=bn}if(bk.nodeName.toLowerCase()===bq){bo=bk;break}bk=bk[bl]}bt[bn]=bo}}}function bi(bl,bq,bp,bt,br,bs){for(var bn=0,bm=bt.length;bn<bm;bn++){var bk=bt[bn];if(bk){bk=bk[bl];var bo=false;while(bk){if(bk.sizcache===bp){bo=bt[bk.sizset];break}if(bk.nodeType===1){if(!bs){bk.sizcache=bp;bk.sizset=bn}if(typeof bq!=="string"){if(bk===bq){bo=true;break}}else{if(a4.filter(bq,[bk]).length>0){bo=bk;break}}}bk=bk[bl]}bt[bn]=bo}}}var bb=af.compareDocumentPosition?function(bl,bk){return !!(bl.compareDocumentPosition(bk)&16)}:function(bl,bk){return bl!==bk&&(bl.contains?bl.contains(bk):true)};var a5=function(bk){var bl=(bk?bk.ownerDocument||bk:0).documentElement;return bl?bl.nodeName!=="HTML":false};var bh=function(bk,br){var bn=[],bo="",bp,bm=br.nodeType?[br]:br;while((bp=ba.match.PSEUDO.exec(bk))){bo+=bp[0];bk=bk.replace(ba.match.PSEUDO,"")}bk=ba.relative[bk]?bk+"*":bk;for(var bq=0,bl=bm.length;bq<bl;bq++){a4(bk,bm[bq],bn)}return a4.filter(bo,bn)};a.find=a4;a.expr=a4.selectors;a.expr[":"]=a.expr.filters;a.unique=a4.uniqueSort;a.text=a3;a.isXMLDoc=a5;a.contains=bb;return;aQ.Sizzle=a4})();var Q=/Until$/,ac=/^(?:parents|prevUntil|prevAll)/,aP=/,/,I=Array.prototype.slice;var am=function(a5,a4,a2){if(a.isFunction(a4)){return a.grep(a5,function(a7,a6){return !!a4.call(a7,a6,a7)===a2})}else{if(a4.nodeType){return a.grep(a5,function(a7,a6){return(a7===a4)===a2})}else{if(typeof a4==="string"){var a3=a.grep(a5,function(a6){return a6.nodeType===1});if(a0.test(a4)){return a.filter(a4,a3,!a2)}else{a4=a.filter(a4,a3)}}}}return a.grep(a5,function(a7,a6){return(a.inArray(a7,a4)>=0)===a2})};a.fn.extend({find:function(a2){var a4=this.pushStack("","find",a2),a7=0;for(var a5=0,a3=this.length;a5<a3;a5++){a7=a4.length;a.find(a2,this[a5],a4);if(a5>0){for(var a8=a7;a8<a4.length;a8++){for(var a6=0;a6<a7;a6++){if(a4[a6]===a4[a8]){a4.splice(a8--,1);break}}}}}return a4},has:function(a3){var a2=a(a3);return this.filter(function(){for(var a5=0,a4=a2.length;a5<a4;a5++){if(a.contains(this,a2[a5])){return true}}})},not:function(a2){return this.pushStack(am(this,a2,false),"not",a2)},filter:function(a2){return this.pushStack(am(this,a2,true),"filter",a2)},is:function(a2){return !!a2&&a.filter(a2,this).length>0},closest:function(bb,a2){if(a.isArray(bb)){var a8=[],ba=this[0],a7,a6={},a4;if(ba&&bb.length){for(var a5=0,a3=bb.length;a5<a3;a5++){a4=bb[a5];if(!a6[a4]){a6[a4]=a.expr.match.POS.test(a4)?a(a4,a2||this.context):a4}}while(ba&&ba.ownerDocument&&ba!==a2){for(a4 in a6){a7=a6[a4];if(a7.jquery?a7.index(ba)>-1:a(ba).is(a7)){a8.push({selector:a4,elem:ba});delete a6[a4]}}ba=ba.parentNode}}return a8}var a9=a.expr.match.POS.test(bb)?a(bb,a2||this.context):null;return this.map(function(bc,bd){while(bd&&bd.ownerDocument&&bd!==a2){if(a9?a9.index(bd)>-1:a(bd).is(bb)){return bd}bd=bd.parentNode}return null})},index:function(a2){if(!a2||typeof a2==="string"){return a.inArray(this[0],a2?a(a2):this.parent().children())}return a.inArray(a2.jquery?a2[0]:a2,this)},add:function(a2,a3){var a5=typeof a2==="string"?a(a2,a3||this.context):a.makeArray(a2),a4=a.merge(this.get(),a5);return this.pushStack(B(a5[0])||B(a4[0])?a4:a.unique(a4))},andSelf:function(){return this.add(this.prevObject)}});function B(a2){return !a2||!a2.parentNode||a2.parentNode.nodeType===11}a.each({parent:function(a3){var a2=a3.parentNode;return a2&&a2.nodeType!==11?a2:null},parents:function(a2){return a.dir(a2,"parentNode")},parentsUntil:function(a3,a2,a4){return a.dir(a3,"parentNode",a4)},next:function(a2){return a.nth(a2,2,"nextSibling")},prev:function(a2){return a.nth(a2,2,"previousSibling")},nextAll:function(a2){return a.dir(a2,"nextSibling")},prevAll:function(a2){return a.dir(a2,"previousSibling")},nextUntil:function(a3,a2,a4){return a.dir(a3,"nextSibling",a4)},prevUntil:function(a3,a2,a4){return a.dir(a3,"previousSibling",a4)},siblings:function(a2){return a.sibling(a2.parentNode.firstChild,a2)},children:function(a2){return a.sibling(a2.firstChild)},contents:function(a2){return a.nodeName(a2,"iframe")?a2.contentDocument||a2.contentWindow.document:a.makeArray(a2.childNodes)}},function(a2,a3){a.fn[a2]=function(a6,a4){var a5=a.map(this,a3,a6);if(!Q.test(a2)){a4=a6}if(a4&&typeof a4==="string"){a5=a.filter(a4,a5)}a5=this.length>1?a.unique(a5):a5;if((this.length>1||aP.test(a4))&&ac.test(a2)){a5=a5.reverse()}return this.pushStack(a5,a2,I.call(arguments).join(","))}});a.extend({filter:function(a4,a2,a3){if(a3){a4=":not("+a4+")"}return a.find.matches(a4,a2)},dir:function(a4,a3,a6){var a2=[],a5=a4[a3];while(a5&&a5.nodeType!==9&&(a6===F||a5.nodeType!==1||!a(a5).is(a6))){if(a5.nodeType===1){a2.push(a5)}a5=a5[a3]}return a2},nth:function(a6,a2,a4,a5){a2=a2||1;var a3=0;for(;a6;a6=a6[a4]){if(a6.nodeType===1&&++a3===a2){break}}return a6},sibling:function(a4,a3){var a2=[];for(;a4;a4=a4.nextSibling){if(a4.nodeType===1&&a4!==a3){a2.push(a4)}}return a2}});var X=/ jQuery\d+="(?:\d+|null)"/g,ad=/^\s+/,K=/(<([\w:]+)[^>]*?)\/>/g,ap=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,c=/<([\w:]+)/,w=/<tbody/i,O=/<|&#?\w+;/,H=/<script|<object|<embed|<option|<style/i,n=/checked\s*(?:[^=]|=\s*.checked.)/i,r=function(a3,a4,a2){return ap.test(a2)?a3:a4+"></"+a2+">"},ag={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};ag.optgroup=ag.option;ag.tbody=ag.tfoot=ag.colgroup=ag.caption=ag.thead;ag.th=ag.td;if(!a.support.htmlSerialize){ag._default=[1,"div<div>","</div>"]}a.fn.extend({text:function(a2){if(a.isFunction(a2)){return this.each(function(a4){var a3=a(this);a3.text(a2.call(this,a4,a3.text()))})}if(typeof a2!=="object"&&a2!==F){return this.empty().append((this[0]&&this[0].ownerDocument||af).createTextNode(a2))}return a.text(this)},wrapAll:function(a2){if(a.isFunction(a2)){return this.each(function(a4){a(this).wrapAll(a2.call(this,a4))})}if(this[0]){var a3=a(a2,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){a3.insertBefore(this[0])}a3.map(function(){var a4=this;while(a4.firstChild&&a4.firstChild.nodeType===1){a4=a4.firstChild}return a4}).append(this)}return this},wrapInner:function(a2){if(a.isFunction(a2)){return this.each(function(a3){a(this).wrapInner(a2.call(this,a3))})}return this.each(function(){var a3=a(this),a4=a3.contents();if(a4.length){a4.wrapAll(a2)}else{a3.append(a2)}})},wrap:function(a2){return this.each(function(){a(this).wrapAll(a2)})},unwrap:function(){return this.parent().each(function(){if(!a.nodeName(this,"body")){a(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(a2){if(this.nodeType===1){this.appendChild(a2)}})},prepend:function(){return this.domManip(arguments,true,function(a2){if(this.nodeType===1){this.insertBefore(a2,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(a3){this.parentNode.insertBefore(a3,this)})}else{if(arguments.length){var a2=a(arguments[0]);a2.push.apply(a2,this.toArray());return this.pushStack(a2,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(a3){this.parentNode.insertBefore(a3,this.nextSibling)})}else{if(arguments.length){var a2=this.pushStack(this,"after",arguments);a2.push.apply(a2,a(arguments[0]).toArray());return a2}}},remove:function(a2,a5){for(var a3=0,a4;(a4=this[a3])!=null;a3++){if(!a2||a.filter(a2,[a4]).length){if(!a5&&a4.nodeType===1){a.cleanData(a4.getElementsByTagName("*"));a.cleanData([a4])}if(a4.parentNode){a4.parentNode.removeChild(a4)}}}return this},empty:function(){for(var a2=0,a3;(a3=this[a2])!=null;a2++){if(a3.nodeType===1){a.cleanData(a3.getElementsByTagName("*"))}while(a3.firstChild){a3.removeChild(a3.firstChild)}}return this},clone:function(a3){var a2=this.map(function(){if(!a.support.noCloneEvent&&!a.isXMLDoc(this)){var a5=this.outerHTML,a4=this.ownerDocument;if(!a5){var a6=a4.createElement("div");a6.appendChild(this.cloneNode(true));a5=a6.innerHTML}return a.clean([a5.replace(X,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(ad,"")],a4)[0]}else{return this.cloneNode(true)}});if(a3===true){s(this,a2);s(this.find("*"),a2.find("*"))}return a2},html:function(a4){if(a4===F){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(X,""):null}else{if(typeof a4==="string"&&!H.test(a4)&&(a.support.leadingWhitespace||!ad.test(a4))&&!ag[(c.exec(a4)||["",""])[1].toLowerCase()]){a4=a4.replace(K,r);try{for(var a3=0,a2=this.length;a3<a2;a3++){if(this[a3].nodeType===1){a.cleanData(this[a3].getElementsByTagName("*"));this[a3].innerHTML=a4}}}catch(a5){this.empty().append(a4)}}else{if(a.isFunction(a4)){this.each(function(a8){var a7=a(this),a6=a7.html();a7.empty().append(function(){return a4.call(this,a8,a6)})})}else{this.empty().append(a4)}}}return this},replaceWith:function(a2){if(this[0]&&this[0].parentNode){if(a.isFunction(a2)){return this.each(function(a5){var a4=a(this),a3=a4.html();a4.replaceWith(a2.call(this,a5,a3))})}if(typeof a2!=="string"){a2=a(a2).detach()}return this.each(function(){var a4=this.nextSibling,a3=this.parentNode;a(this).remove();if(a4){a(a4).before(a2)}else{a(a3).append(a2)}})}else{return this.pushStack(a(a.isFunction(a2)?a2():a2),"replaceWith",a2)}},detach:function(a2){return this.remove(a2,true)},domManip:function(a8,bd,bc){var a5,a6,bb=a8[0],a3=[],a7,ba;if(!a.support.checkClone&&arguments.length===3&&typeof bb==="string"&&n.test(bb)){return this.each(function(){a(this).domManip(a8,bd,bc,true)})}if(a.isFunction(bb)){return this.each(function(bf){var be=a(this);a8[0]=bb.call(this,bf,bd?be.html():F);be.domManip(a8,bd,bc)})}if(this[0]){ba=bb&&bb.parentNode;if(a.support.parentNode&&ba&&ba.nodeType===11&&ba.childNodes.length===this.length){a5={fragment:ba}}else{a5=M(a8,this,a3)}a7=a5.fragment;if(a7.childNodes.length===1){a6=a7=a7.firstChild}else{a6=a7.firstChild}if(a6){bd=bd&&a.nodeName(a6,"tr");for(var a4=0,a2=this.length;a4<a2;a4++){bc.call(bd?a9(this[a4],a6):this[a4],a4>0||a5.cacheable||this.length>1?a7.cloneNode(true):a7)}}if(a3.length){a.each(a3,aZ)}}return this;function a9(be,bf){return a.nodeName(be,"table")?(be.getElementsByTagName("tbody")[0]||be.appendChild(be.ownerDocument.createElement("tbody"))):be}}});function s(a4,a2){var a3=0;a2.each(function(){if(this.nodeName!==(a4[a3]&&a4[a3].nodeName)){return}var a9=a.data(a4[a3++]),a8=a.data(this,a9),a5=a9&&a9.events;if(a5){delete a8.handle;a8.events={};for(var a7 in a5){for(var a6 in a5[a7]){a.event.add(this,a7,a5[a7][a6],a5[a7][a6].data)}}}})}function M(a7,a5,a3){var a6,a2,a4,a8=(a5&&a5[0]?a5[0].ownerDocument||a5[0]:af);if(a7.length===1&&typeof a7[0]==="string"&&a7[0].length<512&&a8===af&&!H.test(a7[0])&&(a.support.checkClone||!n.test(a7[0]))){a2=true;a4=a.fragments[a7[0]];if(a4){if(a4!==1){a6=a4}}}if(!a6){a6=a8.createDocumentFragment();a.clean(a7,a8,a6,a3)}if(a2){a.fragments[a7[0]]=a4?a6:1}return{fragment:a6,cacheable:a2}}a.fragments={};a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a2,a3){a.fn[a2]=function(a4){var a7=[],ba=a(a4),a9=this.length===1&&this[0].parentNode;if(a9&&a9.nodeType===11&&a9.childNodes.length===1&&ba.length===1){ba[a3](this[0]);return this}else{for(var a8=0,a5=ba.length;a8<a5;a8++){var a6=(a8>0?this.clone(true):this).get();a.fn[a3].apply(a(ba[a8]),a6);a7=a7.concat(a6)}return this.pushStack(a7,a2,ba.selector)}}});a.extend({clean:function(a4,a6,bd,a8){a6=a6||af;if(typeof a6.createElement==="undefined"){a6=a6.ownerDocument||a6[0]&&a6[0].ownerDocument||af}var be=[];for(var bc=0,a7;(a7=a4[bc])!=null;bc++){if(typeof a7==="number"){a7+=""}if(!a7){continue}if(typeof a7==="string"&&!O.test(a7)){a7=a6.createTextNode(a7)}else{if(typeof a7==="string"){a7=a7.replace(K,r);var bf=(c.exec(a7)||["",""])[1].toLowerCase(),a5=ag[bf]||ag._default,bb=a5[0],a3=a6.createElement("div");a3.innerHTML=a5[1]+a7+a5[2];while(bb--){a3=a3.lastChild}if(!a.support.tbody){var a2=w.test(a7),ba=bf==="table"&&!a2?a3.firstChild&&a3.firstChild.childNodes:a5[1]==="<table>"&&!a2?a3.childNodes:[];for(var a9=ba.length-1;a9>=0;--a9){if(a.nodeName(ba[a9],"tbody")&&!ba[a9].childNodes.length){ba[a9].parentNode.removeChild(ba[a9])}}}if(!a.support.leadingWhitespace&&ad.test(a7)){a3.insertBefore(a6.createTextNode(ad.exec(a7)[0]),a3.firstChild)}a7=a3.childNodes}}if(a7.nodeType){be.push(a7)}else{be=a.merge(be,a7)}}if(bd){for(var bc=0;be[bc];bc++){if(a8&&a.nodeName(be[bc],"script")&&(!be[bc].type||be[bc].type.toLowerCase()==="text/javascript")){a8.push(be[bc].parentNode?be[bc].parentNode.removeChild(be[bc]):be[bc])}else{if(be[bc].nodeType===1){be.splice.apply(be,[bc+1,0].concat(a.makeArray(be[bc].getElementsByTagName("script"))))}bd.appendChild(be[bc])}}}return be},cleanData:function(a3){var a6,a4,a2=a.cache,a9=a.event.special,a8=a.support.deleteExpando;for(var a7=0,a5;(a5=a3[a7])!=null;a7++){a4=a5[a.expando];if(a4){a6=a2[a4];if(a6.events){for(var ba in a6.events){if(a9[ba]){a.event.remove(a5,ba)}else{ak(a5,ba,a6.handle)}}}if(a8){delete a5[a.expando]}else{if(a5.removeAttribute){a5.removeAttribute(a.expando)}}delete a2[a4]}}}});var aw=/z-?index|font-?weight|opacity|zoom|line-?height/i,Y=/alpha\([^)]*\)/,ae=/opacity=([^)]*)/,al=/float/i,aD=/-([a-z])/ig,y=/([A-Z])/g,aS=/^-?\d+(?:px)?$/i,aY=/^-?\d/,aO={position:"absolute",visibility:"hidden",display:"block"},aa=["Left","Right"],aI=["Top","Bottom"],ao=af.defaultView&&af.defaultView.getComputedStyle,aR=a.support.cssFloat?"cssFloat":"styleFloat",m=function(a2,a3){return a3.toUpperCase()};a.fn.css=function(a2,a3){return ar(this,a2,a3,true,function(a5,a4,a6){if(a6===F){return a.curCSS(a5,a4)}if(typeof a6==="number"&&!aw.test(a4)){a6+="px"}a.style(a5,a4,a6)})};a.extend({style:function(a6,a3,a7){if(!a6||a6.nodeType===3||a6.nodeType===8){return F}if((a3==="width"||a3==="height")&&parseFloat(a7)<0){a7=F}var a5=a6.style||a6,a8=a7!==F;if(!a.support.opacity&&a3==="opacity"){if(a8){a5.zoom=1;var a2=parseInt(a7,10)+""==="NaN"?"":"alpha(opacity="+a7*100+")";var a4=a5.filter||a.curCSS(a6,"filter")||"";a5.filter=Y.test(a4)?a4.replace(Y,a2):a2}return a5.filter&&a5.filter.indexOf("opacity=")>=0?(parseFloat(ae.exec(a5.filter)[1])/100)+"":""}if(al.test(a3)){a3=aR}a3=a3.replace(aD,m);if(a8){a5[a3]=a7}return a5[a3]},css:function(a5,a3,a7,a2){if(a3==="width"||a3==="height"){var a9,a4=aO,a8=a3==="width"?aa:aI;function a6(){a9=a3==="width"?a5.offsetWidth:a5.offsetHeight;if(a2==="border"){return}a.each(a8,function(){if(!a2){a9-=parseFloat(a.curCSS(a5,"padding"+this,true))||0}if(a2==="margin"){a9+=parseFloat(a.curCSS(a5,"margin"+this,true))||0}else{a9-=parseFloat(a.curCSS(a5,"border"+this+"Width",true))||0}})}if(a5.offsetWidth!==0){a6()}else{a.swap(a5,a4,a6)}return Math.max(0,Math.round(a9))}return a.curCSS(a5,a3,a7)},curCSS:function(a8,a3,a4){var bb,a2=a8.style,a5;if(!a.support.opacity&&a3==="opacity"&&a8.currentStyle){bb=ae.test(a8.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return bb===""?"1":bb}if(al.test(a3)){a3=aR}if(!a4&&a2&&a2[a3]){bb=a2[a3]}else{if(ao){if(al.test(a3)){a3="float"}a3=a3.replace(y,"-$1").toLowerCase();var ba=a8.ownerDocument.defaultView;if(!ba){return null}var bc=ba.getComputedStyle(a8,null);if(bc){bb=bc.getPropertyValue(a3)}if(a3==="opacity"&&bb===""){bb="1"}}else{if(a8.currentStyle){var a7=a3.replace(aD,m);bb=a8.currentStyle[a3]||a8.currentStyle[a7];if(!aS.test(bb)&&aY.test(bb)){var a6=a2.left,a9=a8.runtimeStyle.left;a8.runtimeStyle.left=a8.currentStyle.left;a2.left=a7==="fontSize"?"1em":(bb||0);bb=a2.pixelLeft+"px";a2.left=a6;a8.runtimeStyle.left=a9}}}}return bb},swap:function(a5,a4,a6){var a2={};for(var a3 in a4){a2[a3]=a5.style[a3];a5.style[a3]=a4[a3]}a6.call(a5);for(var a3 in a4){a5.style[a3]=a2[a3]}}});if(a.expr&&a.expr.filters){a.expr.filters.hidden=function(a5){var a3=a5.offsetWidth,a2=a5.offsetHeight,a4=a5.nodeName.toLowerCase()==="tr";return a3===0&&a2===0&&!a4?true:a3>0&&a2>0&&!a4?false:a.curCSS(a5,"display")==="none"};a.expr.filters.visible=function(a2){return !a.expr.filters.hidden(a2)}}var aj=aT(),aN=/<script(.|\s)*?\/script>/gi,q=/select|textarea/i,aF=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,u=/=\?(&|$)/,G=/\?/,a1=/(\?|&)_=.*?(&|$)/,E=/^(\w+:)?\/\/([^\/?#]+)/,h=/%20/g,z=a.fn.load;a.fn.extend({load:function(a4,a7,a8){if(typeof a4!=="string"){return z.call(this,a4)}else{if(!this.length){return this}}var a6=a4.indexOf(" ");if(a6>=0){var a2=a4.slice(a6,a4.length);a4=a4.slice(0,a6)}var a5="GET";if(a7){if(a.isFunction(a7)){a8=a7;a7=null}else{if(typeof a7==="object"){a7=a.param(a7,a.ajaxSettings.traditional);a5="POST"}}}var a3=this;a.ajax({url:a4,type:a5,dataType:"html",data:a7,complete:function(ba,a9){if(a9==="success"||a9==="notmodified"){a3.html(a2?a("<div />").append(ba.responseText.replace(aN,"")).find(a2):ba.responseText)}if(a8){a3.each(a8,[ba.responseText,a9,ba])}}});return this},serialize:function(){return a.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?a.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||q.test(this.nodeName)||aF.test(this.type))}).map(function(a2,a3){var a4=a(this).val();return a4==null?null:a.isArray(a4)?a.map(a4,function(a6,a5){return{name:a3.name,value:a6}}):{name:a3.name,value:a4}}).get()}});a.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a2,a3){a.fn[a3]=function(a4){return this.bind(a3,a4)}});a.extend({get:function(a2,a4,a5,a3){if(a.isFunction(a4)){a3=a3||a5;a5=a4;a4=null}return a.ajax({type:"GET",url:a2,data:a4,success:a5,dataType:a3})},getScript:function(a2,a3){return a.get(a2,null,a3,"script")},getJSON:function(a2,a3,a4){return a.get(a2,a3,a4,"json")},post:function(a2,a4,a5,a3){if(a.isFunction(a4)){a3=a3||a5;a5=a4;a4={}}return a.ajax({type:"POST",url:a2,data:a4,success:a5,dataType:a3})},ajaxSetup:function(a2){a.extend(a.ajaxSettings,a2)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:aQ.XMLHttpRequest&&(aQ.location.protocol!=="file:"||!aQ.ActiveXObject)?function(){return new aQ.XMLHttpRequest()}:function(){try{return new aQ.ActiveXObject("Microsoft.XMLHTTP")}catch(a2){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(bh){var bc=a.extend(true,{},a.ajaxSettings,bh);var bm,bg,bl,bn=bh&&bh.context||bc,a4=bc.type.toUpperCase();if(bc.data&&bc.processData&&typeof bc.data!=="string"){bc.data=a.param(bc.data,bc.traditional)}if(bc.dataType==="jsonp"){if(a4==="GET"){if(!u.test(bc.url)){bc.url+=(G.test(bc.url)?"&":"?")+(bc.jsonp||"callback")+"=?"}}else{if(!bc.data||!u.test(bc.data)){bc.data=(bc.data?bc.data+"&":"")+(bc.jsonp||"callback")+"=?"}}bc.dataType="json"}if(bc.dataType==="json"&&(bc.data&&u.test(bc.data)||u.test(bc.url))){bm=bc.jsonpCallback||("jsonp"+aj++);if(bc.data){bc.data=(bc.data+"").replace(u,"="+bm+"$1")}bc.url=bc.url.replace(u,"="+bm+"$1");bc.dataType="script";aQ[bm]=aQ[bm]||function(bo){bl=bo;a7();ba();aQ[bm]=F;try{delete aQ[bm]}catch(bp){}if(a5){a5.removeChild(bj)}}}if(bc.dataType==="script"&&bc.cache===null){bc.cache=false}if(bc.cache===false&&a4==="GET"){var a2=aT();var bk=bc.url.replace(a1,"$1_="+a2+"$2");bc.url=bk+((bk===bc.url)?(G.test(bc.url)?"&":"?")+"_="+a2:"")}if(bc.data&&a4==="GET"){bc.url+=(G.test(bc.url)?"&":"?")+bc.data}if(bc.global&&!a.active++){a.event.trigger("ajaxStart")}var bf=E.exec(bc.url),a6=bf&&(bf[1]&&bf[1]!==location.protocol||bf[2]!==location.host);if(bc.dataType==="script"&&a4==="GET"&&a6){var a5=af.getElementsByTagName("head")[0]||af.documentElement;var bj=af.createElement("script");bj.src=bc.url;if(bc.scriptCharset){bj.charset=bc.scriptCharset}if(!bm){var be=false;bj.onload=bj.onreadystatechange=function(){if(!be&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){be=true;a7();ba();bj.onload=bj.onreadystatechange=null;if(a5&&bj.parentNode){a5.removeChild(bj)}}}}a5.insertBefore(bj,a5.firstChild);return F}var a9=false;var a8=bc.xhr();if(!a8){return}if(bc.username){a8.open(a4,bc.url,bc.async,bc.username,bc.password)}else{a8.open(a4,bc.url,bc.async)}try{if(bc.data||bh&&bh.contentType){a8.setRequestHeader("Content-Type",bc.contentType)}if(bc.ifModified){if(a.lastModified[bc.url]){a8.setRequestHeader("If-Modified-Since",a.lastModified[bc.url])}if(a.etag[bc.url]){a8.setRequestHeader("If-None-Match",a.etag[bc.url])}}if(!a6){a8.setRequestHeader("X-Requested-With","XMLHttpRequest")}a8.setRequestHeader("Accept",bc.dataType&&bc.accepts[bc.dataType]?bc.accepts[bc.dataType]+", */*":bc.accepts._default)}catch(bi){}if(bc.beforeSend&&bc.beforeSend.call(bn,a8,bc)===false){if(bc.global&&!--a.active){a.event.trigger("ajaxStop")}a8.abort();return false}if(bc.global){bd("ajaxSend",[a8,bc])}var bb=a8.onreadystatechange=function(bo){if(!a8||a8.readyState===0||bo==="abort"){if(!a9){ba()}a9=true;if(a8){a8.onreadystatechange=a.noop}}else{if(!a9&&a8&&(a8.readyState===4||bo==="timeout")){a9=true;a8.onreadystatechange=a.noop;bg=bo==="timeout"?"timeout":!a.httpSuccess(a8)?"error":bc.ifModified&&a.httpNotModified(a8,bc.url)?"notmodified":"success";var bq;if(bg==="success"){try{bl=a.httpData(a8,bc.dataType,bc)}catch(bp){bg="parsererror";bq=bp}}if(bg==="success"||bg==="notmodified"){if(!bm){a7()}}else{a.handleError(bc,a8,bg,bq)}ba();if(bo==="timeout"){a8.abort()}if(bc.async){a8=null}}}};try{var a3=a8.abort;a8.abort=function(){if(a8){a3.call(a8)}bb("abort")}}catch(bi){}if(bc.async&&bc.timeout>0){setTimeout(function(){if(a8&&!a9){bb("timeout")}},bc.timeout)}try{a8.send(a4==="POST"||a4==="PUT"||a4==="DELETE"?bc.data:null)}catch(bi){a.handleError(bc,a8,null,bi);ba()}if(!bc.async){bb()}function a7(){if(bc.success){bc.success.call(bn,bl,bg,a8)}if(bc.global){bd("ajaxSuccess",[a8,bc])}}function ba(){if(bc.complete){bc.complete.call(bn,a8,bg)}if(bc.global){bd("ajaxComplete",[a8,bc])}if(bc.global&&!--a.active){a.event.trigger("ajaxStop")}}function bd(bp,bo){(bc.context?a(bc.context):a.event).trigger(bp,bo)}return a8},handleError:function(a3,a5,a2,a4){if(a3.error){a3.error.call(a3.context||a3,a5,a2,a4)}if(a3.global){(a3.context?a(a3.context):a.event).trigger("ajaxError",[a5,a3,a4])}},active:0,httpSuccess:function(a3){try{return !a3.status&&location.protocol==="file:"||(a3.status>=200&&a3.status<300)||a3.status===304||a3.status===1223||a3.status===0}catch(a2){}return false},httpNotModified:function(a5,a2){var a4=a5.getResponseHeader("Last-Modified"),a3=a5.getResponseHeader("Etag");if(a4){a.lastModified[a2]=a4}if(a3){a.etag[a2]=a3}return a5.status===304||a5.status===0},httpData:function(a7,a5,a4){var a3=a7.getResponseHeader("content-type")||"",a2=a5==="xml"||!a5&&a3.indexOf("xml")>=0,a6=a2?a7.responseXML:a7.responseText;if(a2&&a6.documentElement.nodeName==="parsererror"){a.error("parsererror")}if(a4&&a4.dataFilter){a6=a4.dataFilter(a6,a5)}if(typeof a6==="string"){if(a5==="json"||!a5&&a3.indexOf("json")>=0){a6=a.parseJSON(a6)}else{if(a5==="script"||!a5&&a3.indexOf("javascript")>=0){a.globalEval(a6)}}}return a6},param:function(a2,a5){var a3=[];if(a5===F){a5=a.ajaxSettings.traditional}if(a.isArray(a2)||a2.jquery){a.each(a2,function(){a7(this.name,this.value)})}else{for(var a6 in a2){a4(a6,a2[a6])}}return a3.join("&").replace(h,"+");function a4(a8,a9){if(a.isArray(a9)){a.each(a9,function(bb,ba){if(a5||/\[\]$/.test(a8)){a7(a8,ba)}else{a4(a8+"["+(typeof ba==="object"||a.isArray(ba)?bb:"")+"]",ba)}})}else{if(!a5&&a9!=null&&typeof a9==="object"){a.each(a9,function(bb,ba){a4(a8+"["+bb+"]",ba)})}else{a7(a8,a9)}}}function a7(a8,a9){a9=a.isFunction(a9)?a9():a9;a3[a3.length]=encodeURIComponent(a8)+"="+encodeURIComponent(a9)}}});var J={},ai=/toggle|show|hide/,ay=/^([+-]=)?([\d+-.]+)(.*)$/,aJ,an=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];a.fn.extend({show:function(a3,bb){if(a3||a3===0){return this.animate(aH("show",3),a3,bb)}else{for(var a8=0,a5=this.length;a8<a5;a8++){var a2=a.data(this[a8],"olddisplay");this[a8].style.display=a2||"";if(a.css(this[a8],"display")==="none"){var ba=this[a8].nodeName,a9;if(J[ba]){a9=J[ba]}else{var a4=a("<"+ba+" />").appendTo("body");a9=a4.css("display");if(a9==="none"){a9="block"}a4.remove();J[ba]=a9}a.data(this[a8],"olddisplay",a9)}}for(var a7=0,a6=this.length;a7<a6;a7++){this[a7].style.display=a.data(this[a7],"olddisplay")||""}return this}},hide:function(a7,a8){if(a7||a7===0){return this.animate(aH("hide",3),a7,a8)}else{for(var a6=0,a3=this.length;a6<a3;a6++){var a2=a.data(this[a6],"olddisplay");if(!a2&&a2!=="none"){a.data(this[a6],"olddisplay",a.css(this[a6],"display"))}}for(var a5=0,a4=this.length;a5<a4;a5++){this[a5].style.display="none"}return this}},_toggle:a.fn.toggle,toggle:function(a4,a3){var a2=typeof a4==="boolean";if(a.isFunction(a4)&&a.isFunction(a3)){this._toggle.apply(this,arguments)}else{if(a4==null||a2){this.each(function(){var a5=a2?a4:a(this).is(":hidden");a(this)[a5?"show":"hide"]()})}else{this.animate(aH("toggle",3),a4,a3)}}return this},fadeTo:function(a2,a4,a3){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:a4},a2,a3)},animate:function(a6,a3,a5,a4){var a2=a.speed(a3,a5,a4);if(a.isEmptyObject(a6)){return this.each(a2.complete)}return this[a2.queue===false?"each":"queue"](function(){var a9=a.extend({},a2),bb,ba=this.nodeType===1&&a(this).is(":hidden"),a7=this;for(bb in a6){var a8=bb.replace(aD,m);if(bb!==a8){a6[a8]=a6[bb];delete a6[bb];bb=a8}if(a6[bb]==="hide"&&ba||a6[bb]==="show"&&!ba){return a9.complete.call(this)}if((bb==="height"||bb==="width")&&this.style){a9.display=a.css(this,"display");a9.overflow=this.style.overflow}if(a.isArray(a6[bb])){(a9.specialEasing=a9.specialEasing||{})[bb]=a6[bb][1];a6[bb]=a6[bb][0]}}if(a9.overflow!=null){this.style.overflow="hidden"}a9.curAnim=a.extend({},a6);a.each(a6,function(bd,bh){var bg=new a.fx(a7,a9,bd);if(ai.test(bh)){bg[bh==="toggle"?ba?"show":"hide":bh](a6)}else{var bf=ay.exec(bh),bi=bg.cur(true)||0;if(bf){var bc=parseFloat(bf[2]),be=bf[3]||"px";if(be!=="px"){a7.style[bd]=(bc||1)+be;bi=((bc||1)/bg.cur(true))*bi;a7.style[bd]=bi+be}if(bf[1]){bc=((bf[1]==="-="?-1:1)*bc)+bi}bg.custom(bi,bc,be)}else{bg.custom(bi,bh,"")}}});return true})},stop:function(a3,a2){var a4=a.timers;if(a3){this.queue([])}this.each(function(){for(var a5=a4.length-1;a5>=0;a5--){if(a4[a5].elem===this){if(a2){a4[a5](true)}a4.splice(a5,1)}}});if(!a2){this.dequeue()}return this}});a.each({slideDown:aH("show",1),slideUp:aH("hide",1),slideToggle:aH("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a2,a3){a.fn[a2]=function(a4,a5){return this.animate(a3,a4,a5)}});a.extend({speed:function(a4,a5,a3){var a2=a4&&typeof a4==="object"?a4:{complete:a3||!a3&&a5||a.isFunction(a4)&&a4,duration:a4,easing:a3&&a5||a5&&!a.isFunction(a5)&&a5};a2.duration=a.fx.off?0:typeof a2.duration==="number"?a2.duration:a.fx.speeds[a2.duration]||a.fx.speeds._default;a2.old=a2.complete;a2.complete=function(){if(a2.queue!==false){a(this).dequeue()}if(a.isFunction(a2.old)){a2.old.call(this)}};return a2},easing:{linear:function(a4,a5,a2,a3){return a2+a3*a4},swing:function(a4,a5,a2,a3){return((-Math.cos(a4*Math.PI)/2)+0.5)*a3+a2}},timers:[],fx:function(a3,a2,a4){this.options=a2;this.elem=a3;this.prop=a4;if(!a2.orig){a2.orig={}}}});a.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(a.fx.step[this.prop]||a.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(a3){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a2=parseFloat(a.css(this.elem,this.prop,a3));return a2&&a2>-10000?a2:parseFloat(a.curCSS(this.elem,this.prop))||0},custom:function(a6,a5,a4){this.startTime=aT();this.start=a6;this.end=a5;this.unit=a4||this.unit||"px";this.now=this.start;this.pos=this.state=0;var a2=this;function a3(a7){return a2.step(a7)}a3.elem=this.elem;if(a3()&&a.timers.push(a3)&&!aJ){aJ=setInterval(a.fx.tick,13)}},show:function(){this.options.orig[this.prop]=a.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());a(this.elem).show()},hide:function(){this.options.orig[this.prop]=a.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a5){var ba=aT(),a6=true;if(a5||ba>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var a7 in this.options.curAnim){if(this.options.curAnim[a7]!==true){a6=false}}if(a6){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;var a4=a.data(this.elem,"olddisplay");this.elem.style.display=a4?a4:this.options.display;if(a.css(this.elem,"display")==="none"){this.elem.style.display="block"}}if(this.options.hide){a(this.elem).hide()}if(this.options.hide||this.options.show){for(var a2 in this.options.curAnim){a.style(this.elem,a2,this.options.orig[a2])}}this.options.complete.call(this.elem)}return false}else{var a3=ba-this.startTime;this.state=a3/this.options.duration;var a8=this.options.specialEasing&&this.options.specialEasing[this.prop];var a9=this.options.easing||(a.easing.swing?"swing":"linear");this.pos=a.easing[a8||a9](this.state,a3,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};a.extend(a.fx,{tick:function(){var a3=a.timers;for(var a2=0;a2<a3.length;a2++){if(!a3[a2]()){a3.splice(a2--,1)}}if(!a3.length){a.fx.stop()}},stop:function(){clearInterval(aJ);aJ=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a2){a.style(a2.elem,"opacity",a2.now)},_default:function(a2){if(a2.elem.style&&a2.elem.style[a2.prop]!=null){a2.elem.style[a2.prop]=(a2.prop==="width"||a2.prop==="height"?Math.max(0,a2.now):a2.now)+a2.unit}else{a2.elem[a2.prop]=a2.now}}}});if(a.expr&&a.expr.filters){a.expr.filters.animated=function(a2){return a.grep(a.timers,function(a3){return a2===a3.elem}).length}}function aH(a3,a2){var a4={};a.each(an.concat.apply([],an.slice(0,a2)),function(){a4[this]=a3});return a4}if("getBoundingClientRect" in af.documentElement){a.fn.offset=function(bb){var a4=this[0];if(bb){return this.each(function(bc){a.offset.setOffset(this,bb,bc)})}if(!a4||!a4.ownerDocument){return null}if(a4===a4.ownerDocument.body){return a.offset.bodyOffset(a4)}var a6=a4.getBoundingClientRect(),ba=a4.ownerDocument,a7=ba.body,a2=ba.documentElement,a5=a2.clientTop||a7.clientTop||0,a8=a2.clientLeft||a7.clientLeft||0,a9=a6.top+(self.pageYOffset||a.support.boxModel&&a2.scrollTop||a7.scrollTop)-a5,a3=a6.left+(self.pageXOffset||a.support.boxModel&&a2.scrollLeft||a7.scrollLeft)-a8;return{top:a9,left:a3}}}else{a.fn.offset=function(bd){var a7=this[0];if(bd){return this.each(function(be){a.offset.setOffset(this,bd,be)})}if(!a7||!a7.ownerDocument){return null}if(a7===a7.ownerDocument.body){return a.offset.bodyOffset(a7)}a.offset.initialize();var a4=a7.offsetParent,a3=a7,bc=a7.ownerDocument,ba,a5=bc.documentElement,a8=bc.body,a9=bc.defaultView,a2=a9?a9.getComputedStyle(a7,null):a7.currentStyle,bb=a7.offsetTop,a6=a7.offsetLeft;while((a7=a7.parentNode)&&a7!==a8&&a7!==a5){if(a.offset.supportsFixedPosition&&a2.position==="fixed"){break}ba=a9?a9.getComputedStyle(a7,null):a7.currentStyle;bb-=a7.scrollTop;a6-=a7.scrollLeft;if(a7===a4){bb+=a7.offsetTop;a6+=a7.offsetLeft;if(a.offset.doesNotAddBorder&&!(a.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(a7.nodeName))){bb+=parseFloat(ba.borderTopWidth)||0;a6+=parseFloat(ba.borderLeftWidth)||0}a3=a4,a4=a7.offsetParent}if(a.offset.subtractsBorderForOverflowNotVisible&&ba.overflow!=="visible"){bb+=parseFloat(ba.borderTopWidth)||0;a6+=parseFloat(ba.borderLeftWidth)||0}a2=ba}if(a2.position==="relative"||a2.position==="static"){bb+=a8.offsetTop;a6+=a8.offsetLeft}if(a.offset.supportsFixedPosition&&a2.position==="fixed"){bb+=Math.max(a5.scrollTop,a8.scrollTop);a6+=Math.max(a5.scrollLeft,a8.scrollLeft)}return{top:bb,left:a6}}}a.offset={initialize:function(){var a2=af.body,a3=af.createElement("div"),a6,a8,a7,a9,a4=parseFloat(a.curCSS(a2,"marginTop",true))||0,a5="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.extend(a3.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});a3.innerHTML=a5;a2.insertBefore(a3,a2.firstChild);a6=a3.firstChild;a8=a6.firstChild;a9=a6.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(a8.offsetTop!==5);this.doesAddBorderForTableAndCells=(a9.offsetTop===5);a8.style.position="fixed",a8.style.top="20px";this.supportsFixedPosition=(a8.offsetTop===20||a8.offsetTop===15);a8.style.position=a8.style.top="";a6.style.overflow="hidden",a6.style.position="relative";this.subtractsBorderForOverflowNotVisible=(a8.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(a2.offsetTop!==a4);a2.removeChild(a3);a2=a3=a6=a8=a7=a9=null;a.offset.initialize=a.noop},bodyOffset:function(a2){var a4=a2.offsetTop,a3=a2.offsetLeft;a.offset.initialize();if(a.offset.doesNotIncludeMarginInBodyOffset){a4+=parseFloat(a.curCSS(a2,"marginTop",true))||0;a3+=parseFloat(a.curCSS(a2,"marginLeft",true))||0}return{top:a4,left:a3}},setOffset:function(a7,a3,a4){if(/static/.test(a.curCSS(a7,"position"))){a7.style.position="relative"}var a6=a(a7),a9=a6.offset(),a2=parseInt(a.curCSS(a7,"top",true),10)||0,a8=parseInt(a.curCSS(a7,"left",true),10)||0;if(a.isFunction(a3)){a3=a3.call(a7,a4,a9)}var a5={top:(a3.top-a9.top)+a2,left:(a3.left-a9.left)+a8};if("using" in a3){a3.using.call(a7,a5)}else{a6.css(a5)}}};a.fn.extend({position:function(){if(!this[0]){return null}var a4=this[0],a3=this.offsetParent(),a5=this.offset(),a2=/^body|html$/i.test(a3[0].nodeName)?{top:0,left:0}:a3.offset();a5.top-=parseFloat(a.curCSS(a4,"marginTop",true))||0;a5.left-=parseFloat(a.curCSS(a4,"marginLeft",true))||0;a2.top+=parseFloat(a.curCSS(a3[0],"borderTopWidth",true))||0;a2.left+=parseFloat(a.curCSS(a3[0],"borderLeftWidth",true))||0;return{top:a5.top-a2.top,left:a5.left-a2.left}},offsetParent:function(){return this.map(function(){var a2=this.offsetParent||af.body;while(a2&&(!/^body|html$/i.test(a2.nodeName)&&a.css(a2,"position")==="static")){a2=a2.offsetParent}return a2})}});a.each(["Left","Top"],function(a3,a2){var a4="scroll"+a2;a.fn[a4]=function(a7){var a5=this[0],a6;if(!a5){return null}if(a7!==F){return this.each(function(){a6=aq(this);if(a6){a6.scrollTo(!a3?a7:a(a6).scrollLeft(),a3?a7:a(a6).scrollTop())}else{this[a4]=a7}})}else{a6=aq(a5);return a6?("pageXOffset" in a6)?a6[a3?"pageYOffset":"pageXOffset"]:a.support.boxModel&&a6.document.documentElement[a4]||a6.document.body[a4]:a5[a4]}}});function aq(a2){return("scrollTo" in a2&&a2.document)?a2:a2.nodeType===9?a2.defaultView||a2.parentWindow:false}a.each(["Height","Width"],function(a3,a2){var a4=a2.toLowerCase();a.fn["inner"+a2]=function(){return this[0]?a.css(this[0],a4,false,"padding"):null};a.fn["outer"+a2]=function(a5){return this[0]?a.css(this[0],a4,false,a5?"margin":"border"):null};a.fn[a4]=function(a5){var a6=this[0];if(!a6){return a5==null?null:this}if(a.isFunction(a5)){return this.each(function(a8){var a7=a(this);a7[a4](a5.call(this,a8,a7[a4]()))})}return("scrollTo" in a6&&a6.document)?a6.document.compatMode==="CSS1Compat"&&a6.document.documentElement["client"+a2]||a6.document.body["client"+a2]:(a6.nodeType===9)?Math.max(a6.documentElement["client"+a2],a6.body["scroll"+a2],a6.documentElement["scroll"+a2],a6.body["offset"+a2],a6.documentElement["offset"+a2]):a5===F?a.css(a6,a4):this.css(a4,typeof a5==="string"?a5:a5+"px")}});aQ.jQuery=aQ.$=a})(window);(function(d){var c,j,a,h=/^.*#/;var f={iframe:null,getDoc:function(){return f.iframe.contentWindow.document},getHash:function(){return f.getDoc().location.hash},setHash:function(l){var m=f.getDoc();m.open();m.close();m.location.hash=l}};var e=function(){var l=d.browser.msie||(d.browser.safari&&!/chrome/.test(navigator.userAgent.toLowerCase()));return l};var g=function(m){try{return decodeURIComponent(escape(m))}catch(l){try{return decodeURIComponent(m)}catch(l){log("error simple-decoding: ",l);log("returning hash");return m}}};var b=function(){var o=location.hash;var r=f.iframe?f.getHash():location.hash;if(g(r)!=g(c)||g(o)!=g(c)){if(g(r)==c&&f.iframe){f.setHash(location.hash);r=f.getHash();if(r!=c){new_hash=ieEncode(decodeURIComponent(r));if(new_hash!=c){r=new_hash;f.setHash(new_hash)}}}if(!e()&&r!=decodeURIComponent(r)){r=decodeURIComponent(r)}if(!d.browser.msie&&o!=r){r=c=decodeURIComponent(o);location.hash=r}var l=true;if(r.indexOf("||")!=-1||c.indexOf("||")!=-1){var s=r;var n={};if(r.indexOf("||")!=-1){s=r.substring(0,r.indexOf("||"));n=parseQuerystring(r.substring(r.indexOf("||")+2))}var m=c;var q={};if(c.indexOf("||")!=-1){m=c.substring(0,c.indexOf("||"));q=parseQuerystring(c.substring(c.indexOf("||")+2))}if(m==s){seenKeys=[];for(key in n){if(key in q){seenKeys.push(key);if(n[key]!=q[key]){d.event.trigger("subhistory",[key,n[key]])}}else{d.event.trigger("subhistory",[key,n[key]])}}for(key in q){if(seenKeys.indexOf(key)==-1){d.event.trigger("subhistory",[key,undefined])}}l=false}}c=r;if(f.iframe){location.hash=c}if(l){log("history check found nav change... executing");var p=d.history.getCurrent();if(p.indexOf("||")!=-1){p=p.substr(0,p.indexOf("||"))}d.event.trigger("historyadd",[p,j]);j=p}}};d.history={add:function(n,o){if(!e()){try{n=decodeURIComponent(n)}catch(m){}}if(d.inArray(n,server_info.ignored_urls)!=-1){return}n="#"+n.replace(h,"");if(c!=n){var l=d.history.getCurrent();if(onlyBrian()&&o){log("removing last in history.add");c=n;location.replace(n);if(f.iframe){window.history.back();window.history.back();f.setHash(c)}}else{location.hash=c=n;if(f.iframe){f.setHash(c)}}}d.event.trigger("historyadd",[d.history.getCurrent(),l])},sanitizeCurrent:function(l){l=g(l);if(l.indexOf("||")!=-1){return l.substring(0,l.indexOf("||"))}return l},getSubhistoryParams:function(l){l=g(l);if(l.indexOf("||")!=-1){return parseQuerystring(l.substring(l.indexOf("||")+2))}return{}},removeSub:function(l){d.history.addSub(l,undefined)},addSub:function(l,m){values={};values[l]=m;d.history.updateSubs(values)},updateSubs:function(l){current="#"+d.history.getCurrent();value_dict={};if(current.indexOf("||")!=-1){var m=current.substring(current.indexOf("||")+2);value_dict=parseQuerystring(m);current=current.substring(0,current.indexOf("||"))}for(name in l){if(l[name]===undefined){delete value_dict[name]}else{value_dict[name]=l[name]}d.event.trigger("subhistoryadd",[name,l[name]])}var n=false;for(key in value_dict){if(n){current+="&"}else{current+="||";n=true}current+=key+"="+value_dict[key]}location.hash=c=current;if(f.iframe){f.setHash(c)}},getCurrent:function(){return c.replace(h,"")}};d.fn.history=function(l){d(this).bind("history",l)};d.fn.historyadd=function(l){d(this).bind("historyadd",l)};d.fn.subhistory=function(l){d(this).bind("subhistory",l)};d.fn.subhistoryadd=function(l){d(this).bind("subhistoryadd",l)};d(function(){c=location.hash;if(d.browser.msie&&d.browser.version<8){f.iframe=d('<iframe style="display:none" src="javascript:false;"></iframe>').prependTo("body")[0];f.setHash(c);c=f.getHash()}if(!d.browser.msie){try{c=decodeURIComponent(c)}catch(l){log(l)}}if(!a){a=setInterval(b,100)}})})(jQuery);jQuery.cookie=function(b,j,n){if(typeof j!="undefined"){n=n||{};if(j===null){j="";n.expires=-1}var e="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var f;if(typeof n.expires=="number"){f=new Date();f.setTime(f.getTime()+(n.expires*24*60*60*1000))}else{f=n.expires}e="; expires="+f.toUTCString()}var m=n.path?"; path="+(n.path):"";var g=n.domain?"; domain="+(n.domain):"";var a=n.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,m,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var h=0;h<l.length;h++){var c=jQuery.trim(l[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function($){var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(typeof JSON!=="undefined"){$.toJSON=JSON.stringify;$.evalJSON=JSON.parse;$.secureEvalJSON=JSON.parse}else{$.toJSON=function(o){var type=typeof(o);if(o===null){return"null"}if(type=="undefined"){return undefined}if(type=="number"||type=="boolean"){return o+""}if(type=="string"){return $.quoteString(o)}if(type=="object"){if(typeof o.toJSON=="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1;if(month<10){month="0"+month}var day=o.getUTCDate();if(day<10){day="0"+day}var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10){hours="0"+hours}var minutes=o.getUTCMinutes();if(minutes<10){minutes="0"+minutes}var seconds=o.getUTCSeconds();if(seconds<10){seconds="0"+seconds}var milli=o.getUTCMilliseconds();if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var pairs=[];for(var k in o){var name;type=typeof k;if(type=="number"){name='"'+k+'"'}else{if(type=="string"){name=$.quoteString(k)}else{continue}}if(typeof o[k]=="function"){continue}var val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(", ")+"}"}};$.evalJSON=function(src){return eval("("+src+")")};$.secureEvalJSON=function(src){var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};JSON={stringify:$.toJSON,parse:$.secureEvalJSON}}$.quoteString=function(string){if(string.match(_escapeable)){return'"'+string.replace(_escapeable,function(a){var c=_meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'}})(jQuery);
/*
 * jQuery UI 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(a,c){a.ui=a.ui||{};if(a.ui.version){return}a.extend(a.ui,{version:"1.8.4",plugin:{add:function(e,f,h){var g=a.ui[e].prototype;for(var d in h){g.plugins[d]=g.plugins[d]||[];g.plugins[d].push([f,h[d]])}},call:function(d,f,e){var h=d.plugins[f];if(!h||!d.element[0].parentNode){return}for(var g=0;g<h.length;g++){if(d.options[h[g][0]]){h[g][1].apply(d.element,e)}}}},contains:function(e,d){return document.compareDocumentPosition?e.compareDocumentPosition(d)&16:e!==d&&e.contains(d)},hasScroll:function(g,e){if(a(g).css("overflow")==="hidden"){return false}var d=(e&&e==="left")?"scrollLeft":"scrollTop",f=false;if(g[d]>0){return true}g[d]=1;f=(g[d]>0);g[d]=0;return f},isOverAxis:function(e,d,f){return(e>d)&&(e<(d+f))},isOver:function(j,e,h,g,d,f){return a.ui.isOverAxis(j,h,d)&&a.ui.isOverAxis(e,g,f)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(d,e){return typeof d==="number"?this.each(function(){var f=this;setTimeout(function(){a(f).focus();if(e){e.call(f)}},d)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var d;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){d=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.curCSS(this,"position",1))&&(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}else{d=this.parents().filter(function(){return(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!d.length?a(document):d},zIndex:function(g){if(g!==c){return this.css("zIndex",g)}if(this.length){var e=a(this[0]),d,f;while(e.length&&e[0]!==document){d=e.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){f=parseInt(e.css("zIndex"));if(!isNaN(f)&&f!=0){return f}}e=e.parent()}}return 0}});a.each(["Width","Height"],function(f,d){var e=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function h(n,m,l,o){a.each(e,function(){m-=parseFloat(a.curCSS(n,"padding"+this,true))||0;if(l){m-=parseFloat(a.curCSS(n,"border"+this+"Width",true))||0}if(o){m-=parseFloat(a.curCSS(n,"margin"+this,true))||0}});return m}a.fn["inner"+d]=function(l){if(l===c){return j["inner"+d].call(this)}return this.each(function(){a.style(this,g,h(this,l)+"px")})};a.fn["outer"+d]=function(l,m){if(typeof l!=="number"){return j["outer"+d].call(this,l)}return this.each(function(){a.style(this,g,h(this,l,true,m)+"px")})}});function b(d){return !a(d).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.extend(a.expr[":"],{data:function(f,e,d){return !!a.data(f,d[3])},focusable:function(f){var j=f.nodeName.toLowerCase(),d=a.attr(f,"tabindex");if("area"===j){var h=f.parentNode,g=h.name,e;if(!f.href||!g||h.nodeName.toLowerCase()!=="map"){return false}e=a("img[usemap=#"+g+"]")[0];return !!e&&b(e)}return(/input|select|textarea|button|object/.test(j)?!f.disabled:"a"==j?f.href||!isNaN(d):!isNaN(d))&&b(f)},tabbable:function(e){var d=a.attr(e,"tabindex");return(isNaN(d)||d>=0)&&a(e).is(":focusable")}})})(jQuery);
/*
 * jQuery UI Widget 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,c){var a=b.fn.remove;b.fn.remove=function(d,e){return this.each(function(){if(!e){if(!d||b.filter(d,[this]).length){b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")})}}return a.call(b(this),d,e)})};b.widget=function(e,g,d){var f=e.split(".")[0],j;e=e.split(".")[1];j=f+"-"+e;if(!d){d=g;g=b.Widget}b.expr[":"][j]=function(l){return !!b.data(l,e)};b[f]=b[f]||{};b[f][e]=function(l,m){if(arguments.length){this._createWidget(l,m)}};var h=new g();h.options=b.extend(true,{},h.options);b[f][e].prototype=b.extend(true,h,{namespace:f,widgetName:e,widgetEventPrefix:b[f][e].prototype.widgetEventPrefix||e,widgetBaseClass:j},d);b.widget.bridge(e,b[f][e])};b.widget.bridge=function(e,d){b.fn[e]=function(h){var f=typeof h==="string",g=Array.prototype.slice.call(arguments,1),j=this;h=!f&&g.length?b.extend.apply(null,[true,h].concat(g)):h;if(f&&h.substring(0,1)==="_"){return j}if(f){this.each(function(){var l=b.data(this,e),m=l&&b.isFunction(l[h])?l[h].apply(l,g):l;if(m!==l&&m!==c){j=m;return false}})}else{this.each(function(){var l=b.data(this,e);if(l){if(h){l.option(h)}l._init()}else{b.data(this,e,new d(h,this))}})}return j}};b.Widget=function(d,e){if(arguments.length){this._createWidget(d,e)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(e,f){b.data(f,this.widgetName,this);this.element=b(f);this.options=b.extend(true,{},this.options,b.metadata&&b.metadata.get(f)[this.widgetName],e);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,g){var e=f,d=this;if(arguments.length===0){return b.extend({},d.options)}if(typeof f==="string"){if(g===c){return this.options[f]}e={};e[f]=g}b.each(e,function(h,j){d._setOption(h,j)});return d},_setOption:function(d,e){this.options[d]=e;if(d==="disabled"){this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(e,f,g){var j=this.options[e];f=b.Event(f);f.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();g=g||{};if(f.originalEvent){for(var d=b.event.props.length,h;d;){h=b.event.props[--d];f[h]=f.originalEvent[h]}}this.element.trigger(f,g);return !(b.isFunction(j)&&j.call(this.element[0],f,g)===false||f.isDefaultPrevented())}}})(jQuery);
/*
 * jQuery UI Mouse 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a,b){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(d){return c._mouseDown(d)}).bind("click."+this.widgetName,function(d){if(c._preventClickEvent){c._preventClickEvent=false;d.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){e.originalEvent=e.originalEvent||{};if(e.originalEvent.mouseHandled){return}(this._mouseStarted&&this._mouseUp(e));this._mouseDownEvent=e;var d=this,f=(e.which==1),c=(typeof this.options.cancel=="string"?a(e.target).parents().add(e.target).filter(this.options.cancel).length:false);if(!f||c||!this._mouseCapture(e)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=(this._mouseStart(e)!==false);if(!this._mouseStarted){e.preventDefault();return true}}this._mouseMoveDelegate=function(g){return d._mouseMove(g)};this._mouseUpDelegate=function(g){return d._mouseUp(g)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);(a.browser.safari||e.preventDefault());e.originalEvent.mouseHandled=true;return true},_mouseMove:function(c){if(a.browser.msie&&!c.button){return this._mouseUp(c)}if(this._mouseStarted){this._mouseDrag(c);return c.preventDefault()}if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,c)!==false);(this._mouseStarted?this._mouseDrag(c):this._mouseUp(c))}return !this._mouseStarted},_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(c.target==this._mouseDownEvent.target);this._mouseStop(c)}return false},_mouseDistanceMet:function(c){return(Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance)},_mouseDelayMet:function(c){return this.mouseDelayMet},_mouseStart:function(c){},_mouseDrag:function(c){},_mouseStop:function(c){},_mouseCapture:function(c){return true}})})(jQuery);(function(d,f){var c=0,b=0;function e(){return ++c}function a(){return ++b}d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(g,h){if(g=="selected"){if(this.options.collapsible&&h==this.options.selected){return}this.select(h)}else{this.options[g]=h;this._tabify()}},_tabId:function(g){return g.title&&g.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(g){return g.replace(/:/g,"\\:")},_cookie:function(){var g=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+a());return d.cookie.apply(null,[g].concat(d.makeArray(arguments)))},_ui:function(h,g){return{tab:h,panel:g,index:this.anchors.index(h)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var g=d(this);g.html(g.data("label.tabs")).removeData("label.tabs")})},_tabify:function(v){var w=this,j=this.options,h=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(y,o){var x=d(o).attr("href");var z=x.split("#")[0],A;if(z&&(z===location.toString().split("#")[0]||(A=d("base")[0])&&z===A.href)){x=o.hash;o.href=x}if(h.test(x)){w.panels=w.panels.add(w._sanitizeSelector(x))}else{if(x!=="#"){d.data(o,"href.tabs",x);d.data(o,"load.tabs",x.replace(/#.*$/,""));var C=w._tabId(o);o.href="#"+C;var B=d("#"+C);if(!B.length){B=d(j.panelTemplate).attr("id",C).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(w.panels[y-1]||w.list);B.data("destroy.tabs",true)}w.panels=w.panels.add(B)}else{j.disabled.push(y)}}});if(v){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(j.selected===f){if(location.hash){this.anchors.each(function(x,o){if(o.hash==location.hash){j.selected=x;return false}})}if(typeof j.selected!=="number"&&j.cookie){j.selected=parseInt(w._cookie(),10)}if(typeof j.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length){j.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}j.selected=j.selected||(this.lis.length?0:-1)}else{if(j.selected===null){j.selected=-1}}j.selected=((j.selected>=0&&this.anchors[j.selected])||j.selected<0)?j.selected:0;j.disabled=d.unique(j.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(x,o){return w.lis.index(x)}))).sort();if(d.inArray(j.selected,j.disabled)!=-1){j.disabled.splice(d.inArray(j.selected,j.disabled),1)}this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(j.selected>=0&&this.anchors.length){this.panels.eq(j.selected).removeClass("ui-tabs-hide");this.lis.eq(j.selected).addClass("ui-tabs-selected ui-state-active");w.element.queue("tabs",function(){w._trigger("show",null,w._ui(w.anchors[j.selected],w.panels[j.selected]))});this.load(j.selected)}d(window).bind("unload",function(){w.lis.add(w.anchors).unbind(".tabs");w.lis=w.anchors=w.panels=null})}else{j.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[j.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(j.cookie){this._cookie(j.selected,j.cookie)}for(var n=0,u;(u=this.lis[n]);n++){d(u)[d.inArray(n,j.disabled)!=-1&&!d(u).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}if(j.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(j.event!=="mouseover"){var m=function(x,o){if(o.is(":not(.ui-state-disabled)")){o.addClass("ui-state-"+x)}};var q=function(x,o){o.removeClass("ui-state-"+x)};this.lis.bind("mouseover.tabs",function(){m("hover",d(this))});this.lis.bind("mouseout.tabs",function(){q("hover",d(this))});this.anchors.bind("focus.tabs",function(){m("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){q("focus",d(this).closest("li"))})}var g,p;if(j.fx){if(d.isArray(j.fx)){g=j.fx[0];p=j.fx[1]}else{g=p=j.fx}}function l(o,x){o.css("display","");if(!d.support.opacity&&x.opacity){o[0].style.removeAttribute("filter")}}var r=p?function(o,x){d(o).closest("li").addClass("ui-tabs-selected ui-state-active");x.hide().removeClass("ui-tabs-hide").animate(p,p.duration||"normal",function(){l(x,p);w._trigger("show",null,w._ui(o,x[0]))})}:function(o,x){d(o).closest("li").addClass("ui-tabs-selected ui-state-active");x.removeClass("ui-tabs-hide");w._trigger("show",null,w._ui(o,x[0]))};var s=g?function(x,o){o.animate(g,g.duration||"normal",function(){w.lis.removeClass("ui-tabs-selected ui-state-active");o.addClass("ui-tabs-hide");l(o,g);w.element.dequeue("tabs")})}:function(x,o,y){w.lis.removeClass("ui-tabs-selected ui-state-active");o.addClass("ui-tabs-hide");w.element.dequeue("tabs")};this.anchors.bind(j.event+".tabs",function(){var x=this,z=d(x).closest("li"),o=w.panels.filter(":not(.ui-tabs-hide)"),y=d(w._sanitizeSelector(x.hash));if((z.hasClass("ui-tabs-selected")&&!j.collapsible)||z.hasClass("ui-state-disabled")||z.hasClass("ui-state-processing")||w._trigger("select",null,w._ui(this,y[0]))===false){this.blur();return false}j.selected=w.anchors.index(this);w.abort();if(j.collapsible){if(z.hasClass("ui-tabs-selected")){j.selected=-1;if(j.cookie){w._cookie(j.selected,j.cookie)}w.element.queue("tabs",function(){s(x,o)}).dequeue("tabs");this.blur();return false}else{if(!o.length){if(j.cookie){w._cookie(j.selected,j.cookie)}w.element.queue("tabs",function(){r(x,y)});w.load(w.anchors.index(this));this.blur();return false}}}if(j.cookie){w._cookie(j.selected,j.cookie)}if(y.length){if(o.length){w.element.queue("tabs",function(){s(x,o)})}w.element.queue("tabs",function(){r(x,y)});w.load(w.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(d.browser.msie){this.blur()}});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(g){if(typeof g=="string"){g=this.anchors.index(this.anchors.filter("[href$="+g+"]"))}return g},destroy:function(){var g=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var h=d.data(this,"href.tabs");if(h){this.href=h}var j=d(this).unbind(".tabs");d.each(["href","load","cache"],function(l,m){j.removeData(m+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(d.data(this,"destroy.tabs")){d(this).remove()}else{d(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}});if(g.cookie){this._cookie(null,g.cookie)}return this},add:function(l,j,h){if(h===f){h=this.anchors.length}var g=this,n=this.options,q=d(n.tabTemplate.replace(/#\{href\}/g,l).replace(/#\{label\}/g,j)),p=!l.indexOf("#")?l.replace("#",""):this._tabId(d("a",q)[0]);q.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var m=d("#"+p);if(!m.length){m=d(n.panelTemplate).attr("id",p).data("destroy.tabs",true)}m.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(h>=this.lis.length){q.appendTo(this.list);m.appendTo(this.list[0].parentNode)}else{q.insertBefore(this.lis[h]);m.insertBefore(this.panels[h])}n.disabled=d.map(n.disabled,function(r,o){return r>=h?++r:r});this._tabify();if(this.anchors.length==1){n.selected=0;q.addClass("ui-tabs-selected ui-state-active");m.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){g._trigger("show",null,g._ui(g.anchors[0],g.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[h],this.panels[h]));return this},remove:function(g){g=this._getIndex(g);var j=this.options,l=this.lis.eq(g).remove(),h=this.panels.eq(g).remove();if(l.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(g+(g+1<this.anchors.length?1:-1))}j.disabled=d.map(d.grep(j.disabled,function(o,m){return o!=g}),function(o,m){return o>=g?--o:o});this._tabify();this._trigger("remove",null,this._ui(l.find("a")[0],h[0]));return this},enable:function(g){g=this._getIndex(g);var h=this.options;if(d.inArray(g,h.disabled)==-1){return}this.lis.eq(g).removeClass("ui-state-disabled");h.disabled=d.grep(h.disabled,function(l,j){return l!=g});this._trigger("enable",null,this._ui(this.anchors[g],this.panels[g]));return this},disable:function(h){h=this._getIndex(h);var g=this,j=this.options;if(h!=j.selected){this.lis.eq(h).addClass("ui-state-disabled");j.disabled.push(h);j.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[h],this.panels[h]))}return this},select:function(g){g=this._getIndex(g);if(g==-1){if(this.options.collapsible&&this.options.selected!=-1){g=this.options.selected}else{return this}}this.anchors.eq(g).trigger(this.options.event+".tabs");return this},load:function(l){l=this._getIndex(l);var h=this,n=this.options,g=this.anchors.eq(l)[0],j=d.data(g,"load.tabs");this.abort();if(!j||this.element.queue("tabs").length!==0&&d.data(g,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(l).addClass("ui-state-processing");if(n.spinner){var m=d("span",g);m.data("label.tabs",m.html()).html(n.spinner)}this.xhr=d.ajax(d.extend({},n.ajaxOptions,{url:j,success:function(p,o){d(h._sanitizeSelector(g.hash)).html(p);h._cleanup();if(n.cache){d.data(g,"cache.tabs",true)}h._trigger("load",null,h._ui(h.anchors[l],h.panels[l]));try{n.ajaxOptions.success(p,o)}catch(q){}},error:function(q,o,p){h._cleanup();h._trigger("load",null,h._ui(h.anchors[l],h.panels[l]));try{n.ajaxOptions.error(q,o,l,g)}catch(p){}}}));h.element.dequeue("tabs");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(h,g){this.anchors.eq(h).removeData("cache.tabs").data("load.tabs",g);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.4"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(j,m){var g=this,n=this.options;var h=g._rotate||(g._rotate=function(o){clearTimeout(g.rotation);g.rotation=setTimeout(function(){var p=n.selected;g.select(++p<g.anchors.length?p:0)},j);if(o){o.stopPropagation()}});var l=g._unrotate||(g._unrotate=!m?function(o){if(o.clientX){g.rotate(null)}}:function(o){t=n.selected;h()});if(j){this.element.bind("tabsshow",h);this.anchors.bind(n.event+".tabs",l);h()}else{clearTimeout(g.rotation);this.element.unbind("tabsshow",h);this.anchors.unbind(n.event+".tabs",l);delete this._rotate;delete this._unrotate}return this}})})(jQuery);(function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this},_mouseCapture:function(c){var d=this.options;if(this.helper||d.disabled||a(c.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(c);if(!this.handle){return false}return true},_mouseStart:function(c){var d=this.options;this.helper=this._createHelper(c);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;(d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt));if(d.containment){this._setContainment()}if(this._trigger("start",c)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!d.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,c)}this.helper.addClass("ui-draggable-dragging");this._mouseDrag(c,true);return true},_mouseDrag:function(c,e){this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(this._trigger("drag",c,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,c)}return false},_mouseStop:function(d){var e=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){e=a.ui.ddmanager.drop(this,d)}if(this.dropped){e=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode){return false}if((this.options.revert=="invalid"&&!e)||(this.options.revert=="valid"&&e)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,e))){var c=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(c._trigger("stop",d)!==false){c._clear()}})}else{if(this._trigger("stop",d)!==false){this._clear()}}return false},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(c){var d=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==c.target){d=true}});return d},_createHelper:function(d){var e=this.options;var c=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[d])):(e.helper=="clone"?this.element.clone():this.element);if(!c.parents("body").length){c.appendTo((e.appendTo=="parent"?this.element[0].parentNode:e.appendTo))}if(c[0]!=this.element[0]&&!(/(fixed|absolute)/).test(c.css("position"))){c.css("position","absolute")}return c},_adjustOffsetFromHelper:function(c){if(typeof c=="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.element.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;if(f.containment=="parent"){f.containment=this.helper[0].parentNode}if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(f.containment)&&f.containment.constructor!=Array){var d=a(f.containment)[0];if(!d){return}var e=a(f.containment).offset();var c=(a(d).css("overflow")!="hidden");this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else{if(f.containment.constructor==Array){this.containment=f.containment}}},_convertPositionTo:function(g,j){if(!j){j=this.position}var e=g=="absolute"?1:-1;var f=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(c[0].tagName);return{top:(j.top+this.offset.relative.top*e+this.offset.parent.top*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(h?0:c.scrollTop()))*e)),left:(j.left+this.offset.relative.left*e+this.offset.parent.left*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:c.scrollLeft())*e))}},_generatePosition:function(f){var j=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=(/(html|body)/i).test(c[0].tagName);var e=f.pageX;var d=f.pageY;if(this.originalPosition){if(this.containment){if(f.pageX-this.offset.click.left<this.containment[0]){e=this.containment[0]+this.offset.click.left}if(f.pageY-this.offset.click.top<this.containment[1]){d=this.containment[1]+this.offset.click.top}if(f.pageX-this.offset.click.left>this.containment[2]){e=this.containment[2]+this.offset.click.left}if(f.pageY-this.offset.click.top>this.containment[3]){d=this.containment[3]+this.offset.click.top}}if(j.grid){var h=this.originalPageY+Math.round((d-this.originalPageY)/j.grid[1])*j.grid[1];d=this.containment?(!(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h:(!(h-this.offset.click.top<this.containment[1])?h-j.grid[1]:h+j.grid[1])):h;var g=this.originalPageX+Math.round((e-this.originalPageX)/j.grid[0])*j.grid[0];e=this.containment?(!(g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2])?g:(!(g-this.offset.click.left<this.containment[0])?g-j.grid[0]:g+j.grid[0])):g}}return{top:(d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(l?0:c.scrollTop())))),left:(e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:c.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(c,d,e){e=e||this._uiHash();a.ui.plugin.call(this,c,[d,e]);if(c=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,c,d,e)},plugins:{},_uiHash:function(c){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.4"});a.ui.plugin.add("draggable","connectToSortable",{start:function(d,f){var e=a(this).data("draggable"),g=e.options,c=a.extend({},f,{item:e.element});e.sortables=[];a(g.connectToSortable).each(function(){var h=a.data(this,"sortable");if(h&&!h.options.disabled){e.sortables.push({instance:h,shouldRevert:h.options.revert});h._refreshItems();h._trigger("activate",d,c)}})},stop:function(d,f){var e=a(this).data("draggable"),c=a.extend({},f,{item:e.element});a.each(e.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;e.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;if(e.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,c)}})},drag:function(d,g){var f=a(this).data("draggable"),c=this;var e=function(l){var r=this.offset.click.top,q=this.offset.click.left;var h=this.positionAbs.top,n=this.positionAbs.left;var m=l.height,p=l.width;var s=l.top,j=l.left;return a.ui.isOver(h+r,n+q,s,j,m,p)};a.each(f.sortables,function(h){this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(c).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return g.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",d);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}if(this.instance.currentItem){this.instance._mouseDrag(d)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}f._trigger("fromSortable",d);f.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(d,e){var c=a("body"),f=a(this).data("draggable").options;if(c.css("cursor")){f._cursor=c.css("cursor")}c.css("cursor",f.cursor)},stop:function(c,d){var e=a(this).data("draggable").options;if(e._cursor){a("body").css("cursor",e._cursor)}}});a.ui.plugin.add("draggable","iframeFix",{start:function(c,d){var e=a(this).data("draggable").options;a(e.iframeFix===true?"iframe":e.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")})},stop:function(c,d){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(d,e){var c=a(e.helper),f=a(this).data("draggable").options;if(c.css("opacity")){f._opacity=c.css("opacity")}c.css("opacity",f.opacity)},stop:function(c,d){var e=a(this).data("draggable").options;if(e._opacity){a(d.helper).css("opacity",e._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(d,e){var c=a(this).data("draggable");if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){c.overflowOffset=c.scrollParent.offset()}},drag:function(e,f){var d=a(this).data("draggable"),g=d.options,c=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!g.axis||g.axis!="x"){if((d.overflowOffset.top+d.scrollParent[0].offsetHeight)-e.pageY<g.scrollSensitivity){d.scrollParent[0].scrollTop=c=d.scrollParent[0].scrollTop+g.scrollSpeed}else{if(e.pageY-d.overflowOffset.top<g.scrollSensitivity){d.scrollParent[0].scrollTop=c=d.scrollParent[0].scrollTop-g.scrollSpeed}}}if(!g.axis||g.axis!="y"){if((d.overflowOffset.left+d.scrollParent[0].offsetWidth)-e.pageX<g.scrollSensitivity){d.scrollParent[0].scrollLeft=c=d.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(e.pageX-d.overflowOffset.left<g.scrollSensitivity){d.scrollParent[0].scrollLeft=c=d.scrollParent[0].scrollLeft-g.scrollSpeed}}}}else{if(!g.axis||g.axis!="x"){if(e.pageY-a(document).scrollTop()<g.scrollSensitivity){c=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed)}else{if(a(window).height()-(e.pageY-a(document).scrollTop())<g.scrollSensitivity){c=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)}}}if(!g.axis||g.axis!="y"){if(e.pageX-a(document).scrollLeft()<g.scrollSensitivity){c=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed)}else{if(a(window).width()-(e.pageX-a(document).scrollLeft())<g.scrollSensitivity){c=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed)}}}}if(c!==false&&a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(d,e)}}});a.ui.plugin.add("draggable","snap",{start:function(d,e){var c=a(this).data("draggable"),f=c.options;c.snapElements=[];a(f.snap.constructor!=String?(f.snap.items||":data(draggable)"):f.snap).each(function(){var h=a(this);var g=h.offset();if(this!=c.element[0]){c.snapElements.push({item:this,width:h.outerWidth(),height:h.outerHeight(),top:g.top,left:g.left})}})},drag:function(v,q){var g=a(this).data("draggable"),s=g.options;var z=s.snapTolerance;var y=q.offset.left,x=y+g.helperProportions.width,f=q.offset.top,e=f+g.helperProportions.height;for(var w=g.snapElements.length-1;w>=0;w--){var u=g.snapElements[w].left,p=u+g.snapElements[w].width,n=g.snapElements[w].top,B=n+g.snapElements[w].height;if(!((u-z<y&&y<p+z&&n-z<f&&f<B+z)||(u-z<y&&y<p+z&&n-z<e&&e<B+z)||(u-z<x&&x<p+z&&n-z<f&&f<B+z)||(u-z<x&&x<p+z&&n-z<e&&e<B+z))){if(g.snapElements[w].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,v,a.extend(g._uiHash(),{snapItem:g.snapElements[w].item})))}g.snapElements[w].snapping=false;continue}if(s.snapMode!="inner"){var c=Math.abs(n-e)<=z;var A=Math.abs(B-f)<=z;var j=Math.abs(u-x)<=z;var m=Math.abs(p-y)<=z;if(c){q.position.top=g._convertPositionTo("relative",{top:n-g.helperProportions.height,left:0}).top-g.margins.top}if(A){q.position.top=g._convertPositionTo("relative",{top:B,left:0}).top-g.margins.top}if(j){q.position.left=g._convertPositionTo("relative",{top:0,left:u-g.helperProportions.width}).left-g.margins.left}if(m){q.position.left=g._convertPositionTo("relative",{top:0,left:p}).left-g.margins.left}}var h=(c||A||j||m);if(s.snapMode!="outer"){var c=Math.abs(n-f)<=z;var A=Math.abs(B-e)<=z;var j=Math.abs(u-y)<=z;var m=Math.abs(p-x)<=z;if(c){q.position.top=g._convertPositionTo("relative",{top:n,left:0}).top-g.margins.top}if(A){q.position.top=g._convertPositionTo("relative",{top:B-g.helperProportions.height,left:0}).top-g.margins.top}if(j){q.position.left=g._convertPositionTo("relative",{top:0,left:u}).left-g.margins.left}if(m){q.position.left=g._convertPositionTo("relative",{top:0,left:p-g.helperProportions.width}).left-g.margins.left}}if(!g.snapElements[w].snapping&&(c||A||j||m||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,v,a.extend(g._uiHash(),{snapItem:g.snapElements[w].item})))}g.snapElements[w].snapping=(c||A||j||m||h)}}});a.ui.plugin.add("draggable","stack",{start:function(d,e){var g=a(this).data("draggable").options;var f=a.makeArray(a(g.stack)).sort(function(j,h){return(parseInt(a(j).css("zIndex"),10)||0)-(parseInt(a(h).css("zIndex"),10)||0)});if(!f.length){return}var c=parseInt(f[0].style.zIndex)||0;a(f).each(function(h){this.style.zIndex=c+h});this[0].style.zIndex=c+f.length}});a.ui.plugin.add("draggable","zIndex",{start:function(d,e){var c=a(e.helper),f=a(this).data("draggable").options;if(c.css("zIndex")){f._zIndex=c.css("zIndex")}c.css("zIndex",f.zIndex)},stop:function(c,d){var e=a(this).data("draggable").options;if(e._zIndex){a(d.helper).css("zIndex",e._zIndex)}}})})(jQuery);(function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var c=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?(/left|right/).test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var c=this.items.length-1;c>=0;c--){this.items[c].item.removeData("sortable-item")}return this},_setOption:function(c,d){if(c==="disabled"){this.options[c]=d;this.widget()[d?"addClass":"removeClass"]("ui-sortable-disabled")}else{a.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(f,g){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(f);var e=null,d=this,c=a(f.target).parents().each(function(){if(a.data(this,"sortable-item")==d){e=a(this);return false}});if(a.data(f.target,"sortable-item")==d){e=a(f.target)}if(!e){return false}if(this.options.handle&&!g){var h=false;a(this.options.handle,e).find("*").andSelf().each(function(){if(this==f.target){h=true}});if(!h){return false}}this.currentItem=e;this._removeCurrentsFromItems();return true},_mouseStart:function(f,g,c){var h=this.options,d=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(f);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(f);this.originalPageX=f.pageX;this.originalPageY=f.pageY;(h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(h.containment){this._setContainment()}if(h.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")}a("body").css("cursor",h.cursor)}if(h.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",h.opacity)}if(h.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",h.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",f,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!c){for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("activate",f,d._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}if(a.ui.ddmanager&&!h.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,f)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(f);return true},_mouseDrag:function(g){this.position=this._generatePosition(g);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var h=this.options,c=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-g.pageY<h.scrollSensitivity){this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+h.scrollSpeed}else{if(g.pageY-this.overflowOffset.top<h.scrollSensitivity){this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-h.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-g.pageX<h.scrollSensitivity){this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+h.scrollSpeed}else{if(g.pageX-this.overflowOffset.left<h.scrollSensitivity){this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-h.scrollSpeed}}}else{if(g.pageY-a(document).scrollTop()<h.scrollSensitivity){c=a(document).scrollTop(a(document).scrollTop()-h.scrollSpeed)}else{if(a(window).height()-(g.pageY-a(document).scrollTop())<h.scrollSensitivity){c=a(document).scrollTop(a(document).scrollTop()+h.scrollSpeed)}}if(g.pageX-a(document).scrollLeft()<h.scrollSensitivity){c=a(document).scrollLeft(a(document).scrollLeft()-h.scrollSpeed)}else{if(a(window).width()-(g.pageX-a(document).scrollLeft())<h.scrollSensitivity){c=a(document).scrollLeft(a(document).scrollLeft()+h.scrollSpeed)}}}if(c!==false&&a.ui.ddmanager&&!h.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,g)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],d=f.item[0],j=this._intersectsWithPointer(f);if(!j){continue}if(d!=this.currentItem[0]&&this.placeholder[j==1?"next":"prev"]()[0]!=d&&!a.ui.contains(this.placeholder[0],d)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],d):true)){this.direction=j==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f)){this._rearrange(g,f)}else{break}this._trigger("change",g,this._uiHash());break}}this._contactContainers(g);if(a.ui.ddmanager){a.ui.ddmanager.drag(this,g)}this._trigger("sort",g,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(d,e){if(!d){return}if(a.ui.ddmanager&&!this.options.dropBehaviour){a.ui.ddmanager.drop(this,d)}if(this.options.revert){var c=this;var f=c.placeholder.offset();c.reverting=true;a(this.helper).animate({left:f.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(d)})}else{this._clear(d,e)}return false},cancel:function(){var c=this;if(this.dragging){this._mouseUp();if(this.options.helper=="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("deactivate",null,c._uiHash(this));if(this.containers[d].containerCache.over){this.containers[d]._trigger("out",null,c._uiHash(this));this.containers[d].containerCache.over=0}}}if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){a(this.domPosition.prev).after(this.currentItem)}else{a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(e){var c=this._getItemsAsjQuery(e&&e.connected);var d=[];e=e||{};a(c).each(function(){var f=(a(e.item||this).attr(e.attribute||"id")||"").match(e.expression||(/(.+)[-=_](.+)/));if(f){d.push((e.key||f[1]+"[]")+"="+(e.key&&e.expression?f[1]:f[2]))}});if(!d.length&&e.key){d.push(e.key+"=")}return d.join("&")},toArray:function(e){var c=this._getItemsAsjQuery(e&&e.connected);var d=[];e=e||{};c.each(function(){d.push(a(e.item||this).attr(e.attribute||"id")||"")});return d},_intersectsWith:function(o){var e=this.positionAbs.left,d=e+this.helperProportions.width,n=this.positionAbs.top,m=n+this.helperProportions.height;var f=o.left,c=f+o.width,p=o.top,j=p+o.height;var q=this.offset.click.top,h=this.offset.click.left;var g=(n+q)>p&&(n+q)<j&&(e+h)>f&&(e+h)<c;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>o[this.floating?"width":"height"])){return g}else{return(f<e+(this.helperProportions.width/2)&&d-(this.helperProportions.width/2)<c&&p<n+(this.helperProportions.height/2)&&m-(this.helperProportions.height/2)<j)}},_intersectsWithPointer:function(e){var f=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),h=f&&d,c=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(!h){return false}return this.floating?(((g&&g=="right")||c=="down")?2:1):(c&&(c=="down"?2:1))},_intersectsWithSides:function(f){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,f.top+(f.height/2),f.height),e=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,f.left+(f.width/2),f.width),c=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(this.floating&&g){return((g=="right"&&e)||(g=="left"&&!e))}else{return c&&((c=="down"&&d)||(c=="up"&&!d))}},_getDragVerticalDirection:function(){var c=this.positionAbs.top-this.lastPositionAbs.top;return c!=0&&(c>0?"down":"up")},_getDragHorizontalDirection:function(){var c=this.positionAbs.left-this.lastPositionAbs.left;return c!=0&&(c>0?"right":"left")},refresh:function(c){this._refreshItems(c);this.refreshPositions();return this},_connectWith:function(){var c=this.options;return c.connectWith.constructor==String?[c.connectWith]:c.connectWith},_getItemsAsjQuery:function(c){var n=this;var h=[];var f=[];var l=this._connectWith();if(l&&c){for(var e=l.length-1;e>=0;e--){var m=a(l[e]);for(var d=m.length-1;d>=0;d--){var g=a.data(m[d],"sortable");if(g&&g!=this&&!g.options.disabled){f.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g])}}}}f.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var e=f.length-1;e>=0;e--){f[e][0].each(function(){h.push(this)})}return a(h)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data(sortable-item)");for(var d=0;d<this.items.length;d++){for(var c=0;c<e.length;c++){if(e[c]==this.items[d].item[0]){this.items.splice(d,1)}}}},_refreshItems:function(c){this.items=[];this.containers=[this];var l=this.items;var r=this;var g=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],c,{item:this.currentItem}):a(this.options.items,this.element),this]];var n=this._connectWith();if(n){for(var f=n.length-1;f>=0;f--){var o=a(n[f]);for(var e=o.length-1;e>=0;e--){var h=a.data(o[e],"sortable");if(h&&h!=this&&!h.options.disabled){g.push([a.isFunction(h.options.items)?h.options.items.call(h.element[0],c,{item:this.currentItem}):a(h.options.items,h.element),h]);this.containers.push(h)}}}}for(var f=g.length-1;f>=0;f--){var m=g[f][1];var d=g[f][0];for(var e=0,p=d.length;e<p;e++){var q=a(d[e]);q.data("sortable-item",m);l.push({item:q,instance:m,width:0,height:0,left:0,top:0})}}},refreshPositions:function(c){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var e=this.items.length-1;e>=0;e--){var f=this.items[e];var d=this.options.toleranceElement?a(this.options.toleranceElement,f.item):f.item;if(!c){f.width=d.outerWidth();f.height=d.outerHeight()}var g=d.offset();f.left=g.left;f.top=g.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var e=this.containers.length-1;e>=0;e--){var g=this.containers[e].element.offset();this.containers[e].containerCache.left=g.left;this.containers[e].containerCache.top=g.top;this.containers[e].containerCache.width=this.containers[e].element.outerWidth();this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}}return this},_createPlaceholder:function(e){var c=e||this,f=c.options;if(!f.placeholder||f.placeholder.constructor==String){var d=f.placeholder;f.placeholder={element:function(){var g=a(document.createElement(c.currentItem[0].nodeName)).addClass(d||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!d){g.style.visibility="hidden"}return g},update:function(g,h){if(d&&!f.forcePlaceholderSize){return}if(!h.height()){h.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10))}if(!h.width()){h.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}}c.placeholder=a(f.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);f.placeholder.update(c,c.placeholder)},_contactContainers:function(c){var e=null,m=null;for(var g=this.containers.length-1;g>=0;g--){if(a.ui.contains(this.currentItem[0],this.containers[g].element[0])){continue}if(this._intersectsWith(this.containers[g].containerCache)){if(e&&a.ui.contains(this.containers[g].element[0],e.element[0])){continue}e=this.containers[g];m=g}else{if(this.containers[g].containerCache.over){this.containers[g]._trigger("out",c,this._uiHash(this));this.containers[g].containerCache.over=0}}}if(!e){return}if(this.containers.length===1){this.containers[m]._trigger("over",c,this._uiHash(this));this.containers[m].containerCache.over=1}else{if(this.currentContainer!=this.containers[m]){var l=10000;var h=null;var d=this.positionAbs[this.containers[m].floating?"left":"top"];for(var f=this.items.length-1;f>=0;f--){if(!a.ui.contains(this.containers[m].element[0],this.items[f].item[0])){continue}var n=this.items[f][this.containers[m].floating?"left":"top"];if(Math.abs(n-d)<l){l=Math.abs(n-d);h=this.items[f]}}if(!h&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[m];h?this._rearrange(c,h,null,true):this._rearrange(c,null,this.containers[m].element,true);this._trigger("change",c,this._uiHash());this.containers[m]._trigger("change",c,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[m]._trigger("over",c,this._uiHash(this));this.containers[m].containerCache.over=1}}},_createHelper:function(d){var e=this.options;var c=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[d,this.currentItem])):(e.helper=="clone"?this.currentItem.clone():this.currentItem);if(!c.parents("body").length){a(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(c[0])}if(c[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(c[0].style.width==""||e.forceHelperSize){c.width(this.currentItem.width())}if(c[0].style.height==""||e.forceHelperSize){c.height(this.currentItem.height())}return c},_adjustOffsetFromHelper:function(c){if(typeof c=="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.currentItem.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;if(f.containment=="parent"){f.containment=this.helper[0].parentNode}if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(f.containment)){var d=a(f.containment)[0];var e=a(f.containment).offset();var c=(a(d).css("overflow")!="hidden");this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(g,j){if(!j){j=this.position}var e=g=="absolute"?1:-1;var f=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(c[0].tagName);return{top:(j.top+this.offset.relative.top*e+this.offset.parent.top*e-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(h?0:c.scrollTop()))*e)),left:(j.left+this.offset.relative.left*e+this.offset.parent.left*e-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:c.scrollLeft())*e))}},_generatePosition:function(f){var j=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=(/(html|body)/i).test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var e=f.pageX;var d=f.pageY;if(this.originalPosition){if(this.containment){if(f.pageX-this.offset.click.left<this.containment[0]){e=this.containment[0]+this.offset.click.left}if(f.pageY-this.offset.click.top<this.containment[1]){d=this.containment[1]+this.offset.click.top}if(f.pageX-this.offset.click.left>this.containment[2]){e=this.containment[2]+this.offset.click.left}if(f.pageY-this.offset.click.top>this.containment[3]){d=this.containment[3]+this.offset.click.top}}if(j.grid){var h=this.originalPageY+Math.round((d-this.originalPageY)/j.grid[1])*j.grid[1];d=this.containment?(!(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h:(!(h-this.offset.click.top<this.containment[1])?h-j.grid[1]:h+j.grid[1])):h;var g=this.originalPageX+Math.round((e-this.originalPageX)/j.grid[0])*j.grid[0];e=this.containment?(!(g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2])?g:(!(g-this.offset.click.left<this.containment[0])?g-j.grid[0]:g+j.grid[0])):g}}return{top:(d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(l?0:c.scrollTop())))),left:(e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:c.scrollLeft())))}},_rearrange:function(h,g,d,f){d?d[0].appendChild(this.placeholder[0]):g.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?g.item[0]:g.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var e=this,c=this.counter;window.setTimeout(function(){if(c==e.counter){e.refreshPositions(!f)}},0)},_clear:function(e,f){this.reverting=false;var g=[],c=this;if(!this._noFinalSort&&this.currentItem[0].parentNode){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var d in this._storedCSS){if(this._storedCSS[d]=="auto"||this._storedCSS[d]=="static"){this._storedCSS[d]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!f){g.push(function(h){this._trigger("receive",h,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!f){g.push(function(h){this._trigger("update",h,this._uiHash())})}if(!a.ui.contains(this.element[0],this.currentItem[0])){if(!f){g.push(function(h){this._trigger("remove",h,this._uiHash())})}for(var d=this.containers.length-1;d>=0;d--){if(a.ui.contains(this.containers[d].element[0],this.currentItem[0])&&!f){g.push((function(h){return function(j){h._trigger("receive",j,this._uiHash(this))}}).call(this,this.containers[d]));g.push((function(h){return function(j){h._trigger("update",j,this._uiHash(this))}}).call(this,this.containers[d]))}}}for(var d=this.containers.length-1;d>=0;d--){if(!f){g.push((function(h){return function(j){h._trigger("deactivate",j,this._uiHash(this))}}).call(this,this.containers[d]))}if(this.containers[d].containerCache.over){g.push((function(h){return function(j){h._trigger("out",j,this._uiHash(this))}}).call(this,this.containers[d]));this.containers[d].containerCache.over=0}}if(this._storedCursor){a("body").css("cursor",this._storedCursor)}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!f){this._trigger("beforeStop",e,this._uiHash());for(var d=0;d<g.length;d++){g[d].call(this,e)}this._trigger("stop",e,this._uiHash())}return false}if(!f){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0]){this.helper.remove()}this.helper=null;if(!f){for(var d=0;d<g.length;d++){g[d].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(a.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.ui.sortable,{version:"1.8.4"})})(jQuery);(function(f,h){f.ui=f.ui||{};var c=/left|center|right/,e="center",d=/top|center|bottom/,g="center",a=f.fn.position,b=f.fn.offset;f.fn.position=function(l){if(!l||!l.of){return a.apply(this,arguments)}l=f.extend({},l);var o=f(l.of),q=(l.collision||"flip").split(" "),p=l.offset?l.offset.split(" "):[0,0],n,j,m;if(l.of.nodeType===9){n=o.width();j=o.height();m={top:0,left:0}}else{if(l.of.scrollTo&&l.of.document){n=o.width();j=o.height();m={top:o.scrollTop(),left:o.scrollLeft()}}else{if(l.of.preventDefault){l.at="left top";n=j=0;m={top:l.of.pageY,left:l.of.pageX}}else{n=o.outerWidth();j=o.outerHeight();m=o.offset()}}}f.each(["my","at"],function(){var r=(l[this]||"").split(" ");if(r.length===1){r=c.test(r[0])?r.concat([g]):d.test(r[0])?[e].concat(r):[e,g]}r[0]=c.test(r[0])?r[0]:e;r[1]=d.test(r[1])?r[1]:g;l[this]=r});if(q.length===1){q[1]=q[0]}p[0]=parseInt(p[0],10)||0;if(p.length===1){p[1]=p[0]}p[1]=parseInt(p[1],10)||0;if(l.at[0]==="right"){m.left+=n}else{if(l.at[0]===e){m.left+=n/2}}if(l.at[1]==="bottom"){m.top+=j}else{if(l.at[1]===g){m.top+=j/2}}m.left+=p[0];m.top+=p[1];return this.each(function(){var v=f(this),u=v.outerWidth(),s=v.outerHeight(),r=f.extend({},m);if(l.my[0]==="right"){r.left-=u}else{if(l.my[0]===e){r.left-=u/2}}if(l.my[1]==="bottom"){r.top-=s}else{if(l.my[1]===g){r.top-=s/2}}r.left=parseInt(r.left);r.top=parseInt(r.top);f.each(["left","top"],function(x,w){if(f.ui.position[q[x]]){f.ui.position[q[x]][w](r,{targetWidth:n,targetHeight:j,elemWidth:u,elemHeight:s,offset:p,my:l.my,at:l.at})}});if(f.fn.bgiframe){v.bgiframe()}v.offset(f.extend(r,{using:l.using}))})};f.ui.position={fit:{left:function(j,l){var n=f(window),m=j.left+l.elemWidth-n.width()-n.scrollLeft();j.left=m>0?j.left-m:Math.max(0,j.left)},top:function(j,l){var n=f(window),m=j.top+l.elemHeight-n.height()-n.scrollTop();j.top=m>0?j.top-m:Math.max(0,j.top)}},flip:{left:function(l,m){if(m.at[0]==="center"){return}var o=f(window),n=l.left+m.elemWidth-o.width()-o.scrollLeft(),j=m.my[0]==="left"?-m.elemWidth:m.my[0]==="right"?m.elemWidth:0,p=-2*m.offset[0];l.left+=l.left<0?j+m.targetWidth+p:n>0?j-m.targetWidth+p:0},top:function(l,n){if(n.at[1]==="center"){return}var p=f(window),o=l.top+n.elemHeight-p.height()-p.scrollTop(),j=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,m=n.at[1]==="top"?n.targetHeight:-n.targetHeight,q=-2*n.offset[1];l.top+=l.top<0?j+n.targetHeight+q:o>0?j+m+q:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(o,l){if(/static/.test(f.curCSS(o,"position"))){o.style.position="relative"}var n=f(o),q=n.offset(),j=parseInt(f.curCSS(o,"top",true),10)||0,p=parseInt(f.curCSS(o,"left",true),10)||0,m={top:(l.top-q.top)+j,left:(l.left-q.left)+p};if("using" in l){l.using.call(o,m)}else{n.css(m)}};f.fn.offset=function(j){var l=this[0];if(!l||!l.ownerDocument){return null}if(j){return this.each(function(){f.offset.setOffset(this,j)})}return b.call(this)}}}(jQuery));(function(b,c){var a="ui-dialog ui-widget ui-widget-content ui-corner-all ";b.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var d=b(this).css(e).offset().top;if(d<0){b(this).css("top",e.top-d)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}var n=this,o=n.options,l=o.title||n.originalTitle||"&#160;",e=b.ui.dialog.getTitleId(n.element),m=(n.uiDialog=b("<div></div>")).appendTo(document.body).hide().addClass(a+o.dialogClass).css({zIndex:o.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(p){if(o.closeOnEscape&&p.keyCode&&p.keyCode===b.ui.keyCode.ESCAPE){n.close(p);p.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(p){n.moveToTop(false,p)}),g=n.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(m),f=(n.uiDialogTitlebar=b("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(m),j=b('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(p){n.close(p);return false}).appendTo(f),h=(n.uiDialogTitlebarCloseText=b("<span></span>")).addClass("ui-icon ui-icon-closethick").text(o.closeText).appendTo(j),d=b("<span></span>").addClass("ui-dialog-title").attr("id",e).html(l).prependTo(f);if(b.isFunction(o.beforeclose)&&!b.isFunction(o.beforeClose)){o.beforeClose=o.beforeclose}f.find("*").add(f).disableSelection();if(o.draggable&&b.fn.draggable){n._makeDraggable()}if(o.resizable&&b.fn.resizable){n._makeResizable()}n._createButtons(o.buttons);n._isOpen=false;if(b.fn.bgiframe){m.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},destroy:function(){var d=this;if(d.overlay){d.overlay.destroy()}d.uiDialog.hide();d.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");d.uiDialog.remove();if(d.originalTitle){d.element.attr("title",d.originalTitle)}return d},widget:function(){return this.uiDialog},close:function(f){var d=this,e;if(false===d._trigger("beforeClose",f)){return}if(d.overlay){d.overlay.destroy()}d.uiDialog.unbind("keypress.ui-dialog");d._isOpen=false;if(d.options.hide){d.uiDialog.hide(d.options.hide,function(){d._trigger("close",f)})}else{d.uiDialog.hide();d._trigger("close",f)}b.ui.dialog.overlay.resize();if(d.options.modal){e=0;b(".ui-dialog").each(function(){if(this!==d.uiDialog[0]){e=Math.max(e,b(this).css("z-index"))}});b.ui.dialog.maxZ=e}return d},isOpen:function(){return this._isOpen},moveToTop:function(h,g){var d=this,f=d.options,e;if((f.modal&&!h)||(!f.stack&&!f.modal)){return d._trigger("focus",g)}if(f.zIndex>b.ui.dialog.maxZ){b.ui.dialog.maxZ=f.zIndex}if(d.overlay){b.ui.dialog.maxZ+=1;d.overlay.$el.css("z-index",b.ui.dialog.overlay.maxZ=b.ui.dialog.maxZ)}e={scrollTop:d.element.attr("scrollTop"),scrollLeft:d.element.attr("scrollLeft")};b.ui.dialog.maxZ+=1;d.uiDialog.css("z-index",b.ui.dialog.maxZ);d.element.attr(e);d._trigger("focus",g);return d},open:function(){if(this._isOpen){return}var e=this,f=e.options,d=e.uiDialog;e.overlay=f.modal?new b.ui.dialog.overlay(e):null;if(d.next().length){d.appendTo("body")}e._size();e._position(f.position);d.show(f.show);e.moveToTop(true);if(f.modal){d.bind("keypress.ui-dialog",function(j){if(j.keyCode!==b.ui.keyCode.TAB){return}var h=b(":tabbable",this),l=h.filter(":first"),g=h.filter(":last");if(j.target===g[0]&&!j.shiftKey){l.focus(1);return false}else{if(j.target===l[0]&&j.shiftKey){g.focus(1);return false}}})}b(e.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus();e._trigger("open");e._isOpen=true;return e},_createButtons:function(g){var f=this,d=false,e=b("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),h=b("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);f.uiDialog.find(".ui-dialog-buttonpane").remove();if(typeof g==="object"&&g!==null){b.each(g,function(){return !(d=true)})}if(d){b.each(g,function(j,m){var l=b('<button type="button"></button>').text(j).click(function(){m.apply(f.element[0],arguments)}).appendTo(h);if(b.fn.button){l.button()}});e.appendTo(f.uiDialog)}},_makeDraggable:function(){var d=this,g=d.options,h=b(document),f;function e(j){return{position:j.position,offset:j.offset}}d.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(j,l){f=g.height==="auto"?"auto":b(this).height();b(this).height(b(this).height()).addClass("ui-dialog-dragging");d._trigger("dragStart",j,e(l))},drag:function(j,l){d._trigger("drag",j,e(l))},stop:function(j,l){g.position=[l.position.left-h.scrollLeft(),l.position.top-h.scrollTop()];b(this).removeClass("ui-dialog-dragging").height(f);d._trigger("dragStop",j,e(l));b.ui.dialog.overlay.resize()}})},_makeResizable:function(j){j=(j===c?this.options.resizable:j);var e=this,h=e.options,d=e.uiDialog.css("position"),g=(typeof j==="string"?j:"n,e,s,w,se,sw,ne,nw");function f(l){return{originalPosition:l.originalPosition,originalSize:l.originalSize,position:l.position,size:l.size}}e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:e._minHeight(),handles:g,start:function(l,m){b(this).addClass("ui-dialog-resizing");e._trigger("resizeStart",l,f(m))},resize:function(l,m){e._trigger("resize",l,f(m))},stop:function(l,m){b(this).removeClass("ui-dialog-resizing");h.height=b(this).height();h.width=b(this).width();e._trigger("resizeStop",l,f(m));b.ui.dialog.overlay.resize()}}).css("position",d).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var d=this.options;if(d.height==="auto"){return d.minHeight}else{return Math.min(d.minHeight,d.height)}},_position:function(e){var f=[],g=[0,0],d;if(e){if(typeof e==="string"||(typeof e==="object"&&"0" in e)){f=e.split?e.split(" "):[e[0],e[1]];if(f.length===1){f[1]=f[0]}b.each(["left","top"],function(j,h){if(+f[j]===f[j]){g[j]=f[j];f[j]=h}});e={my:f.join(" "),at:f.join(" "),offset:g.join(" ")}}e=b.extend({},b.ui.dialog.prototype.options.position,e)}else{e=b.ui.dialog.prototype.options.position}d=this.uiDialog.is(":visible");if(!d){this.uiDialog.show()}this.uiDialog.css({top:0,left:0}).position(e);if(!d){this.uiDialog.hide()}},_setOption:function(g,h){var e=this,d=e.uiDialog,j=d.is(":data(resizable)"),f=false;switch(g){case"beforeclose":g="beforeClose";break;case"buttons":e._createButtons(h);f=true;break;case"closeText":e.uiDialogTitlebarCloseText.text(""+h);break;case"dialogClass":d.removeClass(e.options.dialogClass).addClass(a+h);break;case"disabled":if(h){d.addClass("ui-dialog-disabled")}else{d.removeClass("ui-dialog-disabled")}break;case"draggable":if(h){e._makeDraggable()}else{d.draggable("destroy")}break;case"height":f=true;break;case"maxHeight":if(j){d.resizable("option","maxHeight",h)}f=true;break;case"maxWidth":if(j){d.resizable("option","maxWidth",h)}f=true;break;case"minHeight":if(j){d.resizable("option","minHeight",h)}f=true;break;case"minWidth":if(j){d.resizable("option","minWidth",h)}f=true;break;case"position":e._position(h);break;case"resizable":if(j&&!h){d.resizable("destroy")}if(j&&typeof h==="string"){d.resizable("option","handles",h)}if(!j&&h!==false){e._makeResizable(h)}break;case"title":b(".ui-dialog-title",e.uiDialogTitlebar).html(""+(h||"&#160;"));break;case"width":f=true;break}b.Widget.prototype._setOption.apply(e,arguments);if(f){e._size()}},_size:function(){var e=this.options,d;this.element.css({width:"auto",minHeight:0,height:0});if(e.minWidth>e.width){e.width=e.minWidth}d=this.uiDialog.css({height:"auto",width:e.width}).height();this.element.css(e.height==="auto"?{minHeight:Math.max(e.minHeight-d,0),height:"auto"}:{minHeight:0,height:Math.max(e.height-d,0)}).show();if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}}});b.extend(b.ui.dialog,{version:"1.8.4",uuid:0,maxZ:0,getTitleId:function(d){var e=d.attr("id");if(!e){this.uuid+=1;e=this.uuid}return"ui-dialog-title-"+e},overlay:function(d){this.$el=b.ui.dialog.overlay.create(d)}});b.extend(b.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:b.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(d){return d+".dialog-overlay"}).join(" "),create:function(e){if(this.instances.length===0){setTimeout(function(){if(b.ui.dialog.overlay.instances.length){b(document).bind(b.ui.dialog.overlay.events,function(f){return(b(f.target).zIndex()>=b.ui.dialog.overlay.maxZ)})}},1);b(document).bind("keydown.dialog-overlay",function(f){if(e.options.closeOnEscape&&f.keyCode&&f.keyCode===b.ui.keyCode.ESCAPE){e.close(f);f.preventDefault()}});b(window).bind("resize.dialog-overlay",b.ui.dialog.overlay.resize)}var d=(this.oldInstances.pop()||b("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});if(b.fn.bgiframe){d.bgiframe()}this.instances.push(d);return d},destroy:function(d){this.oldInstances.push(this.instances.splice(b.inArray(d,this.instances),1)[0]);if(this.instances.length===0){b([document,window]).unbind(".dialog-overlay")}d.remove();var e=0;b.each(this.instances,function(){e=Math.max(e,this.css("z-index"))});this.maxZ=e},height:function(){var e,d;if(b.browser.msie&&b.browser.version<7){e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(e<d){return b(window).height()+"px"}else{return e+"px"}}else{return b(document).height()+"px"}},width:function(){var d,e;if(b.browser.msie&&b.browser.version<7){d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(d<e){return b(window).width()+"px"}else{return d+"px"}}else{return b(document).width()+"px"}},resize:function(){var d=b([]);b.each(b.ui.dialog.overlay.instances,function(){d=d.add(this)});d.css({width:0,height:0}).css({width:b.ui.dialog.overlay.width(),height:b.ui.dialog.overlay.height()})}});b.extend(b.ui.dialog.overlay.prototype,{destroy:function(){b.ui.dialog.overlay.destroy(this.$el)}})}(jQuery));jQuery.effects||(function(h,e){h.effects={};h.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(o,n){h.fx.step[n]=function(p){if(!p.colorInit){p.start=m(p.elem,n);p.end=l(p.end);p.colorInit=true}p.elem.style[n]="rgb("+Math.max(Math.min(parseInt((p.pos*(p.end[0]-p.start[0]))+p.start[0],10),255),0)+","+Math.max(Math.min(parseInt((p.pos*(p.end[1]-p.start[1]))+p.start[1],10),255),0)+","+Math.max(Math.min(parseInt((p.pos*(p.end[2]-p.start[2]))+p.start[2],10),255),0)+")"}});function l(o){var n;if(o&&o.constructor==Array&&o.length==3){return o}if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(o)){return[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]}if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(o)){return[parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55]}if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(o)){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(o)){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}if(n=/rgba\(0, 0, 0, 0\)/.exec(o)){return a.transparent}return a[h.trim(o).toLowerCase()]}function m(p,n){var o;do{o=h.curCSS(p,n);if(o!=""&&o!="transparent"||h.nodeName(p,"body")){break}n="backgroundColor"}while(p=p.parentNode);return l(o)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var f=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function g(){var q=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,r={},o,p;if(q&&q.length&&q[0]&&q[q[0]]){var n=q.length;while(n--){o=q[n];if(typeof q[o]=="string"){p=o.replace(/\-(\w)/g,function(s,u){return u.toUpperCase()});r[p]=q[o]}}}else{for(o in q){if(typeof q[o]==="string"){r[o]=q[o]}}}return r}function b(o){var n,p;for(n in o){p=o[n];if(p==null||h.isFunction(p)||n in c||(/scrollbar/).test(n)||(!(/color/i).test(n)&&isNaN(parseFloat(p)))){delete o[n]}}return o}function j(n,p){var q={_:0},o;for(o in p){if(n[o]!=p[o]){q[o]=p[o]}}return q}h.effects.animateClass=function(n,o,q,p){if(h.isFunction(q)){p=q;q=null}return this.each(function(){var v=h(this),r=v.attr("style")||" ",w=b(g.call(this)),u,s=v.attr("className");h.each(f,function(x,y){if(n[y]){v[y+"Class"](n[y])}});u=b(g.call(this));v.attr("className",s);v.animate(j(w,u),o,q,function(){h.each(f,function(x,y){if(n[y]){v[y+"Class"](n[y])}});if(typeof v.attr("style")=="object"){v.attr("style").cssText="";v.attr("style").cssText=r}else{v.attr("style",r)}if(p){p.apply(this,arguments)}})})};h.fn.extend({_addClass:h.fn.addClass,addClass:function(o,n,q,p){return n?h.effects.animateClass.apply(this,[{add:o},n,q,p]):this._addClass(o)},_removeClass:h.fn.removeClass,removeClass:function(o,n,q,p){return n?h.effects.animateClass.apply(this,[{remove:o},n,q,p]):this._removeClass(o)},_toggleClass:h.fn.toggleClass,toggleClass:function(p,o,n,r,q){if(typeof o=="boolean"||o===e){if(!n){return this._toggleClass(p,o)}else{return h.effects.animateClass.apply(this,[(o?{add:p}:{remove:p}),n,r,q])}}else{return h.effects.animateClass.apply(this,[{toggle:p},o,n,r])}},switchClass:function(n,p,o,r,q){return h.effects.animateClass.apply(this,[{add:p,remove:n},o,r,q])}});h.extend(h.effects,{version:"1.8.4",save:function(o,p){for(var n=0;n<p.length;n++){if(p[n]!==null){o.data("ec.storage."+p[n],o[0].style[p[n]])}}},restore:function(o,p){for(var n=0;n<p.length;n++){if(p[n]!==null){o.css(p[n],o.data("ec.storage."+p[n]))}}},setMode:function(n,o){if(o=="toggle"){o=n.is(":hidden")?"show":"hide"}return o},getBaseline:function(o,p){var q,n;switch(o[0]){case"top":q=0;break;case"middle":q=0.5;break;case"bottom":q=1;break;default:q=o[0]/p.height}switch(o[1]){case"left":n=0;break;case"center":n=0.5;break;case"right":n=1;break;default:n=o[1]/p.width}return{x:n,y:q}},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper")){return n.parent()}var o={width:n.outerWidth(true),height:n.outerHeight(true),"float":n.css("float")},p=h("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});n.wrap(p);p=n.parent();if(n.css("position")=="static"){p.css({position:"relative"});n.css({position:"relative"})}else{h.extend(o,{position:n.css("position"),zIndex:n.css("z-index")});h.each(["top","left","bottom","right"],function(q,r){o[r]=n.css(r);if(isNaN(parseInt(o[r],10))){o[r]="auto"}});n.css({position:"relative",top:0,left:0})}return p.css(o).show()},removeWrapper:function(n){if(n.parent().is(".ui-effects-wrapper")){return n.parent().replaceWith(n)}return n},setTransition:function(o,q,n,p){p=p||{};h.each(q,function(s,r){unit=o.cssUnit(r);if(unit[0]>0){p[r]=unit[0]*n+unit[1]}});return p}});function d(o,n,p,q){if(typeof o=="object"){q=n;p=null;n=o;o=n.effect}if(h.isFunction(n)){q=n;p=null;n={}}if(typeof n=="number"||h.fx.speeds[n]){q=p;p=n;n={}}if(h.isFunction(p)){q=p;p=null}n=n||{};p=p||n.duration;p=h.fx.off?0:typeof p=="number"?p:h.fx.speeds[p]||h.fx.speeds._default;q=q||n.complete;return[o,n,p,q]}h.fn.extend({effect:function(q,p,s,u){var o=d.apply(this,arguments),r={options:o[1],duration:o[2],callback:o[3]},n=h.effects[q];return n&&!h.fx.off?n.call(this,r):this},_show:h.fn.show,show:function(o){if(!o||typeof o=="number"||h.fx.speeds[o]){return this._show.apply(this,arguments)}else{var n=d.apply(this,arguments);n[1].mode="show";return this.effect.apply(this,n)}},_hide:h.fn.hide,hide:function(o){if(!o||typeof o=="number"||h.fx.speeds[o]){return this._hide.apply(this,arguments)}else{var n=d.apply(this,arguments);n[1].mode="hide";return this.effect.apply(this,n)}},__toggle:h.fn.toggle,toggle:function(o){if(!o||typeof o=="number"||h.fx.speeds[o]||typeof o=="boolean"||h.isFunction(o)){return this.__toggle.apply(this,arguments)}else{var n=d.apply(this,arguments);n[1].mode="toggle";return this.effect.apply(this,n)}},cssUnit:function(n){var o=this.css(n),p=[];h.each(["em","px","%","pt"],function(q,r){if(o.indexOf(r)>0){p=[parseFloat(o),r]}});return p}});h.easing.jswing=h.easing.swing;h.extend(h.easing,{def:"easeOutQuad",swing:function(o,p,n,r,q){return h.easing[h.easing.def](o,p,n,r,q)},easeInQuad:function(o,p,n,r,q){return r*(p/=q)*p+n},easeOutQuad:function(o,p,n,r,q){return -r*(p/=q)*(p-2)+n},easeInOutQuad:function(o,p,n,r,q){if((p/=q/2)<1){return r/2*p*p+n}return -r/2*((--p)*(p-2)-1)+n},easeInCubic:function(o,p,n,r,q){return r*(p/=q)*p*p+n},easeOutCubic:function(o,p,n,r,q){return r*((p=p/q-1)*p*p+1)+n},easeInOutCubic:function(o,p,n,r,q){if((p/=q/2)<1){return r/2*p*p*p+n}return r/2*((p-=2)*p*p+2)+n},easeInQuart:function(o,p,n,r,q){return r*(p/=q)*p*p*p+n},easeOutQuart:function(o,p,n,r,q){return -r*((p=p/q-1)*p*p*p-1)+n},easeInOutQuart:function(o,p,n,r,q){if((p/=q/2)<1){return r/2*p*p*p*p+n}return -r/2*((p-=2)*p*p*p-2)+n},easeInQuint:function(o,p,n,r,q){return r*(p/=q)*p*p*p*p+n},easeOutQuint:function(o,p,n,r,q){return r*((p=p/q-1)*p*p*p*p+1)+n},easeInOutQuint:function(o,p,n,r,q){if((p/=q/2)<1){return r/2*p*p*p*p*p+n}return r/2*((p-=2)*p*p*p*p+2)+n},easeInSine:function(o,p,n,r,q){return -r*Math.cos(p/q*(Math.PI/2))+r+n},easeOutSine:function(o,p,n,r,q){return r*Math.sin(p/q*(Math.PI/2))+n},easeInOutSine:function(o,p,n,r,q){return -r/2*(Math.cos(Math.PI*p/q)-1)+n},easeInExpo:function(o,p,n,r,q){return(p==0)?n:r*Math.pow(2,10*(p/q-1))+n},easeOutExpo:function(o,p,n,r,q){return(p==q)?n+r:r*(-Math.pow(2,-10*p/q)+1)+n},easeInOutExpo:function(o,p,n,r,q){if(p==0){return n}if(p==q){return n+r}if((p/=q/2)<1){return r/2*Math.pow(2,10*(p-1))+n}return r/2*(-Math.pow(2,-10*--p)+2)+n},easeInCirc:function(o,p,n,r,q){return -r*(Math.sqrt(1-(p/=q)*p)-1)+n},easeOutCirc:function(o,p,n,r,q){return r*Math.sqrt(1-(p=p/q-1)*p)+n},easeInOutCirc:function(o,p,n,r,q){if((p/=q/2)<1){return -r/2*(Math.sqrt(1-p*p)-1)+n}return r/2*(Math.sqrt(1-(p-=2)*p)+1)+n},easeInElastic:function(o,r,n,y,w){var u=1.70158;var v=0;var q=y;if(r==0){return n}if((r/=w)==1){return n+y}if(!v){v=w*0.3}if(q<Math.abs(y)){q=y;var u=v/4}else{var u=v/(2*Math.PI)*Math.asin(y/q)}return -(q*Math.pow(2,10*(r-=1))*Math.sin((r*w-u)*(2*Math.PI)/v))+n},easeOutElastic:function(o,r,n,y,w){var u=1.70158;var v=0;var q=y;if(r==0){return n}if((r/=w)==1){return n+y}if(!v){v=w*0.3}if(q<Math.abs(y)){q=y;var u=v/4}else{var u=v/(2*Math.PI)*Math.asin(y/q)}return q*Math.pow(2,-10*r)*Math.sin((r*w-u)*(2*Math.PI)/v)+y+n},easeInOutElastic:function(o,r,n,y,w){var u=1.70158;var v=0;var q=y;if(r==0){return n}if((r/=w/2)==2){return n+y}if(!v){v=w*(0.3*1.5)}if(q<Math.abs(y)){q=y;var u=v/4}else{var u=v/(2*Math.PI)*Math.asin(y/q)}if(r<1){return -0.5*(q*Math.pow(2,10*(r-=1))*Math.sin((r*w-u)*(2*Math.PI)/v))+n}return q*Math.pow(2,-10*(r-=1))*Math.sin((r*w-u)*(2*Math.PI)/v)*0.5+y+n},easeInBack:function(o,p,n,u,r,q){if(q==e){q=1.70158}return u*(p/=r)*p*((q+1)*p-q)+n},easeOutBack:function(o,p,n,u,r,q){if(q==e){q=1.70158}return u*((p=p/r-1)*p*((q+1)*p+q)+1)+n},easeInOutBack:function(o,p,n,u,r,q){if(q==e){q=1.70158}if((p/=r/2)<1){return u/2*(p*p*(((q*=(1.525))+1)*p-q))+n}return u/2*((p-=2)*p*(((q*=(1.525))+1)*p+q)+2)+n},easeInBounce:function(o,p,n,r,q){return r-h.easing.easeOutBounce(o,q-p,0,r,q)+n},easeOutBounce:function(o,p,n,r,q){if((p/=q)<(1/2.75)){return r*(7.5625*p*p)+n}else{if(p<(2/2.75)){return r*(7.5625*(p-=(1.5/2.75))*p+0.75)+n}else{if(p<(2.5/2.75)){return r*(7.5625*(p-=(2.25/2.75))*p+0.9375)+n}else{return r*(7.5625*(p-=(2.625/2.75))*p+0.984375)+n}}}},easeInOutBounce:function(o,p,n,r,q){if(p<q/2){return h.easing.easeInBounce(o,p*2,0,r,q)*0.5+n}return h.easing.easeOutBounce(o,p*2-q,0,r,q)*0.5+r*0.5+n}})})(jQuery);(function(a,b){a.effects.slide=function(c){return this.queue(function(){var f=a(this),e=["position","top","left"];var l=a.effects.setMode(f,c.options.mode||"show");var j=c.options.direction||"left";a.effects.save(f,e);f.show();a.effects.createWrapper(f).css({overflow:"hidden"});var g=(j=="up"||j=="down")?"top":"left";var d=(j=="up"||j=="left")?"pos":"neg";var m=c.options.distance||(g=="top"?f.outerHeight({margin:true}):f.outerWidth({margin:true}));if(l=="show"){f.css(g,d=="pos"?-m:m)}var h={};h[g]=(l=="show"?(d=="pos"?"+=":"-="):(d=="pos"?"-=":"+="))+m;f.animate(h,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){if(l=="hide"){f.hide()}a.effects.restore(f,e);a.effects.removeWrapper(f);if(c.callback){c.callback.apply(this,arguments)}f.dequeue()}})})}})(jQuery);var R={resizedImage:function(f,a,c,d,b){var e=server_info.is_address+"?m="+encodeURIComponent(f);if(a){e+="&w="+a}if(c){e+="&h="+c}if(d){e+="&rc="+d}if(b){e+="&ov="+b}return e},truncate:function(b,a){if(!b){return""}if(b.length<=a){return b}return b.substring(0,a)+"..."}};(function(a){a.fx.speeds._default=(a.browser.msie&&a.browser.version<8?0:200)})(jQuery);(function(a){a.extend(a.ui.dialog.prototype.options,{draggable:false,modal:true,resizable:false,width:320,simple:false,darkOverlay:false,allowOverflow:false});var b={open:a.ui.dialog.prototype.open,close:a.ui.dialog.prototype.close,_create:a.ui.dialog.prototype._create,_createButtons:a.ui.dialog.prototype._createButtons};a.extend(a.ui.dialog.prototype,{_create:function(){b._create.apply(this,arguments);var c=this.uiDialog.find(".ui-dialog-content"),f=this.uiDialog.find(".ui-dialog-buttonpane"),e=this.uiDialog.find(".sub-content");c.removeClass("ui-corner-all");c.add(e);if(this.options.simple){this.uiDialogTitlebar.hide();var d=this.uiDialog.find(".ui-dialog-content").first().removeClass("ui-corner-br").removeClass("ui-corner-bl");if(f.length==0){d.addClass("ui-corner-all")}else{d.addClass("ui-corner-tr").addClass("ui-corner-tl")}}if(this.options.allowOverflow){c.css("overflow","auto")}},_createButtons:function(){b._createButtons.apply(this,arguments);var e=this.uiDialog.find(".ui-dialog-buttonpane"),d=this.uiDialog.find(".ui-dialog-content");var c=this.uiDialog.find(".ui-dialog-content .sub-content").detach().insertAfter(d).addClass("ui-dialog-content");e.find("button").attr("class","button").wrapInner("<span />").unbind("mouseenter mouseleave focus blur").first().addClass("default_button");d=this.uiDialog.find(".ui-dialog-content");if(e.length==0){d.removeClass("ui-corner-bottom").last().addClass("ui-corner-bottom")}else{d.removeClass("ui-corner-bottom")}},open:function(){b.open.apply(this,arguments);var c=this;if(this.options.keepInCenter){a.ui.dialog.prototype.centerDialog=function(){a.ui.dialog.prototype._position.apply(c,["center","center"])};a(window).bind("scroll resize",a.ui.dialog.prototype.centerDialog)}if(this.options.darkOverlay&&this.overlay){this.overlay.$el.addClass("ui-widget-overlay-dark")}if(typeof this.options.onOpen=="function"){this.options.onOpen.apply(this,arguments)}},close:function(){b.close.apply(this,arguments);if(this.options.keepInCenter){a(window).unbind("scroll resize",a.ui.dialog.prototype.centerDialog)}if(this.options.darkOverlay&&this.overlay){this.overlay.$el.removeClass("ui-widget-overlay-dark")}}})})(jQuery);(function(a){a.jGrowl=function(b,c){if(a("#jGrowl").size()==0){a('<div id="jGrowl"></div>').addClass(a.jGrowl.defaults.position).appendTo("body")}a("#jGrowl").jGrowl(b,c)};a.fn.jGrowl=function(b,d){if(a.isFunction(this.each)){var c=arguments;return this.each(function(){var e=this;if(a(this).data("jGrowl.instance")==undefined){a(this).data("jGrowl.instance",new a.fn.jGrowl());a(this).data("jGrowl.instance").startup(this)}if(a.isFunction(a(this).data("jGrowl.instance")[b])){a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"),a.makeArray(c).slice(1))}else{a(this).data("jGrowl.instance").notification(b,d)}})}};a.extend(a.fn.jGrowl.prototype,{defaults:{header:"",sticky:false,position:"bottom-left",glue:"after",theme:"default",corners:"10px",check:500,life:3000,speed:"normal",easing:"swing",closer:false,closeTemplate:"",closerTemplate:"<div>[ close all ]</div>",log:function(c,b,d){},beforeOpen:function(c,b,d){},open:function(c,b,d){},beforeClose:function(c,b,d){},close:function(c,b,d){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},element:null,interval:null,notification:function(c,e){var b=this;var e=a.extend({},this.defaults,e);e.log.apply(this.element,[this.element,c,e]);var d=a('<div class="jGrowl-notification"><div class="close">'+e.closeTemplate+'</div><div class="header">'+e.header+'</div><div class="message">'+c+"</div></div>").data("jGrowl",e).addClass(e.theme).children("div.close").bind("click.jGrowl",function(){a(this).unbind("click.jGrowl").parent().trigger("jGrowl.beforeClose").animate(e.animateClose,e.speed,e.easing,function(){a(this).trigger("jGrowl.close").remove()})}).parent();(e.glue=="after")?a("div.jGrowl-notification:last",this.element).after(d):a("div.jGrowl-notification:first",this.element).before(d);a(d).bind("mouseover.jGrowl",function(){a(this).data("jGrowl").pause=true}).bind("mouseout.jGrowl",function(){a(this).data("jGrowl").pause=false}).bind("jGrowl.beforeOpen",function(){e.beforeOpen.apply(b.element,[b.element,c,e])}).bind("jGrowl.open",function(){e.open.apply(b.element,[b.element,c,e])}).bind("jGrowl.beforeClose",function(){e.beforeClose.apply(b.element,[b.element,c,e])}).bind("jGrowl.close",function(){e.close.apply(b.element,[b.element,c,e])}).trigger("jGrowl.beforeOpen").animate(e.animateOpen,e.speed,e.easing,function(){a(this).data("jGrowl").created=new Date()}).trigger("jGrowl.open");if(a.fn.corner!=undefined){a(d).corner(e.corners)}if(a("div.jGrowl-notification:parent",this.element).size()>1&&a("div.jGrowl-closer",this.element).size()==0&&this.defaults.closer!=false){a(this.defaults.closerTemplate).addClass("jGrowl-closer").addClass(this.defaults.theme).appendTo(this.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().children("div.close").trigger("click.jGrowl");if(a.isFunction(b.defaults.closer)){b.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])}})}},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){if(a(this).data("jGrowl")!=undefined&&a(this).data("jGrowl").created!=undefined&&(a(this).data("jGrowl").created.getTime()+a(this).data("jGrowl").life)<(new Date()).getTime()&&a(this).data("jGrowl").sticky!=true&&(a(this).data("jGrowl").pause==undefined||a(this).data("jGrowl").pause!=true)){a(this).children("div.close").trigger("click.jGrowl")}});if(a(this.element).find("div.jGrowl-notification:parent").size()<2){a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})}},startup:function(b){this.element=a(b).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){jQuery(b).data("jGrowl.instance").update()},this.defaults.check);if(a.browser.msie&&parseInt(a.browser.version)<7&&!window.XMLHttpRequest){a(this.element).addClass("ie6")}},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)}});a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults})(jQuery);(function($){$.fn.editable=function(target,options){if("disable"==target){$(this).data("disabled.editable",true);return}if("enable"==target){$(this).data("disabled.editable",false);return}if("destroy"==target){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var settings={target:target,name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{},defaultPlugin:function(){}};if(options){$.extend(settings,options)}var plugin=$.editable.types[settings.type].plugin||settings.defaultPlugin;var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types.defaults.buttons;var content=$.editable.types[settings.type].content||$.editable.types.defaults.content;var element=$.editable.types[settings.type].element||$.editable.types.defaults.element;var reset=$.editable.types[settings.type].reset||$.editable.types.defaults.reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip){$(this).attr("title",settings.tooltip)}settings.autowidth="auto"==settings.width;settings.autoheight="auto"==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data("event.editable",settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder)}$(this).bind(settings.event,function(e){if(true===$(this).data("disabled.editable")){return}if(self.editing){return}if(false===onedit.apply(this,[settings,self])){return}if(settings.tooltip){$(self).removeAttr("title")}if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight}else{if(settings.width!="none"){settings.width=settings.autowidth?$(self).width():settings.width}if(settings.height!="none"){settings.height=settings.autoheight?$(self).height():settings.height}}if($(this).html().toLowerCase().replace(/(;|")/g,"")==settings.placeholder.toLowerCase().replace(/(;|")/g,"")){$(this).html("")}self.editing=true;self.revert=$(self).html();$(self).html("");var form=$("<form />");if(settings.cssclass){if("inherit"==settings.cssclass){form.attr("class",$(self).attr("class"))}else{form.attr("class",settings.cssclass)}}if(settings.style){if("inherit"==settings.style){form.attr("style",$(self).attr("style"));form.css("display",$(self).css("display"))}else{form.attr("style",settings.style)}}var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self])},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]))}else{$.extend(loaddata,settings.loaddata)}$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false}})}else{if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings])}}else{input_content=self.revert}}content.apply(form,[input_content,settings,self]);input.attr("name",settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(":input:visible:enabled:first",form).focus();if(settings.select){input.select()}input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self])}});var t;if("cancel"==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self])},500)})}else{if("submit"==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit()},200)})}else{if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings])})}else{input.blur(function(e){})}}}form.submit(function(e){if(t){clearTimeout(t)}e.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]))}else{$.extend(submitdata,settings.submitdata)}if("PUT"==settings.method){submitdata._method="put"}$(self).html(settings.indicator);var ajaxoptions={type:"POST",data:submitdata,url:settings.target,success:function(result,status){$(self).html(result);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr])}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions)}}}$(self).attr("title",settings.tooltip);return false})});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder)}if(settings.tooltip){$(self).attr("title",settings.tooltip)}}}}})};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return(input)},content:function(string,settings,original){$(":input:first",this).val(string)},reset:function(settings,original){original.reset(this)},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit"){form.submit()}})}else{var submit=$('<button type="submit" />');submit.html(settings.submit)}$(this).append(submit)}if(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel)}else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel)}$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset}else{var reset=$.editable.types.defaults.reset}reset.apply(form,[settings,original]);return false})}}},text:{element:function(settings,original){var input=$("<input />");if(settings.width!="none"){input.width(settings.width)}if(settings.height!="none"){input.height(settings.height)}input.attr("autocomplete","off");$(this).append(input);return(input)}},textarea:{element:function(settings,original){var textarea=$("<textarea />");if(settings.rows){textarea.attr("rows",settings.rows)}else{if(settings.height!="none"){textarea.height(settings.height)}}if(settings.cols){textarea.attr("cols",settings.cols)}else{if(settings.width!="none"){textarea.width(settings.width)}}$(this).append(textarea);return(textarea)}},select:{element:function(settings,original){var select=$("<select />");$(this).append(select);return(select)},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json.selected||$(this).text()==original.revert){$(this).attr("selected","selected")}})}}},addInputType:function(name,input){$.editable.types[name]=input}}})(jQuery);(function(f){f.fn.simpledraw=function(j,h,l){if(l&&this[0].vcanvas){return this[0].vcanvas}if(j==undefined){j=f(this).innerWidth()}if(h==undefined){h=f(this).innerHeight()}if(f.browser.hasCanvas){return new c(j,h,this)}else{if(f.browser.msie){return new d(j,h,this)}else{return false}}};var g=[];f.fn.sparkline=function(j,h){var h=f.extend({type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:false},h?h:{});return this.each(function(){var l=function(){var m=(j=="html"||j==undefined)?f(this).text().split(","):j;var o=h.width=="auto"?m.length*h.defaultPixelsPerValue:h.width;if(h.height=="auto"){if(!h.composite||!this.vcanvas){var n=document.createElement("span");n.innerHTML="a";f(this).html(n);height=f(n).innerHeight();f(n).remove()}}else{height=h.height}f.fn.sparkline[h.type].call(this,m,h,o,height)};if((f(this).html()&&f(this).is(":hidden"))||(f.fn.jquery<"1.3.0"&&f(this).parents().is(":hidden"))){g.push([this,l])}else{l.call(this)}})};f.sparkline_display_visible=function(){for(var h=g.length-1;h>=0;h--){var j=g[h][0];if(f(j).is(":visible")&&!f(j).parents().is(":hidden")){g[h][1].call(j);g.splice(h,1)}}};f.fn.sparkline.line=function(m,o,H,E){var o=f.extend({spotColor:"#f80",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",normalRangeMin:undefined,normalRangeMax:undefined,normalRangeColor:"#ccc",chartRangeMin:undefined,chartRangeMax:undefined},o?o:{});var z=[],w=[];for(J=0;J<m.length;J++){var F=typeof(m[J])=="string";var s=typeof(m[J])=="object"&&m[J] instanceof Array;var K=F&&m[J].split(":");if(F&&K.length==2){z.push(Number(K[0]));w.push(Number(K[1]))}else{if(s){z.push(m[J][0]);w.push(m[J][1])}else{z.push(J);w.push(Number(m[J]))}}}if(o.xvalues){z=o.xvalues}var n=Math.max.apply(Math,w);var A=n;var p=Math.min.apply(Math,w);var u=p;var q=Math.max.apply(Math,z);var v=q;var r=Math.min.apply(Math,z);var l=r;if(o.normalRangeMin!=undefined){if(o.normalRangeMin<p){p=o.normalRangeMin}if(o.normalRangeMax>n){n=o.normalRangeMax}}if(o.chartRangeMin!=undefined&&o.chartRangeMin<p){p=o.chartRangeMin}if(o.chartRangeMax!=undefined&&o.chartRangeMax>n){n=o.chartRangeMax}var j=q-r==0?1:q-r;var h=n-p==0?1:n-p;var N=w.length-1;if(N<1){this.innerHTML="";return}var O=f(this).simpledraw(H,E,o.composite);if(O){var M=O.pixel_width;var I=O.pixel_height;var P=0;var L=0;if(o.spotRadius&&(M<(o.spotRadius*4)||I<(o.spotRadius*4))){o.spotRadius=0}if(o.spotRadius){if(o.minSpotColor||(o.spotColor&&w[N]==p)){I-=Math.ceil(o.spotRadius)}if(o.maxSpotColor||(o.spotColor&&w[N]==n)){I-=Math.ceil(o.spotRadius);P+=Math.ceil(o.spotRadius)}if(o.minSpotColor||o.maxSpotColor&&(w[0]==p||w[0]==n)){L+=Math.ceil(o.spotRadius);M-=Math.ceil(o.spotRadius)}if(o.spotColor||(o.minSpotColor||o.maxSpotColor&&(w[N]==p||w[N]==n))){M-=Math.ceil(o.spotRadius)}}I--;if(o.normalRangeMin!=undefined){var D=P+Math.round(I-(I*((o.normalRangeMax-p)/h)));var E=Math.round((I*(o.normalRangeMax-o.normalRangeMin))/h);O.drawRect(L,D,M,E,undefined,o.normalRangeColor)}var G=[[L,P+I]];for(var J=0;J<w.length;J++){var C=z[J],B=w[J];G.push([L+Math.round((C-r)*(M/j)),P+Math.round(I-(I*((B-p)/h)))])}if(o.fillColor){G.push([L+M,P+I-1]);O.drawShape(G,undefined,o.fillColor);G.pop()}G[0]=[L,P+Math.round(I-(I*((w[0]-p)/h)))];O.drawShape(G,o.lineColor);if(o.spotRadius&&o.spotColor){O.drawCircle(L+M,P+Math.round(I-(I*((w[N]-p)/h))),o.spotRadius,undefined,o.spotColor)}if(n!=u){if(o.spotRadius&&o.minSpotColor){var C=z[w.indexOf(u)];O.drawCircle(L+Math.round((C-r)*(M/j)),P+Math.round(I-(I*((u-p)/h))),o.spotRadius,undefined,o.minSpotColor)}if(o.spotRadius&&o.maxSpotColor){var C=z[w.indexOf(A)];O.drawCircle(L+Math.round((C-r)*(M/j)),P+Math.round(I-(I*((A-p)/h))),o.spotRadius,undefined,o.maxSpotColor)}}}else{this.innerHTML=""}};f.fn.sparkline.bar=function(z,B,l,A){z=f.map(z,Number);var B=f.extend({type:"bar",barColor:"#00f",negBarColor:"#f44",zeroColor:undefined,zeroAxis:undefined,barWidth:4,barSpacing:1,chartRangeMax:undefined,chartRangeMin:undefined},B?B:{});var l=(z.length*B.barWidth)+((z.length-1)*B.barSpacing);var v=Math.max.apply(Math,z);var o=Math.min.apply(Math,z);if(B.chartRangeMin!=undefined&&B.chartRangeMin<o){o=B.chartRangeMin}if(B.chartRangeMax!=undefined&&B.chartRangeMax>v){v=B.chartRangeMax}if(B.zeroAxis==undefined){B.zeroAxis=o<0}var q=v-o==0?1:v-o;var s=f(this).simpledraw(l,A);if(s){var r=s.pixel_width;var h=s.pixel_height;var j=o<0&&B.zeroAxis?h-Math.round(h*(Math.abs(o)/q))-1:h-1;for(var p=0;p<z.length;p++){var w=p*(B.barWidth+B.barSpacing);var m=z[p];var n=(m<0)?B.negBarColor:B.barColor;if(B.zeroAxis&&o<0){var A=Math.round(h*((Math.abs(m)/q)))+1;var u=(m<0)?j:j-A}else{var A=Math.round(h*((m-o)/q))+1;var u=h-A}if(m==0&&B.zeroColor!=undefined){n=B.zeroColor}s.drawRect(w,u,B.barWidth-1,A-1,n,n)}}else{this.innerHTML=""}};f.fn.sparkline.tristate=function(s,v,j,u){s=f.map(s,Number);var v=f.extend({barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{}},v);var j=(s.length*v.barWidth)+((s.length-1)*v.barSpacing);var o=f(this).simpledraw(j,u);if(o){var p=o.pixel_width;var h=o.pixel_height;var n=Math.round(h/2);for(var m=0;m<s.length;m++){var r=m*(v.barWidth+v.barSpacing);if(s[m]<0){var q=n;var u=n-1;var l=v.negBarColor}else{if(s[m]>0){var q=0;var u=n-1;var l=v.posBarColor}else{var q=n-1;var u=2;var l=v.zeroBarColor}}if(v.colorMap[s[m]]){l=v.colorMap[s[m]]}o.drawRect(r,q,v.barWidth-1,u-1,l,l)}}else{this.innerHTML=""}};f.fn.sparkline.discrete=function(z,B,j,A){z=f.map(z,Number);var B=f.extend({lineHeight:"auto",thresholdColor:undefined,thresholdValue:0,chartRangeMax:undefined,chartRangeMin:undefined},B);j=B.width=="auto"?z.length*2:j;var m=Math.floor(j/z.length);var s=f(this).simpledraw(j,A);if(s){var u=s.pixel_width;var h=s.pixel_height;var y=B.lineHeight=="auto"?Math.round(h*0.3):B.lineHeight;var r=h-y;var o=Math.min.apply(Math,z);var v=Math.max.apply(Math,z);if(B.chartRangeMin!=undefined&&B.chartRangeMin<o){o=B.chartRangeMin}if(B.chartRangeMax!=undefined&&B.chartRangeMax>v){v=B.chartRangeMax}var q=v-o;for(var p=0;p<z.length;p++){var n=z[p];var w=(p*m);var l=Math.round(r-r*((n-o)/q));s.drawLine(w,l,w,l+y,(B.thresholdColor&&n<B.thresholdValue)?B.thresholdColor:B.lineColor)}}else{this.innerHTML=""}};f.fn.sparkline.bullet=function(l,n,v,s){l=f.map(l,Number);var n=f.extend({targetColor:"red",targetWidth:3,performanceColor:"blue",rangeColors:["#D3DAFE","#A8B6FF","#7F94FF"],base:undefined},n);v=n.width=="auto"?"4.0em":v;var C=f(this).simpledraw(v,s);if(C&&l.length>1){var B=C.pixel_width-Math.ceil(n.targetWidth/2);var y=C.pixel_height;var w=Math.min.apply(Math,l);var z=Math.max.apply(Math,l);if(n.base==undefined){var w=w<0?w:0}else{w=n.base}var q=z-w;for(i=2;i<l.length;i++){var o=parseInt(l[i]);var j=Math.round(B*((o-w)/q));C.drawRect(0,0,j-1,y-1,n.rangeColors[i-2],n.rangeColors[i-2])}var u=parseInt(l[1]);var h=Math.round(B*((u-w)/q));C.drawRect(0,Math.round(y*0.3),h-1,Math.round(y*0.4)-1,n.performanceColor,n.performanceColor);var r=parseInt(l[0]);var p=Math.round(B*((r-w)/q)-(n.targetWidth/2));var m=Math.round(y*0.1);var A=y-(m*2);C.drawRect(p,m,n.targetWidth-1,A-1,n.targetColor,n.targetColor)}else{this.innerHTML=""}};f.fn.sparkline.pie=function(v,x,m,w){v=f.map(v,Number);var x=f.extend({sliceColors:["#f00","#0f0","#00f"]},x);m=x.width=="auto"?w:m;var r=f(this).simpledraw(m,w);if(r&&v.length>1){var s=r.pixel_width;var h=r.pixel_height;var q=Math.floor(Math.min(s,h)/2);var u=0;for(var o=0;o<v.length;o++){u+=v[o]}var p=0;if(x.offset){p+=(2*Math.PI)*(x.offset/360)}var j=2*Math.PI;for(var o=0;o<v.length;o++){var l=p;var n=p;if(u>0){n=p+(j*(v[o]/u))}r.drawPieSlice(q,q,q,l,n,undefined,x.sliceColors[o%x.sliceColors.length]);p=n}}};function a(j,l){if(l==2){var h=Math.floor(j.length/2);return j.length%2?j[h]:(j[h]+j[h+1])/2}else{var m=Math.floor(j.length/4);return j.length%2?(j[m*l]+j[m*l+1])/2:j[m*l]}}f.fn.sparkline.box=function(j,m,v,u){j=f.map(j,Number);var m=f.extend({raw:false,boxLineColor:"black",boxFillColor:"#cdf",whiskerColor:"black",outlierLineColor:"#333",outlierFillColor:"white",medianColor:"red",showOutliers:true,outlierIQR:1.5,spotRadius:1.5,target:undefined,targetColor:"#4a2",chartRangeMax:undefined,chartRangeMin:undefined},m);v=m.width=="auto"?"4.0em":v;minvalue=m.chartRangeMin==undefined?Math.min.apply(Math,j):m.chartRangeMin;maxvalue=m.chartRangeMax==undefined?Math.max.apply(Math,j):m.chartRangeMax;var C=f(this).simpledraw(v,u);if(C&&j.length>1){var z=C.pixel_width;var w=C.pixel_height;if(m.raw){if(m.showOutliers&&j.length>5){var A=j[0],r=j[1],q=j[2],p=j[3],o=j[4],h=j[5],n=j[6]}else{var r=j[0],q=j[1],p=j[2],o=j[3],h=j[4]}}else{j.sort(function(E,D){return E-D});var q=a(j,1);var p=a(j,2);var o=a(j,3);var l=o-q;if(m.showOutliers){var r=undefined,h=undefined;for(var x=0;x<j.length;x++){if(r==undefined&&j[x]>q-(l*m.outlierIQR)){r=j[x]}if(j[x]<o+(l*m.outlierIQR)){h=j[x]}}var A=j[0];var n=j[j.length-1]}else{var r=j[0];var h=j[j.length-1]}}var B=z/(maxvalue-minvalue+1);var y=0;if(m.showOutliers){y=Math.ceil(m.spotRadius);z-=2*Math.ceil(m.spotRadius);var B=z/(maxvalue-minvalue+1);if(A<r){C.drawCircle((A-minvalue)*B+y,w/2,m.spotRadius,m.outlierLineColor,m.outlierFillColor)}if(n>h){C.drawCircle((n-minvalue)*B+y,w/2,m.spotRadius,m.outlierLineColor,m.outlierFillColor)}}C.drawRect(Math.round((q-minvalue)*B+y),Math.round(w*0.1),Math.round((o-q)*B),Math.round(w*0.8),m.boxLineColor,m.boxFillColor);C.drawLine(Math.round((r-minvalue)*B+y),Math.round(w/2),Math.round((q-minvalue)*B+y),Math.round(w/2),m.lineColor);C.drawLine(Math.round((r-minvalue)*B+y),Math.round(w/4),Math.round((r-minvalue)*B+y),Math.round(w-w/4),m.whiskerColor);C.drawLine(Math.round((h-minvalue)*B+y),Math.round(w/2),Math.round((o-minvalue)*B+y),Math.round(w/2),m.lineColor);C.drawLine(Math.round((h-minvalue)*B+y),Math.round(w/4),Math.round((h-minvalue)*B+y),Math.round(w-w/4),m.whiskerColor);C.drawLine(Math.round((p-minvalue)*B+y),Math.round(w*0.1),Math.round((p-minvalue)*B+y),Math.round(w*0.9),m.medianColor);if(m.target){var s=Math.ceil(m.spotRadius);C.drawLine(Math.round((m.target-minvalue)*B+y),Math.round((w/2)-s),Math.round((m.target-minvalue)*B+y),Math.round((w/2)+s),m.targetColor);C.drawLine(Math.round((m.target-minvalue)*B+y-s),Math.round(w/2),Math.round((m.target-minvalue)*B+y+s),Math.round(w/2),m.targetColor)}}else{this.innerHTML=""}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(j){for(var h=0;h<this.length;h++){if(this[h]==j){return h}}return -1}}if(f.browser.msie&&!document.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML")}if(f.browser.hasCanvas==undefined){var b=document.createElement("canvas");f.browser.hasCanvas=b.getContext!=undefined}var e=function(j,h,l){};e.prototype={init:function(j,h,l){this.width=j;this.height=h;this.target=l;if(l[0]){l=l[0]}l.vcanvas=this},drawShape:function(j,h,l){alert("drawShape not implemented")},drawLine:function(j,m,h,l,n){return this.drawShape([[j,m],[h,l]],n)},drawCircle:function(j,n,h,l,m){alert("drawCircle not implemented")},drawPieSlice:function(j,p,h,m,l,n,o){alert("drawPieSlice not implemented")},drawRect:function(j,o,l,h,m,n){alert("drawRect not implemented")},getElement:function(){return this.canvas},_insert:function(h,j){f(j).html(h)}};var c=function(j,h,l){return this.init(j,h,l)};c.prototype=f.extend(new e,{_super:e.prototype,init:function(j,h,l){this._super.init(j,h,l);this.canvas=document.createElement("canvas");if(l[0]){l=l[0]}l.vcanvas=this;f(this.canvas).css({display:"inline-block",width:j,height:h,verticalAlign:"top"});this._insert(this.canvas,l);this.pixel_height=f(this.canvas).height();this.pixel_width=f(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;f(this.canvas).css({width:this.pixel_width,height:this.pixel_height})},_getContext:function(j,l){var h=this.canvas.getContext("2d");if(j!=undefined){h.strokeStyle=j}h.lineWidth=1;if(l!=undefined){h.fillStyle=l}return h},drawShape:function(m,l,n){var j=this._getContext(l,n);j.beginPath();j.moveTo(m[0][0]+0.5,m[0][1]+0.5);for(var h=1;h<m.length;h++){j.lineTo(m[h][0]+0.5,m[h][1]+0.5)}if(l!=undefined){j.stroke()}if(n!=undefined){j.fill()}},drawCircle:function(j,o,h,m,n){var l=this._getContext(m,n);l.beginPath();l.arc(j,o,h,0,2*Math.PI,false);if(m!=undefined){l.stroke()}if(n!=undefined){l.fill()}},drawPieSlice:function(j,q,h,n,l,o,p){var m=this._getContext(o,p);m.beginPath();m.moveTo(j,q);m.arc(j,q,h,n,l,false);m.lineTo(j,q);m.closePath();if(o!=undefined){m.stroke()}if(p){m.fill()}},drawRect:function(j,o,l,h,m,n){return this.drawShape([[j,o],[j+l,o],[j+l,o+h],[j,o+h],[j,o]],m,n)}});var d=function(j,h,l){return this.init(j,h,l)};d.prototype=f.extend(new e,{_super:e.prototype,init:function(j,h,m){this._super.init(j,h,m);if(m[0]){m=m[0]}m.vcanvas=this;this.canvas=document.createElement("span");f(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:j,height:h,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,m);this.pixel_height=f(this.canvas).height();this.pixel_width=f(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;var l='<v:group coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" style="position:absolute;top:0;left:0;width:'+this.pixel_width+"px;height="+this.pixel_height+'px;"></v:group>';this.canvas.insertAdjacentHTML("beforeEnd",l);this.group=f(this.canvas).children()[0]},drawShape:function(s,n,h){var o=[];for(var j=0;j<s.length;j++){o[j]=""+(s[j][0])+","+(s[j][1])}var m=o.splice(0,1);var q=n==undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+n+'" ';var r=h==undefined?' filled="false"':' fillColor="'+h+'" filled="true" ';var l=o[0]==o[o.length-1]?"x ":"";var p='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+q+r+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+m+" l "+o.join(", ")+" "+l+'e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",p)},drawCircle:function(j,q,h,o,p){j-=h+1;q-=h+1;var n=o==undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+o+'" ';var m=p==undefined?' filled="false"':' fillColor="'+p+'" filled="true" ';var l="<v:oval "+n+m+' style="position:absolute;top:'+q+"; left:"+j+"; width:"+(h*2)+"; height:"+(h*2)+'"></v:oval>';this.group.insertAdjacentHTML("beforeEnd",l)},drawPieSlice:function(v,s,p,q,m,u,l){if(q==m){return}if((m-q)==(2*Math.PI)){q=0;m=(2*Math.PI)}var j=v+Math.round(Math.cos(q)*p);var h=s+Math.round(Math.sin(q)*p);var o=v+Math.round(Math.cos(m)*p);var n=s+Math.round(Math.sin(m)*p);var r=[v-p,s-p,v+p,s+p,j,h,o,n];var A=u==undefined?' stroked="false" ':' strokeWeight="1" strokeColor="'+u+'" ';var z=l==undefined?' filled="false"':' fillColor="'+l+'" filled="true" ';var w='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+A+z+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+v+","+s+" wa "+r.join(", ")+' x e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",w)},drawRect:function(j,o,l,h,m,n){return this.drawShape([[j,o],[j,o+h],[j+l,o+h],[j+l,o],[j,o]],m,n)}})})(jQuery);(function(a){a.fn.hoverIntent=function(m,l){var n={sensitivity:7,interval:100,timeout:0};n=a.extend(n,l?{over:m,out:l}:m);var p,o,h,d;var e=function(f){p=f.pageX;o=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-p)+Math.abs(d-o))<n.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return n.over.apply(f,[g])}else{h=p;d=o;f.hoverIntent_t=setTimeout(function(){c(g,f)},n.interval)}};var j=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return n.out.apply(f,[g])};var b=function(s){var r=(s.type=="mouseover"?s.fromElement:s.toElement)||s.relatedTarget;while(r&&r!=this){try{r=r.parentNode}catch(f){r=this}}if(r==this){return false}var q=jQuery.extend({},s);var g=this;if(g.hoverIntent_t){g.hoverIntent_t=clearTimeout(g.hoverIntent_t)}if(s.type=="mouseover"){h=q.pageX;d=q.pageY;a(g).bind("mousemove",e);if(g.hoverIntent_s!=1){g.hoverIntent_t=setTimeout(function(){c(q,g)},n.interval)}}else{a(g).unbind("mousemove",e);if(g.hoverIntent_s==1){g.hoverIntent_t=setTimeout(function(){j(q,g)},n.timeout)}}};return this.mouseover(b).mouseout(b)}})(jQuery);(function(a){a.fn.overlabel=function(b){var c=a.extend({},a.fn.overlabel.defaults,b);return this.filter("[title]").each(function(){var g=a(this);var h=a.meta?a.extend({},c,g.data()):c;var j=a("<span />").addClass(h.wrapper_class);g.wrap(j);var d=a("<label />").attr("for",g.attr("id")).text(a(this).attr("title")).insertAfter(g);d.css("line-height",a(this).css("line-height"));d.click(function(){g.focus()});d.addClass(h.label_class);var e=function(){d.css(h.hide_css)};var f=function(){this.value||d.css(h.show_css)};g.focus(e).blur(f).each(e).each(f);return this})};a.fn.overlabel.defaults={label_class:"overlabel-apply",wrapper_class:"overlabel-wrapper",hide_css:{"text-indent":"-10000px",left:"-10000px"},show_css:{"text-indent":"0px",cursor:"text",left:"0px"},filter:false}})(jQuery);(function(c){var b={},a={};c.manageAjax=(function(){function e(g,h){b[g]=new c.manageAjax._manager(g,h);return b[g]}function d(g){if(b[g]){b[g].clear(true);delete b[g]}}var f={create:e,destroy:d};return f})();c.manageAjax._manager=function(d,e){this.requests={};this.inProgress=0;this.name=d;this.qName=d;this.opts=c.extend({},c.ajaxSettings,c.manageAjax.defaults,e);if(e&&e.queue&&e.queue!==true&&typeof e.queue==="string"&&e.queue!=="clear"){this.qName=e.queue}};c.manageAjax._manager.prototype={add:function(d){d=c.extend({},this.opts,d);var g=d.complete||c.noop,f=d.success||c.noop,l=d.beforeSend||c.noop,h=d.error||c.noop,n=(typeof d.data=="string")?d.data:c.param(d.data||{}),m=d.type+d.url+n,j=this,e=this._createAjax(m,d,f,g);if(this.requests[m]&&d.preventDoubbleRequests){return}e.xhrID=m;d.xhrID=m;d.beforeSend=function(q,p){var o=l.call(this,q,p);if(o===false){j._removeXHR(m)}q=null;return o};d.complete=function(p,o){j._complete.call(j,this,g,p,o,m,d);p=null};d.success=function(p,o,q){j._success.call(j,this,f,p,o,q,d);q=null};d.error=function(p,o,s){var q="",r="";if(o!=="timeout"&&p){q=p.status;r=p.responseXML||p.responseText}if(h){h.call(this,p,o,s,d)}else{setTimeout(function(){throw o+"| status: "+q+" | URL: "+d.url+" | data: "+n+" | thrown: "+s+" | response: "+r},0)}p=null};if(d.queue==="clear"){c(document).clearQueue(this.qName)}if(d.queue){c.queue(document,this.qName,e);if(this.inProgress<d.maxRequests){c.dequeue(document,this.qName)}return m}return e()},_createAjax:function(h,g,f,d){var e=this;return function(){if(g.beforeCreate.call(g.context||e,h,g)===false){return}e.inProgress++;if(e.inProgress===1){c.event.trigger(e.name+"AjaxStart")}if(g.cacheResponse&&a[h]){e.requests[h]={};setTimeout(function(){e._complete.call(e,g.context||g,d,{},"success",h,g);e._success.call(e,g.context||g,f,a[h],"success",{},g)},0)}else{if(g.async){e.requests[h]=c.ajax(g)}else{c.ajax(g)}}return h}},_removeXHR:function(d){if(this.opts.queue){c.dequeue(document,this.qName)}this.inProgress--;this.requests[d]=null;delete this.requests[d]},_isAbort:function(f,e){var d=!!(e.abortIsNoSuccess&&(!f||f.readyState===0||this.lastAbort===e.xhrID));f=null;return d},_complete:function(e,j,h,d,f,g){if(this._isAbort(h,g)){d="abort";g.abort.call(e,h,d,g)}j.call(e,h,d,g);c.event.trigger(this.name+"AjaxComplete",[h,d,g]);if(g.domCompleteTrigger){c(g.domCompleteTrigger).trigger(this.name+"DOMComplete",[h,d,g]).trigger("DOMComplete",[h,d,g])}this._removeXHR(f);if(!this.inProgress){c.event.trigger(this.name+"AjaxStop")}h=null},_success:function(e,l,g,d,j,h){var f=this;if(this._isAbort(j,h)){j=null;return}if(h.abortOld){c.each(this.requests,function(m){if(m===h.xhrID){return false}f.abort(m)})}if(h.cacheResponse&&!a[h.xhrID]){a[h.xhrID]=g}l.call(e,g,d,j,h);c.event.trigger(this.name+"AjaxSuccess",[j,h,g]);if(h.domSuccessTrigger){c(h.domSuccessTrigger).trigger(this.name+"DOMSuccess",[g,h]).trigger("DOMSuccess",[g,h])}j=null},getData:function(e){if(e){var d=this.requests[e];if(!d&&this.opts.queue){d=c.grep(c(document).queue(this.qName),function(g,f){return(g.xhrID===e)})[0]}return d}return{requests:this.requests,queue:(this.opts.queue)?c(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(g){var f;if(g){f=this.getData(g);if(f&&f.abort){this.lastAbort=g;f.abort();this.lastAbort=false}else{c(document).queue(this.qName,c.grep(c(document).queue(this.qName),function(j,h){return(j!==f)}))}f=null;return}var e=this,d=[];c.each(this.requests,function(h){d.push(h)});c.each(d,function(h,j){e.abort(j)})},clear:function(d){c(document).clearQueue(this.qName);if(d){this.abort()}}};c.manageAjax._manager.prototype.getXHR=c.manageAjax._manager.prototype.getData;c.manageAjax.defaults={beforeCreate:c.noop,abort:c.noop,abortIsNoSuccess:true,maxRequests:1,cacheResponse:false,domCompleteTrigger:false,domSuccessTrigger:false,preventDoubbleRequests:true,queue:false};c.each(c.manageAjax._manager.prototype,function(e,d){if(e.indexOf("_")===0||!c.isFunction(d)){return}c.manageAjax[e]=function(g,h){if(!b[g]){if(e==="add"){c.manageAjax.create(g,h)}else{return}}var f=Array.prototype.slice.call(arguments,1);b[g][e].apply(b[g],f)}})})(jQuery);(function(a){a.fn.autoResize=function(b){var c=a.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1000},b);this.filter("textarea").each(function(){var e=a(this).css({resize:"none","overflow-y":"hidden"}),g=e.height(),h=(function(){var j=["height","width","lineHeight","textDecoration","letterSpacing"],l={};a.each(j,function(m,n){l[n]=e.css(n)});return e.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(l).attr("tabIndex","-1").insertAfter(e)})(),f=null,d=function(){h.height(0).val(a(this).val()).scrollTop(10000);var l=Math.max(h.scrollTop(),g)+c.extraSpace,j=a(this).add(h);if(f===l){return}f=l;if(l>=c.limit){a(this).css("overflow-y","");return}c.onResize.call(this);c.animate&&e.css("display")==="block"?j.stop().animate({height:l},c.animateDuration,c.animateCallback):j.height(l)};e.unbind(".dynSiz").bind("keyup.dynSiz",d).bind("keydown.dynSiz",d).bind("change.dynSiz",d)});return this}})(jQuery);R.NoFlash={init:function(){this.active=true;window.getPlayer=function(){return R.NoFlash.player};flashPlayerReady()},player:{_isInLibrary:function(){return false},_getLibrary:function(){return{}},_sendState:function(){return{}}}};(function(a){a.fn.suspenders=function(b){var c=a.extend({},a.fn.suspenders.defaults,b);return this.each(function(){var f=a(this);var h=c;if(!h.attach){f.css("position","relative")}var e;do{e="sus_id_"+Math.floor(Math.random()*5000)}while(document.getElementById(e));if(document.getElementById(e)){a("#"+e).remove()}f.panel=a("<div />").addClass(h.css.holder).addClass("hover-hint").attr("id",e).hide();f.panel.css("position","absolute");if(h.attach){f.panel.appendTo(h.attach)}else{f.panel.appendTo(f)}var d=function(){if(h.beforeOpen){h.beforeOpen(f)}if(h.menu_items){f.panel.empty();var s=a("<ul />").addClass(h.css.list);a.each(h.menu_items,function(){var w=a.extend({},a.fn.suspenders.defaults.item,h.item,this);if(typeof(w.visible)!="undefined"){if(typeof(w.visible)=="function"){if(!w.visible(f)){return}}else{if(!w.visible){return}}}if(w.type=="separator"){a("<li />").addClass(w.css.separator).appendTo(s);return}var v=a("<li />").addClass(w.css.item);if(w.action){var x="";if(typeof(w.title)=="function"){x=w.title(f)}else{x=w.title}var u=a("<a />").addClass(w.css.link).html(x);if(typeof(w.data)!="undefined"){u.val(w.data)}u.click(w.action);v.append(u)}else{if(w.type=="disabled"){a("<span />").addClass(w.css.disabled).appendTo(v).html(w.title)}}v.appendTo(s)});a("a",s).bind("click.menu",function(u){g()});f.panel.append(s)}if(h.content){var p=a("<div />").append(a("<span />").addClass("sus_content").html(h.content).append(h.point?a("<div />").addClass("sus_point"):null));f.panel.empty();f.panel.append(p)}if(h.attach){f.panel.bind("mouseleave",function(u){g()})}if(h.width){f.panel.width(h.width)}if(h.point){if(!h.width){f.panel.width(f.outerWidth()-2)}if(h.persist){a("<div />").css("position","absolute").width(f.panel.width()+"px").height("10px").appendTo(f.panel).css("left","0px").addClass("sus_shim");f.panel.bind("click."+e,function(u){g()})}}f.css("z-index",10000);f.panel.show();if(!h.attach){if(jQuery.browser.msie&&jQuery.browser.version<8){addOnTop(f)}}function l(){f.panel.position({my:h.position.my,at:h.position.at,of:f,offset:h.position.offset,collision:h.position.collision})}l();l();if(h.inside){var j=a(h.inside);if(j.length>0){var m=f.panel.offset().left,q=f.panel.outerWidth(),r=j.offset().left,n=j.outerWidth();var o=m+q-(r+n);if(o>0){f.panel.css("left",parseInt(f.panel.css("left"))-o)}}}if(h.afterOpen){h.afterOpen(f)}};var g=function(){f.panel.hide();f.css("z-index","");a("a",f).unbind("click.menu");a(document).unbind("click."+e);if(!h.attach){if(jQuery.browser.msie&&jQuery.browser.version<8){removeOnTop(f)}}a(".overlay.menu_visible").removeClass("menu_visible")};if(h.openType=="hover"){if(h.attach){f.hoverIntent(function(j){d()},function(j){if(h.point){if(j&&j.relatedTarget&&a(j.relatedTarget).hasClass("sus_shim")){return}g()}else{}})}else{f.hoverIntent(function(j){d()},function(j){g()})}}else{if(h.openType=="click"){f.click(function(j){a(document).click();a(document).bind("click."+e,function(l){if(a(l.target).parents().get(0)==f.get(0)){return}if(l.target==f.get(0)){return}if(a(l.target).hasClass("close")&&a(l.target.parentNode).hasClass("jGrowl-notification")){return}g()});d();a(this).closest(".overlay").addClass("menu_visible");return false})}}})};a.fn.suspenders.defaults={openType:"click",position:{my:"left top",at:"left top",offset:"-1 -5",collision:"fit fit"},css:{holder:"sus_holder",list:"sus_list"},inside:null};a.fn.suspenders.defaults.item={type:"link",css:{item:"sus_item",link:"sus_link",link_hover:"sus_hover",separator:"sus_separator",disabled:"sus_disabled"}}})(jQuery);(function(a){a.fn.tipSuspenders=function(b){if(!b){b={}}b=a.extend(b,{openType:"hover",point:true,position:{my:"center bottom",at:"center top",offset:"0 -7"}});return this.each(function(){var c=a.extend({},a.fn.suspenders.defaults,b);c.attach=a("#content");a(this).suspenders(c)})}})(jQuery);(function(a){a.fn.selectSuspenders=function(b){if(!b){b={}}b=a.extend(b,{openType:"click",item:{css:{item:"select_sus_item"}}});return this.each(function(){var c=a.extend({},a.fn.suspenders.defaults,b);c.menu_items=[];var e=a(this);e.hide();var h=a("<span />").addClass("select_sus").insertAfter(e);c.afterOpen=function(p){var o=a("option:selected",e);var n=0;if(o.length==0){o=a("option",e)[0]}else{n=a("option",e).index(o)}l();a(".select_sus_item.selected",p).removeClass("selected");a(".select_sus_item:eq("+n+")",p).addClass("selected")};function d(n){if(a(".sus_text",h).length==0){h.append(a("<span />").addClass("sus_text").text(n))}else{a(".sus_text",h).html(n)}}function l(){h.find(".select_sus_item a").each(function(n){a(this).text(e.find("option:eq("+n+")").text())})}function g(){a("option.selected",e).removeClass("selected")}var f=a("option:selected",e);var j;if(f.length==0){f=a("option",e)[0];j=f.text}else{j=f.text()}var m=e.index(f);d(j);a("option",e).each(function(n){c.menu_items.push({title:a(this).text(),data:a(this).val(),action:function(o){if(e.val()==a(this).val()){return false}e.val(a(this).val());e.change();l();d(a(this).text());return false}})});h.suspenders(c)})}})(jQuery);(function(a){a.fn.autoSuspenders=function(e,m){if(clientManager.current_user.id==-1){return a(this).hide()}if(typeof e=="undefined"){log("Tried to autoSuspenders with no object")}else{if(typeof e!="object"){log("Tried to autoSuspenders with a non-object")}}var f={inCollectionDisabled:{title:"In Collection",type:"disabled",visible:function(){return e.isInLibrary}},removeFromCollection:{title:"Remove From Collection",action:function(){var n=function(){R.Library.remove("t",[e.id]);a.jGrowl('"'+e.name+'" was removed from your collection',{theme:"collection_removed"})};if(clientManager.current_user.warnings.sw_or&&R.Library.contains("ot",[e.id])){warningDialog("Remove songs",getSyncDialog("When you remove songs that are synced to your mobile from your collection, they will also be removed from your mobile."),{has_cancel:true,success_function:function(){n()},success_button_label:"Remove",warning_key:"sw_or"})}else{n()}return false},visible:function(){return e.isInLibrary}},syncToMobile:{title:"Sync to Mobile",action:function(){var o=function(){R.Library.add("ot",[e.id]);a.jGrowl('"'+e.name+'" will be synced to your mobile',{theme:"collection_added"})};var n=false;if("subscription_type" in clientManager.current_user){n=clientManager.current_user.subscription_type!=2}if(clientManager.current_user.warnings.sw_oa||n){warningDialog("Sync music and play it when you're offline",getSyncDialog(),{has_cancel:false,success_function:function(){o()},success_button_label:"OK",hide_checkbox:n,warning_key:"sw_oa"})}else{o()}return false},visible:function(){return server_info.allow_offline&&e.can_tether&&!R.Library.contains("ot",[e.id])}},removeFromMobile:{title:"Remove from Mobile",action:function(){R.Library.remove("ot",[e.id]);a.jGrowl('"'+e.name+'" was removed from your mobile',{theme:"collection_removed"});return false},visible:function(){return server_info.allow_offline&&e.can_tether&&R.Library.contains("ot",[e.id])}},addToQueue:{title:"Add to Queue",action:function(){getPlayer()._queueSource(e.type,e.id);addQueueNotification(e.name);return false},visible:function(){if(e.hasOwnProperty("can_stream")){return e.can_stream}else{return true}}},shareItem:{title:function(){return"Share this "+a.t.prettyType(e.type)},action:function(){openShareDialog(e);return false}}};var c={addToCollection:{title:"Add to Collection",action:function(){R.Library.add(e.type,[e.id]);a.jGrowl('"'+e.name+'" was added to your collection',{theme:"collection_added"});return false},visible:function(){return !e.isInLibrary}},downloadSong:{title:function(){return"Download Song &#8212; $"+e.price},action:function(n){onItemBuyClick(n,e);return false},visible:function(){return e.can_download}},albumOnly:{title:"Album Download Only",type:"disabled",visible:function(){return !e.can_download&&e.can_download_album_only}},notAvailableForDownload:{title:"Not Available for Download",type:"disabled",visible:function(){return !e.can_download&&!e.can_download_album_only}},addToPlaylist:{title:"Add to Playlist...",action:function(n){showAddToPlaylistDialog(e);return false},visible:function(){if(e.hasOwnProperty("can_stream")){return e.can_stream}else{return true}}}};var g={add_func:function(p,o){var n=a.grep(o.track_ids,function(r,q){return !R.Library.contains(p,[r])});R.Library.add(p,n);if(p=="t"){a.jGrowl('"'+o.name+'" was added to your collection',{theme:"collection_added"})}else{a.jGrowl('"'+o.name+'" will be synced to your mobile',{theme:"collection_added"})}},remove_func:function(o,n){var p=a.grep(n.track_ids,function(r,q){return R.Library.contains(o,[r])});R.Library.remove(o,p);if(o=="t"){a.jGrowl('"'+n.name+'" was removed from your collection',{theme:"collection_removed"})}else{a.jGrowl('"'+n.name+'" will be removed from your mobile',{theme:"collection_removed"})}}};var h={addToCollection:{title:function(){if(e.trackCount!=0){return"Complete this album in your collection"}return"Add to Collection"},action:function(){g.add_func("t",e);return false},visible:function(){return !e.isInLibrary}},syncToMobile:{title:function(){if(e.offlineTrackCount!=0){return"Sync Entire Album to Mobile"}else{return"Sync to Mobile"}},action:function(){var n=false;if("subscription_type" in clientManager.current_user){n=clientManager.current_user.subscription_type!=2}if(clientManager.current_user.warnings.sw_oa||n){warningDialog("Sync music and play it when you're offline",getSyncDialog(),{has_cancel:false,success_function:function(){g.add_func("ot",e)},success_button_label:"OK",hide_checkbox:n,warning_key:"sw_oa"})}else{g.add_func("ot",e)}return false},visible:function(){return server_info.allow_offline&&e.can_tether&&e.track_ids&&e.offlineTrackCount!=e.track_ids.length}},removeFromCollection:{title:"Remove from Collection",action:function(){var n=false;a.each(e.track_ids,function(p,o){if(R.Library.contains("ot",[o+0])){n=true;return false}return true});if(clientManager.current_user.warnings.sw_or&&n){warningDialog("Remove songs",getSyncDialog("When you remove songs that are synced to your mobile from your collection, they will also be removed from your mobile."),{has_cancel:true,success_function:function(){g.remove_func("t",e)},success_button_label:"Remove",warning_key:"sw_or"})}else{g.remove_func("t",e)}return false},visible:function(){return e.trackCount&&e.trackCount>0}},removeFromMobile:{title:"Remove from Mobile",action:function(n){g.remove_func("ot",e);return false},visible:function(){return server_info.allow_offline&&e.can_tether&&e.offlineTrackCount&&e.offlineTrackCount>0}},notAvailableForDownload:{title:"Not available for download",type:"disabled",visible:function(){return e.price=="None"}},downloadAlbum:{title:function(){return"Download Album &#8212; $"+e.price},action:function(n){onItemBuyClick(n,e);return false},visible:function(){return e.price!="None"}}};var d={subscribe:{title:"Subscribe",action:function(){R.Library.add("p",[e.id]);a.jGrowl('You subscribed to "'+e.name+'"',{theme:"collection_added"});return false},visible:function(){return e.ownerID!=clientManager.current_user.id&&!R.Library.contains("p",[e.id])}},syncToMobile:{title:"Sync to Mobile",action:function(o){var p=function(){R.Library.add("op",[e.id]);a.jGrowl(e.name+'" will be synced to your mobile',{theme:"collection_added"})};var n=false;if("subscription_type" in clientManager.current_user){n=clientManager.current_user.subscription_type!=2}if(clientManager.current_user.warnings.sw_oa||n){warningDialog("Sync music and play it when you're offline",getSyncDialog(),{has_cancel:false,success_function:function(){p()},success_button_label:"OK",hide_checkbox:n,warning_key:"sw_oa"})}else{p()}return false},visible:function(){return server_info.allow_offline&&!R.Library.contains("op",[e.id])}},unsubscribe:{title:"Unsubscribe",action:function(o){var n=function(){R.Library.remove("p",[e.id]);a.jGrowl('You have unsubscribed from "'+e.name+'"',{theme:"collection_removed"})};if(clientManager.current_user.warnings.sw_or&&R.Library.contains("op",[e.id])){warningDialog("Unsubscribe and remove playlist",getSyncDialog("When you unsubscribe from a playlist that is synced to your mobile, it will also be removed from your mobile"),{has_cancel:true,success_function:function(){n()},success_button_label:"Remove",warning_key:"sw_or"})}else{n()}return false},visible:function(){return e.ownerID!=clientManager.current_user.id&&R.Library.contains("p",[e.id])}},removeFromMobile:{title:"Remove from Mobile",action:function(){R.Library.remove("op",[e.id]);a.jGrowl('You have removed "'+e.name+'" from your mobile',{theme:"collection_removed"});return false},visible:function(){return server_info.allow_offline&&R.Library.contains("op",[e.id])}},notAvailableForDownload:{title:"Not available for download",type:"disabled",visible:function(){return !e.price||e.price=="None"}},downloadPlaylist:{title:function(){return"Download Playlist &#8212; $"+e.price},action:function(n){onItemBuyClick(n,e);return false},visible:function(){return e.price&&e.price!="None"}}};if(typeof m=="undefined"){m={}}if(e.type=="t"){this.addClass("t"+e.id);if(R.Library.contains("t",[e.id])){this.addClass("checkmark")}if(R.Library.contains("ot",[e.id])){this.closest(".emblems, .menu_holder").addClass("has_offline")}a.extend(true,m,{beforeOpen:function(){var n=false;if(R.Library.contains("t",[e.id])){n=true}e.isInLibrary=n},menu_items:[f.inCollectionDisabled,c.addToCollection,{type:"separator"},f.syncToMobile,f.removeFromMobile,c.downloadSong,c.albumOnly,c.notAvailableForDownload,f.addToQueue,c.addToPlaylist,f.shareItem,{type:"separator",visible:function(){return e.isInLibrary}},f.removeFromCollection]})}else{if(e.type=="a"){var j=0;var l=0;var b=this;a.each(e.track_ids,function(o,n){b.addClass("t"+(this+0));if(R.Library.contains("t",[n+0])){j++}if(R.Library.contains("ot",[n+0])){l++}});if(j==e.track_ids.length&&e.track_ids.length!=0){this.addClass("checkmark")}if(l>0){this.closest(".overlay, .menu_holder, .emblems").addClass("has_offline")}m.beforeOpen=function(){var n=0;var o=0;a.each(e.track_ids,function(q,p){if(R.Library.contains("t",[p+0])){n++;if(R.Library.contains("ot",[p+0])){o++}}});e.trackCount=n;e.offlineTrackCount=o;e.isInLibrary=e.trackCount==e.track_ids.length};m.menu_items=[f.inCollectionDisabled,h.addToCollection,h.syncToMobile,{type:"separator",visible:function(){return e.trackCount!=e.track_ids.length||(server_info.allow_offline&&e.offlineTrackCount!=e.track_ids.length)}},h.removeFromCollection,h.removeFromMobile,{type:"separator",visible:function(){return(e.trackCount&&e.trackCount>0)||(e.offlineTrackCount&&e.offlineTrackCount>0)}},h.notAvailableForDownload,h.downloadAlbum,f.addToQueue,f.shareItem]}else{if(e.type=="p"){this.addClass("p"+e.id);if(R.Library.contains("p",[e.id])){this.addClass("checkmark")}if(R.Library.contains("op",[e.id])){this.closest(".emblems, .menu_holder").addClass("has_offline")}m.menu_items=[d.subscribe,d.syncToMobile,d.unsubscribe,d.removeFromMobile,f.addToQueue,d.notAvailableForDownload,d.downloadPlaylist,f.shareItem]}else{return a(this).hide()}}}return a(this).suspenders(m)}})(jQuery);(function(a){a.fn.multiSuspenders=function(b){if(clientManager.current_user.id==-1){return a(this).hide()}if(b&&b.type){if(b.type=="al"){b.menu_items=[{title:"Add to Queue",action:function(c){getPlayer()._queueSource("rl",b.id,b.secondary_id);addQueueNotification(b.name);return false}}]}else{if(b.type=="rl"){b.menu_items=[{title:"Add to Queue",action:function(c){getPlayer()._queueSource("al",b.id,b.secondary_id);addQueueNotification(b.name);return false}}]}else{log("multiSuspenders doesn't handle "+b.type+" objects anymore, try autoSuspenders");return a(this).hide()}}return this.suspenders(b)}}})(jQuery);function getSyncDialog(b){var a=$("#js_templates").find(".sync_warning_template").clone();if("free_trial" in clientManager.current_user){if(clientManager.current_user.free_trial.eligible){a.find(".upgrade_notice").show()}else{if("subscription_type" in clientManager.current_user&&clientManager.current_user.subscription_type!=2){a.find(".upgrade_notice").show().find("a").text("Buy Subscription")}}}if(b){a.find(".warning_body").text(b)}return a}function addQueueNotification(a){$.jGrowl('"'+a+'" was added to your queue',{theme:"queue_added"})}function artworkOverlays(d,a){if(!d){log("Tried adding artwork overlays without an item, bailing");return}if(!a){log("Tried adding artwork overlays without a config, bailing");return}var b=$('<div class="overlay"></div>').appendTo(a.location);if(!a.hasOwnProperty("has_play")||a.has_play){$("<button />").addClass("play with_halo medium").appendTo(b).play(d)}if(d.type=="a"){if(R.Library.contains("ot",d.track_ids,true)){b.addClass("has_offline")}}if($.inArray(d.type,["t","a","al","p","rl"])>-1){var c=$("<span />").addClass("menu_holder").appendTo(b);if($.inArray(d.type,["t","a","p"])>-1){$("<span />").addClass("menu_sus").addClass("album_sus").autoSuspenders(d,a).appendTo(c)}else{$.extend(a,d);$("<span />").addClass("menu_sus").addClass("album_sus").multiSuspenders(a).appendTo(c)}}}function onItemBuyClick(c,b){var a={onSuccess:function(f,e){if(f.content.launchDownloader!=true){return false}if($.launcherState=="app-installed"){e.dialog("option","buttons",{"Launch Downloader":function(){startDownloads(c)}});e.dialog("option","position","center");var d=e.parent().find(".ui-dialog-buttonpane button");$(d).launcher(["app-installed"]);$.launcherDialogOpen=true;$(document).bind("downloaderLaunched",function(g){e.dialog("close");$(document).unbind("downloaderLaunched")})}else{e.dialog("close");startDownloads(c)}$.jGrowl('"'+b.name+'" was successfully purchased.',{theme:"item_purchased"})},onFail:function(e,d){$.jGrowl('"'+b.name+'" could not be purchased.',{theme:"item_purchased_error"});d.dialog("option","buttons",{Close:function(){d.dialog("close")}})},onClose:function(d){$.launcherDialogOpen=false}};showBillingDialog("/payments/billing/","Confirm Purchase "+b.name,"Continue",{item_id:b.id,item_type:b.type},a);c.preventDefault();return false}function startDownloads(a){if($.launcherState=="app-installed"){}else{if($.launcherState=="app-running"){}else{installSyncManager()}}getPlayer()._getDownloads();a.preventDefault()}jQuery.fn.progressSlider=function progressSlider(a){var b=jQuery.extend({start:function(c){},stop:function(c){},drag:function(c){},click:function(c){},change:function(c){},value:0,animated:false},a);$(this).each(function(){var c=$(this);var h=!c.hasClass("progressSlider");var l,e,p;if(!h){l=$(".progressSlider-handle",c);e=$(".progressSlider-pre",c);p=$(".progressSlider-post",c)}else{c.addClass("progressSlider");l=$('<div class="progressSlider-handle">').appendTo(c);e=$('<div class="progressSlider-pre">').append($('<div class="progressSlider-pre-inner">')).appendTo(c);p=$('<div class="progressSlider-post">').append($('<div class="progressSlider-post-inner">')).appendTo(c)}function q(){return($(l).offset().left-$(c).offset().left)/($(c).width()-$(l).width())}function r(u){if(u==null){u=$(l).offset().left-$(c).offset().left}var w=$(l).width();var v=$(c).width();e.css({position:"absolute",left:0,width:u+(w/2)});p.css({position:"absolute",left:(w/2)+u,width:v-u-(w/2)});b.change(q())}if(h){l.draggable({axis:"x",containment:c,start:function g(){$(c).addClass("progressSlider-dragging");b.start(q())},stop:function n(){r();b.stop(q());$(c).removeClass("progressSlider-dragging")},drag:function d(u){r();b.drag(q());u.stopPropagation()}});c.click(function(u){if($(u.target).hasClass("progressSlider-handle")){return}$(l).css("left",u.pageX-$(e).offset().left-$(l).width()/2);r();b.click(q())});$(l).css("left",($(c).width()-$(l).width())*b.value);r()}else{if(b.value=="refresh"){r()}else{var o=q();if(b.animated&&Math.abs(o-b.value)>0.1){var f=300;var j=($(c).width()-$(l).width())*b.value;$(l).animate({left:j},f);var m=$(l).width();var s=$(c).width();e.animate({width:j+(m/2)},f);p.animate({left:(m/2)+j,width:s-j-(m/2)},f)}else{$(l).css("left",($(c).width()-$(l).width())*b.value);r()}}}})};jQuery.fn.loading=function loading(b){var a=jQuery.extend({text:"Loading...",hide:false},b);return $(this).each(function(){var d=$(this);if(a.hide){if(!$(d.parent()).hasClass("overlay_holder")){return}d.removeClass("loading_overlay");var f=d.parent().get(0);d.insertBefore(f);$(f).remove()}else{d.addClass("loading_overlay");var e=$("<div>").addClass("overlay_holder").insertBefore(d).css({position:"relative",left:"0px"});d.appendTo(e);var c=$("<div>").appendTo(e).css({position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px","z-index":10000001});$("<div>").appendTo(c).css({position:"absolute",left:"0px",right:"0px",top:"0px",bottom:"0px",opacity:0.5,"background-color":"white","-webkit-border-radius":"5px","-moz-border-radius":"5px","z-index":10000000,background:" #fff url(/media/images/loading.gif) no-repeat 99% 8px"})}})};var swfobject=function(){var b="undefined",Q="object",n="Shockwave Flash",p="ShockwaveFlash.ShockwaveFlash",P="application/x-shockwave-flash",m="SWFObjectExprInst",j=window,K=document,T=navigator,o=[],N=[],i=[],d=[],J,Z=null,M=null,l=null,e=false,A=false;var h=function(){var v=typeof K.getElementById!=b&&typeof K.getElementsByTagName!=b&&typeof K.createElement!=b,AC=[0,0,0],x=null;if(typeof T.plugins!=b&&typeof T.plugins[n]==Q){x=T.plugins[n].description;if(x&&!(typeof T.mimeTypes!=b&&T.mimeTypes[P]&&!T.mimeTypes[P].enabledPlugin)){x=x.replace(/^.*\s+(\S+\s+\S+$)/,"$1");AC[0]=parseInt(x.replace(/^(.*)\..*$/,"$1"),10);AC[1]=parseInt(x.replace(/^.*\.(.*)\s.*$/,"$1"),10);AC[2]=/r/.test(x)?parseInt(x.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof j.ActiveXObject!=b){var y=null,AB=false;try{y=new ActiveXObject(p+".7")}catch(t){try{y=new ActiveXObject(p+".6");AC=[6,0,21];y.AllowScriptAccess="always"}catch(t){if(AC[0]==6){AB=true}}if(!AB){try{y=new ActiveXObject(p)}catch(t){}}}if(!AB&&y){try{x=y.GetVariable("$version");if(x){x=x.split(" ")[1].split(",");AC=[parseInt(x[0],10),parseInt(x[1],10),parseInt(x[2],10)]}}catch(t){}}}}var AD=T.userAgent.toLowerCase(),r=T.platform.toLowerCase(),AA=/webkit/.test(AD)?parseFloat(AD.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,q=false,z=r?/win/.test(r):/win/.test(AD),w=r?/mac/.test(r):/mac/.test(AD);
/*@cc_on q=true;@if(@_win32)z=true;@elif(@_mac)w=true;@end@*/
return{w3cdom:v,pv:AC,webkit:AA,ie:q,win:z,mac:w}}();var L=function(){if(!h.w3cdom){return}f(H);if(h.ie&&h.win){try{K.write("<script id=__ie_ondomload defer=true src=//:><\/script>");J=C("__ie_ondomload");if(J){I(J,"onreadystatechange",S)}}catch(q){}}if(h.webkit&&typeof K.readyState!=b){Z=setInterval(function(){if(/loaded|complete/.test(K.readyState)){E()}},10)}if(typeof K.addEventListener!=b){K.addEventListener("DOMContentLoaded",E,null)}R(E)}();function S(){if(J.readyState=="complete"){J.parentNode.removeChild(J);E()}}function E(){if(e){return}if(h.ie&&h.win){var v=a("span");try{var u=K.getElementsByTagName("body")[0].appendChild(v);u.parentNode.removeChild(u)}catch(w){return}}e=true;if(Z){clearInterval(Z);Z=null}var q=o.length;for(var r=0;r<q;r++){o[r]()}}function f(q){if(e){q()}else{o[o.length]=q}}function R(r){if(typeof j.addEventListener!=b){j.addEventListener("load",r,false)}else{if(typeof K.addEventListener!=b){K.addEventListener("load",r,false)}else{if(typeof j.attachEvent!=b){I(j,"onload",r)}else{if(typeof j.onload=="function"){var q=j.onload;j.onload=function(){q();r()}}else{j.onload=r}}}}}function H(){var t=N.length;for(var q=0;q<t;q++){var u=N[q].id;if(h.pv[0]>0){var r=C(u);if(r){N[q].width=r.getAttribute("width")?r.getAttribute("width"):"0";N[q].height=r.getAttribute("height")?r.getAttribute("height"):"0";if(c(N[q].swfVersion)){if(h.webkit&&h.webkit<312){Y(r)}W(u,true)}else{if(N[q].expressInstall&&!A&&c("6.0.65")&&(h.win||h.mac)){k(N[q])}else{O(r)}}}}else{W(u,true)}}}function Y(t){var q=t.getElementsByTagName(Q)[0];if(q){var w=a("embed"),y=q.attributes;if(y){var v=y.length;for(var u=0;u<v;u++){if(y[u].nodeName=="DATA"){w.setAttribute("src",y[u].nodeValue)}else{w.setAttribute(y[u].nodeName,y[u].nodeValue)}}}var x=q.childNodes;if(x){var z=x.length;for(var r=0;r<z;r++){if(x[r].nodeType==1&&x[r].nodeName=="PARAM"){w.setAttribute(x[r].getAttribute("name"),x[r].getAttribute("value"))}}}t.parentNode.replaceChild(w,t)}}function k(w){A=true;var u=C(w.id);if(u){if(w.altContentId){var y=C(w.altContentId);if(y){M=y;l=w.altContentId}}else{M=G(u)}if(!(/%$/.test(w.width))&&parseInt(w.width,10)<310){w.width="310"}if(!(/%$/.test(w.height))&&parseInt(w.height,10)<137){w.height="137"}K.title=K.title.slice(0,47)+" - Flash Player Installation";var z=h.ie&&h.win?"ActiveX":"PlugIn",q=K.title,r="MMredirectURL="+j.location+"&MMplayerType="+z+"&MMdoctitle="+q,x=w.id;if(h.ie&&h.win&&u.readyState!=4){var t=a("div");x+="SWFObjectNew";t.setAttribute("id",x);u.parentNode.insertBefore(t,u);u.style.display="none";var v=function(){u.parentNode.removeChild(u)};I(j,"onload",v)}U({data:w.expressInstall,id:m,width:w.width,height:w.height},{flashvars:r},x)}}function O(t){if(h.ie&&h.win&&t.readyState!=4){var r=a("div");t.parentNode.insertBefore(r,t);r.parentNode.replaceChild(G(t),r);t.style.display="none";var q=function(){t.parentNode.removeChild(t)};I(j,"onload",q)}else{t.parentNode.replaceChild(G(t),t)}}function G(v){var u=a("div");if(h.win&&h.ie){u.innerHTML=v.innerHTML}else{var r=v.getElementsByTagName(Q)[0];if(r){var w=r.childNodes;if(w){var q=w.length;for(var t=0;t<q;t++){if(!(w[t].nodeType==1&&w[t].nodeName=="PARAM")&&!(w[t].nodeType==8)){u.appendChild(w[t].cloneNode(true))}}}}}return u}function U(AG,AE,t){var q,v=C(t);if(v){if(typeof AG.id==b){AG.id=t}if(h.ie&&h.win){var AF="";for(var AB in AG){if(AG[AB]!=Object.prototype[AB]){if(AB.toLowerCase()=="data"){AE.movie=AG[AB]}else{if(AB.toLowerCase()=="styleclass"){AF+=' class="'+AG[AB]+'"'}else{if(AB.toLowerCase()!="classid"){AF+=" "+AB+'="'+AG[AB]+'"'}}}}}var AD="";for(var AA in AE){if(AE[AA]!=Object.prototype[AA]){AD+='<param name="'+AA+'" value="'+AE[AA]+'" />'}}v.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AF+">"+AD+"</object>";i[i.length]=AG.id;q=C(AG.id)}else{if(h.webkit&&h.webkit<312){var AC=a("embed");AC.setAttribute("type",P);for(var z in AG){if(AG[z]!=Object.prototype[z]){if(z.toLowerCase()=="data"){AC.setAttribute("src",AG[z])}else{if(z.toLowerCase()=="styleclass"){AC.setAttribute("class",AG[z])}else{if(z.toLowerCase()!="classid"){AC.setAttribute(z,AG[z])}}}}}for(var y in AE){if(AE[y]!=Object.prototype[y]){if(y.toLowerCase()!="movie"){AC.setAttribute(y,AE[y])}}}v.parentNode.replaceChild(AC,v);q=AC}else{var u=a(Q);u.setAttribute("type",P);for(var x in AG){if(AG[x]!=Object.prototype[x]){if(x.toLowerCase()=="styleclass"){u.setAttribute("class",AG[x])}else{if(x.toLowerCase()!="classid"){u.setAttribute(x,AG[x])}}}}for(var w in AE){if(AE[w]!=Object.prototype[w]&&w.toLowerCase()!="movie"){F(u,w,AE[w])}}v.parentNode.replaceChild(u,v);q=u}}}return q}function F(t,q,r){var u=a("param");u.setAttribute("name",q);u.setAttribute("value",r);t.appendChild(u)}function X(r){var q=C(r);if(q&&(q.nodeName=="OBJECT"||q.nodeName=="EMBED")){if(h.ie&&h.win){if(q.readyState==4){B(r)}else{j.attachEvent("onload",function(){B(r)})}}else{q.parentNode.removeChild(q)}}}function B(t){var r=C(t);if(r){for(var q in r){if(typeof r[q]=="function"){r[q]=null}}r.parentNode.removeChild(r)}}function C(t){var q=null;try{q=K.getElementById(t)}catch(r){}return q}function a(q){return K.createElement(q)}function I(t,q,r){t.attachEvent(q,r);d[d.length]=[t,q,r]}function c(t){var r=h.pv,q=t.split(".");q[0]=parseInt(q[0],10);q[1]=parseInt(q[1],10)||0;q[2]=parseInt(q[2],10)||0;return(r[0]>q[0]||(r[0]==q[0]&&r[1]>q[1])||(r[0]==q[0]&&r[1]==q[1]&&r[2]>=q[2]))?true:false}function V(v,r){if(h.ie&&h.mac){return}var u=K.getElementsByTagName("head")[0],t=a("style");t.setAttribute("type","text/css");t.setAttribute("media","screen");if(!(h.ie&&h.win)&&typeof K.createTextNode!=b){t.appendChild(K.createTextNode(v+" {"+r+"}"))}u.appendChild(t);if(h.ie&&h.win&&typeof K.styleSheets!=b&&K.styleSheets.length>0){var q=K.styleSheets[K.styleSheets.length-1];if(typeof q.addRule==Q){q.addRule(v,r)}}}function W(t,q){var r=q?"visible":"hidden";if(e&&C(t)){C(t).style.visibility=r}else{V("#"+t,"visibility:"+r)}}function g(s){var r=/[\\\"<>\.;]/;var q=r.exec(s)!=null;return q?encodeURIComponent(s):s}var D=function(){if(h.ie&&h.win){window.attachEvent("onunload",function(){var w=d.length;for(var v=0;v<w;v++){d[v][0].detachEvent(d[v][1],d[v][2])}var t=i.length;for(var u=0;u<t;u++){X(i[u])}for(var r in h){h[r]=null}h=null;for(var q in swfobject){swfobject[q]=null}swfobject=null})}}();return{registerObject:function(u,q,t){if(!h.w3cdom||!u||!q){return}var r={};r.id=u;r.swfVersion=q;r.expressInstall=t?t:false;N[N.length]=r;W(u,false)},getObjectById:function(v){var q=null;if(h.w3cdom){var t=C(v);if(t){var u=t.getElementsByTagName(Q)[0];if(!u||(u&&typeof t.SetVariable!=b)){q=t}else{if(typeof u.SetVariable!=b){q=u}}}}return q},embedSWF:function(x,AE,AB,AD,q,w,r,z,AC){if(!h.w3cdom||!x||!AE||!AB||!AD||!q){return}AB+="";AD+="";if(c(q)){W(AE,false);var AA={};if(AC&&typeof AC===Q){for(var v in AC){if(AC[v]!=Object.prototype[v]){AA[v]=AC[v]}}}AA.data=x;AA.width=AB;AA.height=AD;var y={};if(z&&typeof z===Q){for(var u in z){if(z[u]!=Object.prototype[u]){y[u]=z[u]}}}if(r&&typeof r===Q){for(var t in r){if(r[t]!=Object.prototype[t]){if(typeof y.flashvars!=b){y.flashvars+="&"+t+"="+r[t]}else{y.flashvars=t+"="+r[t]}}}}f(function(){U(AA,y,AE);if(AA.id==AE){W(AE,true)}})}else{if(w&&!A&&c("6.0.65")&&(h.win||h.mac)){A=true;W(AE,false);f(function(){var AF={};AF.id=AF.altContentId=AE;AF.width=AB;AF.height=AD;AF.expressInstall=w;k(AF)})}}},getFlashPlayerVersion:function(){return{major:h.pv[0],minor:h.pv[1],release:h.pv[2]}},hasFlashPlayerVersion:c,createSWF:function(t,r,q){if(h.w3cdom){return U(t,r,q)}else{return undefined}},removeSWF:function(q){if(h.w3cdom){X(q)}},createCSS:function(r,q){if(h.w3cdom){V(r,q)}},addDomLoadEvent:f,addLoadEvent:R,getQueryParamValue:function(v){var u=K.location.search||K.location.hash;if(v==null){return g(u)}if(u){var t=u.substring(1).split("&");for(var r=0;r<t.length;r++){if(t[r].substring(0,t[r].indexOf("="))==v){return g(t[r].substring((t[r].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(A&&M){var q=C(m);if(q){q.parentNode.replaceChild(M,q);if(l){W(l,true);if(h.ie&&h.win){M.style.display="block"}}M=null;l=null;A=false}}}}}();var connectWindow;var connectCallback=function(){log("not waiting for callback...")};function launchConnectWindow(a,b){cancelConnect();connectCallback=function(c){b(c);connectCallbackComplete();if(c.success&&c.service){clientManager.updateField("current_user","has_"+c.service,true);asyncRequest({call:"populateProfileLinks",content:{service:c.service}})}};connectWindow=window.open(a);return false}function cancelConnect(){connectCallbackComplete()}function connectCallbackComplete(){if(typeof connectWindow!="undefined"){connectWindow.close()}connectCallback=connectCallbackComplete}function setupFacebookService(b,a,c){if(clientManager.current_user.has_facebook){c()}else{setupConnectService(b,a,c)}}function setupTwitterService(b,a,c){if(clientManager.current_user.has_twitter){c()}else{setupConnectService(b,a,c)}}function setupLastFMService(b,a,c){if(clientManager.current_user.has_lastfm){c()}else{setupConnectService(b,a,c)}}function setupConnectService(b,a,c){b.click(function(){launchConnectWindow(a,function(d){if("success" in d){c()}});return false})}function BrowserSettings(){this.errors=[];this.hasFlashEnabled=true;this.hasCorrectFlashVersion=true;this.hasCookiesEnabled=true;this.minFlashVersion=9;this.errors=[];try{this.init()}catch(a){log(a)}}BrowserSettings.prototype.init=function(){var b=swfobject.getFlashPlayerVersion();var a=window.navigator&&window.navigator.platform&&window.navigator.platform.indexOf("Mac")!=-1;if(navigator.userAgent.match("Rhino")){R.NoFlash.init();return}if(!b||b.major==0){this.hasFlashEnabled=false;this.errors.push('<li><a target="_blank" href="http://www.adobe.com/products/flashplayer/">Flash</a> must be installed and enabled on your browser.</li>')}else{if(b.major<this.minFlashVersion){this.hasCorrectFlashVersion=false;this.errors.push('<li>Rdio requires at least <a target="_blank" href="http://www.adobe.com/products/flashplayer/">Flash '+this.minFlashVersion+"</a>.</li>")}else{if(a&&window.player_model&&(b.major==10&&b.minor==0&&b.release==32)){this.hasCorrectFlashVersion=false;this.errors.push('<li>The version of the Adobe Flash Plugin you are using is incompatible with Rdio.  Please <a target="_blank" href="http://www.adobe.com/products/flashplayer/">upgrade to the latest version</a>.</li>')}}}var c="test";$.cookie(c,true);if($.cookie(c)){$.cookie(c,null)}else{this.hasCookiesEnabled=false;this.errors.push('<li>Cookies must be enabled. <a target="_blank" href="http://www.google.com/support/websearch/bin/answer.py?hl=en&answer=35851">Learn how</a></li>')}};BrowserSettings.prototype.getErrors=function(){return this.errors};BrowserSettings.prototype.isValid=function(){return this.errors.length==0};(function(){var f={37:"previous",219:"previous",39:"next",221:"next",32:"playPause"};var e=["INPUT","TEXTAREA","OBJECT","SELECT","OPTION","OPTGROUP"];var d=false;function b(g){return $.inArray(g.tagName.toUpperCase(),e)>=0}function c(g){return g.ctrlKey||g.metaKey||g.altKey}function a(){$(document).keydown(function(g){if(f[g.which]){if(b(g.target)){return}if(c(g)){return}playbackControls[f[g.which]](g);d=true;g.stopPropagation();g.preventDefault()}});$(document).keyup(function(g){if(d){g.stopPropagation();g.preventDefault();d=false}})}$(document).ready(a)})();function getPlayer(){if(!isFlashReady){log("XXX getPlayer called before player ready")}return getSwfObject("player")}var REPEAT_NONE=0;var REPEAT_ONE=1;var REPEAT_ALL=2;var PLAYSTATE_PAUSED=0;var PLAYSTATE_PLAYING=1;var PLAYSTATE_STOPPED=2;var PLAYSTATE_BUFFERING=3;var PLAYSTATE_OFFLINE=4;var player_model={duration:0,repeatMode:REPEAT_NONE,playState:PLAYSTATE_STOPPED,queue:null,playingSource:null,playingTrack:null,sourcePosition:-1,nextTrack:null,volume:0,mute:false,recentlyPlayed:[],userID:null};var usingIE6=false;if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<7&&parseInt(jQuery.browser.version,10)>4){usingIE6=true}function PlayerEventDispatcher(){this._listeners=Array();this.SOURCE_CHANGED=0;this.TRACK_CHANGED=1}PlayerEventDispatcher.prototype={addListener:function(a){if(this._findListener(a)===null){this._listeners.push(a)}},removeListener:function(b){var a=this._findListener(b);if(a){this._listeners.splice(a)}},notifyListeners:function(c,a){for(var b=0;b<this._listeners.length;++b){this._listeners[b].onChange(c,a)}},removeAllListeners:function(){this._listeners=Array()},_findListener:function(b){for(var a=0;a<this._listeners.length;++a){if(b==this._listeners.length){return this._listeners[a]}}return null}};function onPlayTimer(a){slider.setValue((a.position)/player_model.duration*200,true,true,true);$("#playerCurrentTime").html(formatSeconds(Math.floor(a.position)))}function formatSeconds(c){var b=Math.floor(c/60);var d=c%60;if(isNaN(b)){b=0}if(isNaN(d)){d=0}var a=b+":";if(d<=9){a+="0"}return a+d}var isFlashReady=false;var isJSReady=false;var initialized=false;var flashErrorDialog=null;var playingSomewhereElseDialog=null;function initializePlayer(){setTimeout(function(){getPlayer()._sendState()},0);initialized=true}function flashPlayerReady(){log("flashPlayerReady");isFlashReady=true;if(isJSReady){initializePlayer()}if(flashErrorDialog){flashErrorDialog.dialog("close");flashErrorDialog=null}$(window).trigger("flashReady")}function getSessionCookie(){return $.cookie("r")}function playStateChanged(b){if(playingSomewhereElseDialog!==null){playingSomewhereElseDialog.dialog("close");playingSomewhereElseDialog=null}var a=["paused","playing","stopped","buffering","offline"];log("playState: "+a[b]);$.each(a,function(d,c){$("body").removeClass(c)});$("body").addClass(a[b]);window.player_model.playState=b}function playingTrackChanged(c,b){player_model.playingTrack=c;player_model.sourcePosition=b;if(c){$("#playButton").removeClass("disabled");if(usingIE6){$("#playButton").removeClass("playButton_disabled")}$("#playerNowPlayingTitle a").text(c.name);$("#playerNowPlayingArtist a").text(c.artist);$("#playerNowPlayingAlbum a").text(c.album);$("#playerNowPlayingTitle a").attr("href",c.url);$("#playerNowPlayingArtist a").attr("href",c.artistUrl);$("#playerNowPlayingAlbum a").attr("href",c.albumUrl);player_model.duration=c.duration;var a=server_info.is_address+"?m="+c.baseIcon+"&w=180&h=180&ov=1&rc=5,5,0,0";if($("#playerNowPlayingImage").attr("src")!=a){$("#playerNowPlayingImage").attr("src",a)}$("#previousButton").removeClass("disabled");if(usingIE6){$("#previousButton").removeClass("previousButton_disabled")}var e=player_model.playingSource;if(e&&e.tracks&&e.tracks.length>1&&player_model.sourcePosition!==null){$("#player_source_size").html((player_model.sourcePosition+1)+" of "+e.tracks.length)}else{$("#player_source_size").empty()}if(c.can_stream){$("#playerNowPlayingTitle .sample").hide()}else{$("#playerNowPlayingTitle .sample").css("display","block")}}else{$("#playerTitle").text("");player_model.duration=0;$("#playerNowPlayingImage").attr("src",server_info.is_address+"?m=artist/no-artist-image-square.jpg&w=180&h=180&ov=1&rc=5,5,0,0");$("#playerNowPlayingTitle span").hide();$("#playerNowPlayingTitle a").text("");$("#playerNowPlayingArtist a").text("");$("#playerNowPlayingAlbum a").text("");$("#playerNowPlayingTitle a").attr("href","");$("#playerNowPlayingArtist a").attr("href","");$("#playerNowPlayingAlbum a").attr("href","");$("#playButton").addClass("disabled");$("#previousButton").addClass("disabled");if(usingIE6){$("#playButton").addClass("playButton_disabled");$("#previousButton").addClass("previousButton_disabled")}}var d=$.Event("playingTrackChanged");d.track=c;d.sourcePosition=b;$(document).trigger(d)}function playingSourceChanged(b){log("playingSource: "+(b?b:"null"));player_model.playingSource=b;$("#player_source_type_image").removeClass();$("#player_source_bar").removeClass("album playlist feed");if(b){switch(b.type){case"t":$("#player_source_header").text("Now Playing");break;case"a":$("#player_source_header").text(b.name);$("#player_source_type_image").add("#now_playing_header_source_type").addClass("album");break;case"p":$("#player_source_header").text(b.name);$("#player_source_type_image").add("#now_playing_header_source_type").addClass("playlist");break;case"rl":case"al":$("#player_source_header").text(b.name);$("#player_source_type_image").add("#now_playing_header_source_type").addClass("feed");break}if(b.tracks){if(player_model.sourcePosition){$("#player_source_size").html((player_model.sourcePosition+1)+" of "+b.tracks.length)}else{$("#player_source_size").empty()}}else{$("#player_source_size").empty()}}else{$("#player_source_header").text("Idle")}var a=$.Event("playingSourceChanged");a.source=b;$(document).trigger(a)}function volumeChanged(b){player_model.volume=b;var a=$("#volumeSlider");if(!a.hasClass("progressSlider-dragging")){if(a.hasClass("volume_slider_showing")){a.progressSlider({value:player_model.volume,animated:true})}updateVolumeButton()}}function updateVolumeButton(){var a=player_model.volume;if(a>=0.6){$("#volume_button").removeClass()}else{if(a>=0.2){$("#volume_button").removeClass().addClass("half");if(usingIE6){$("#volume_button").removeClass().addClass("volume_button_half")}}else{$("#volume_button").removeClass().addClass("empty");if(usingIE6){$("#volume_button").removeClass().addClass("volume_button_empty")}}}}function muteChanged(a){player_model.mute=a;if(a){volumeChanged(0)}}function positionChanged(a){$("#playerTrackSlider").progressSlider({value:((a>0)?a/player_model.duration:0)});updateTrackSliderLabelValue(a)}function queueChanged(a){log("queueChange: "+a);player_model.queue=a;var b=$.Event("queueChange");b.queue=a;$(document).trigger(b)}function shuffleChanged(a){if(a){$("#shuffle_button").addClass("on");if(usingIE6){$("#shuffle_button").addClass("shuffle_button_on")}}else{$("#shuffle_button").removeClass("on");if(usingIE6){$("#shuffle_button").removeClass("shuffle_button_on")}}}function nextTrackChanged(a){log("nextTrackChanged: "+(a?a:"null"));player_model.nextTrack=a;$("#playerNextTrackContainer").empty();$("#nextButton").attr("title",a?a.name:null);if(player_model.playingSource&&player_model.playingSource.tracks&&player_model.sourcePosition>0){$("#previousButton").attr("title",player_model.playingSource.tracks[player_model.sourcePosition-1].name);$("#previousButton").removeClass("disabled");if(usingIE6){$("#previousButton").removeClass("previousButton_disabled")}}else{$("#previousButton").attr("title",null)}if(a){var b=$("#js_templates .nextTrack").clone(true).appendTo($("#playerNextTrackContainer"));$(".title_text",b).text(a.name);$(".artist_text",b).text(a.artist);$("#nextButton").removeClass("disabled");if(usingIE6){$("#nextButton").removeClass("nextButton_disabled")}}else{$("#nextButton").addClass("disabled");if(usingIE6){$("#nextButton").addClass("nextButton_disabled")}$("#playerNextTrackDisplay").hide();$("#player_source_size").empty()}}function repeatChanged(a){$("#repeat_button").removeClass();switch(a){case REPEAT_ONE:$("#repeat_button").addClass("one");if(usingIE6){$("#repeat_button").addClass("repeat_button_one")}break;case REPEAT_ALL:$("#repeat_button").addClass("on");if(usingIE6){$("#repeat_button").addClass("repeat_button_on")}break}player_model.repeatMode=a}function recentlyPlayedChanged(a){player_model.recentlyPlayed=a}function userIDChanged(a){R.Library.get();log("userIDChanged("+a+")");if(player_model.userID!==null&&player_model.userID!=a){log("userIDChanged to "+a+" in another tab. refreshing page.");window.location=$.history.getCurrent()+"?_="+Math.floor(Math.random()*10000000000)}player_model.userID=a}function playingSomewhereElse(){if(!playingSomewhereElseDialog){playingSomewhereElseDialog=alertDialog("Player Paused","Playback was paused because you started playing from another location. You can resume from this location by clicking play again.")}}var slider,displayQueueButton;function updateTrackSliderLabelValue(a){$("#playerTrackSliderLabelValue").text(formatSeconds(Math.floor(a)));$("#playerTrackSliderLabelTimeLeft").text("-"+formatSeconds(player_model.duration-Math.floor(a)))}function setFlashSettingsVisible(d){var c=$("#player_dialog");function a(e){var g=$("#player");if(e){e=$(e);var f=e.offset();g.css({top:parseInt(f.top,10),left:parseInt(f.left,10)});g.css({width:e.outerWidth(),height:e.outerHeight(),zIndex:20000})}else{g.css({left:-1,top:0,width:1,height:1,zIndex:-2000})}}if(!d){if(c&&c.dialog("isOpen")){c.dialog("close")}}else{if(!c||c.length===0){c=$('<div id="player_dialog"></div>')}var b={draggable:false,modal:true,resizable:false,width:300,height:300,title:"Flash Storage Required",overlay:{background:"white",opacity:1},onOpen:function(e,f){$(document).bind("scroll",function(){a(c)})},onClose:function(e,f){$(document).unbind("scroll",a);a()},buttons:{Close:function(){$(this).dialog("close")}}};openDialog("Flash Storage Required",c,b);a(c)}}function disableScroll(){if($.browser.msie){$("html").css("overflow","hidden")}else{if($.browser.mozilla){}else{$("body").css("overflow","hidden")}}}function enableScroll(){if($.browser.msie){$("html").css("overflow","auto")}else{if($.browser.mozilla){}else{$("body").css("overflow","auto");if($.browser.webkit){var a=$("body").scrollTop();$("body").scrollTop(0);$("body").scrollTop(1);$("body").scrollTop(a)}}}}QuickNowPlaying=function(){var c;var b=false;var a={toggle:function(){if(b){a.hide()}else{a.show()}},hide:function(){if(!b){return}b=false;c.dialog("close");$("#flyout_button").removeClass("depressed");enableScroll()},show:function(){var e,g,f,d;if(b){return}b=true;$("#flyout_button").addClass("depressed");disableScroll();if(c){c.dialog("open")}else{e=$("#js_templates .now_playing_popup_template").clone(true);g=$('<div id="now_playing_dialog" />').append(e);var h=true;d={closeOnEscape:false,width:780,height:400,simple:true,darkOverlay:true,allowOverflow:true,open:function(j,l){if(h){$("#now_playing_dialog").parent().addClass("quick_now_playing_dialog");if(!f){f=new NowPlayingManager("#now_playing_dialog",clientManager.current_user.id)}h=false}f.resetRecentlyPlayed();$(window).bind("resize.quick_now_playing",function(m){setTimeout(a.resize,200);setTimeout(f.onResize,200)});$(window).bind("scroll.quick_now_playing",function(m){setTimeout(a.resize,15)});$(".ui-widget-overlay").bind("click.quick_now_playing.removeOnLoadPageSuccess",a.toggle);$("#p_column").css("z-index",g.parent().css("z-index"));g.parent().css("overflow","");a.resize()},close:function(j,l){$(window).unbind(".quick_now_playing");$(".ui-widget-overlay").unbind(".quick_now_playing")},resize:function(j,l){a.resize(j,l)}};c=g.dialog(d)}},resize:function(){$("#now_playing_dialog").height($(document.body).height()-5);$("#now_playing_dialog").parent().css("position","fixed").css("top","0").css("left",$(document.body).width()/2-290+"px")}};return a}();function setupFirstTime(){var a=$("<div></div>").css("background-image",'url("/media/images/player/empty_player_arrows.png")').css("background-repeat","no-repeat").css("background-position","100% 105%").css("padding","15px 15px 36px");a.append($("<div></div>").css("font-weight","bold").css("font-size","14px").text("Go on, play anything."));a.append($("<div></div>").css("font-size","11px").css("line-height","16px").css("margin-top","6px").css("color","#ACB3B7").html('<span style="font-weight:bold;color:#fff;font-size:12px;">Just click play</span> anywhere on Rdio and your music will show up here. Wherever you go on the site, your music follows, so you never miss a beat.'));$("#playerNowPlayingContainer").hide().before(a);$("#nonPlaybackButtonsContainer").hide();$("#volume_container").hide();var c=$("#inner_container").css("background-position");$("#inner_container").css("background-position","0 0");function b(d){if(!d.track){return}a.hide().remove();$("#inner_container").css("background-position",c);$("#playerNowPlayingContainer,#nonPlaybackButtonsContainer,#volume_container").show();$(document).unbind("playingTrackChanged queueChange",b)}$(document).bind("playingTrackChanged queueChange",b)}var playbackControls={previous:function(){if(!$("#previousButton").hasClass("disabled")){getPlayer()._previous()}},playPause:function(){if($("#pauseButton").css("display")=="none"&&!$("#playButton").hasClass("disabled")){getPlayer()._play()}else{getPlayer()._pause()}},next:function(a){if(!$("#nextButton").hasClass("disabled")){getPlayer()._next(a.ctrlKey||a.metaKey)}}};function setupPlayer(){if(usingIE6){$("#playButton").addClass("play_btn");$("#previousButton").addClass("previous_btn");$("#nextButton").addClass("next_btn");$("#pauseButton").addClass("pause_btn")}$("#nextButton").hover(function(){if(!$("#nextButton").hasClass("disabled")){$("#playerNextTrackDisplay").show()}},function(){$("#playerNextTrackDisplay").hide()});$("#flyout_button").hover(function(){$("#player_source_bar").show()},function(){$("#player_source_bar").hide()});$("#playerTrackSlider").progressSlider({start:function(a){window.seekPlayState=window.player_model.playState;getPlayer()._pause()},stop:function(a){getPlayer()._seek(player_model.duration*a);if(window.seekPlayState==PLAYSTATE_PLAYING){getPlayer()._play()}},click:function(a){getPlayer()._seek(player_model.duration*a)},drag:function(a){updateTrackSliderLabelValue(player_model.duration*a)}});$("#playerTrackSlider").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});$("#playerTrackSliderLabel").appendTo($("#playerTrackSlider .progressSlider-handle"));$("#flyout_button, #player_source_bar").click(QuickNowPlaying.toggle);$("body").click(function(a){if(!a.originalEvent){return}});$("#previousButton").click(playbackControls.previous);$("#playButton").click(playbackControls.playPause);$("#pauseButton").click(playbackControls.playPause);$("#nextButton").click(playbackControls.next);$("#playerTrackSliderLabelValue").add("#playerTrackSliderLabelTimeLeft").click(function(a){$("#playerTrackSliderLabelValue").add("#playerTrackSliderLabelTimeLeft").toggle()});$("#volume_button").click(function(){player_model.mute=!player_model.mute;getPlayer()._setMute(player_model.mute)});$("#volume_container").hoverIntent({sensitivity:1,interval:100,over:function(){$("#volume_tray").animate({opacity:100,width:"100px"},100);$("#volumeSlider").progressSlider({value:player_model.volume});$("#volumeSlider").addClass("volume_slider_showing")},timeout:500,out:function(){$("#volume_tray").animate({opacity:0,width:"1px"},300);$("#volumeSlider").removeClass("volume_slider_showing")}});$("#volumeSlider").progressSlider({click:function(a){getPlayer()._setVolume(a)},start:function(a){this._timer=setInterval(function(){getPlayer()._setVolume(player_model.volume)},300)},drag:function(a){player_model.volume=a;updateVolumeButton()},stop:function(a){if(this._timer){clearInterval(this._timer)}getPlayer()._setVolume(a)}});$("#shuffle_button").click(function(b){var a=!$(this).is(".on");shuffleChanged(a);getPlayer()._setShuffle(a);$("#shuffle_button").addClass("justclicked");if(usingIE6){$("#shuffle_button").addClass("shuffle_button_justclicked")}});$("#shuffle_button").mouseout(function(){$("#shuffle_button").removeClass("justclicked");if(usingIE6){$("#shuffle_button").removeClass("shuffle_button_justclicked")}});$("#clear_queue_button").click(function(a){getPlayer()._clearQueue()});$("#repeat_button").click(function(a){switch(player_model.repeatMode){case REPEAT_NONE:repeatMode=REPEAT_ALL;break;case REPEAT_ALL:repeatMode=REPEAT_ONE;break;case REPEAT_ONE:repeatMode=REPEAT_NONE;break;default:return}repeatChanged(repeatMode);getPlayer()._setRepeat(repeatMode);$("#repeat_button").addClass("justclicked");if(usingIE6){$("#repeat_button").addClass("repeat_button_justclicked")}});$("#repeat_button").mouseout(function(){$("#repeat_button").removeClass("justclicked");if(usingIE6){$("#repeat_button").removeClass("repeat_button_justclicked")}});$(window).bind("beforeunload",function(b){try{getPlayer()._shutdown()}catch(a){}});if(clientManager.current_user&&clientManager.current_user.new_user){setupFirstTime()}isJSReady=true;if(isJSReady&&isFlashReady){initializePlayer()}}$(document).ready(function(){$(window).bind("browserSettingsReady",function(b,a){if(a.hasFlashEnabled&&a.hasCorrectFlashVersion){window.setTimeout(function(){if(!isFlashReady){flashErrorDialog=showRequirementsErrorDialog(["<li>It appears you are using flash blocking software. Please disable it to use rdio, or add www.rdio.com to the whitelist</li>"])}},40000)}})});var _submitElement="";function log(){if(!server_info.debug){return}try{if(window.console){if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)==7){console.log(arguments[0])}else{console.log.apply(console,arguments)}}}catch(a){}}function onlyBrian(){try{if(typeof clientManager=="object"&&typeof clientManager.current_user=="object"&&"id" in clientManager.current_user&&clientManager.current_user.id=="233"){if(arguments&&arguments.length>0&&typeof arguments[0]=="function"){arguments[0]()}else{return true}}}catch(a){}return false}function showRequirementsErrorDialog(c){var b=$("#rdio_requirements ul.error_list");b.html(c.join(""));var a={modal:true};return openDialog("Errors",b,a)}function checkMinimumRequirements(){var d=true;if($.browser.msie&&$.browser.version.indexOf("6.")==0){var c=$("#upgrade_browser");var a={modal:true};openDialog("Unsupported Web Browser",c,a);d=false;return false}var b=new BrowserSettings();$(window).trigger("browserSettingsReady",b);d=b.isValid();if(d==false){showRequirementsErrorDialog(b.getErrors())}else{$("#rdio_requirements ul.error_list").html("")}return d}function ieEncode(a){return encodeURIComponent(a).replace(/%2F/g,"/").replace(/%23/g,"#").replace(/%7C/g,"|").replace(/%3D/g,"=")}$(document).ready(function(){if(!checkMinimumRequirements()){return false}if(window.location.pathname!="/"||window.location.hash!=""||"_" in parseQuerystring(window.location.search)){new_url="/";if(window.location.hash!=""){new_hash=window.location.hash;var a=new_hash;try{a=decodeURIComponent(new_hash)}catch(b){log(b)}if(new_hash!=a){new_hash=a}if($.browser.msie){new_hash=ieEncode(new_hash)}new_url+=new_hash}else{if($.browser.msie){new_url+="#"+window.location.pathname}else{new_url+="#"+decodeURIComponent(window.location.pathname)}}if(window.location.search!=""){qs=parseQuerystring(window.location.search);delete qs._;var c=false;for(k in qs){if(!c){new_url+="?";c=true}new_url+=k+"="+qs[k]}}window.location=window.location.protocol+"//"+window.location.host+new_url}resized();$(window).resize(function(d){resized()});$(window).bind("scroll",keepPlayerVisible);if($("#p_column").length==1){$(window).scroll(function(d){scrollP()})}initialPath=window.location.pathname;initSection=initialPath||"/";$(window).historyadd(function(f,d){log("calling loadPage from .historyadd event");loadPage(d)});$(document).click(function(d){node=d.target;if(node.parentNode&&node.parentNode.nodeName.toLowerCase()=="button"){node=node.parentNode}if((node.nodeName.toLowerCase()=="input"&&(node.type&&node.type.toLowerCase()=="submit"))||node.nodeName.toLowerCase()=="button"){_submitElement=encodeURIComponent(node.name)+"="+encodeURIComponent(node.value)}});$("a").live("click",function(e){if(this.onclick){return true}if(e.button!=0){return false}if(this.target&&this.target=="_blank"){return true}node=this;if($(node).hasClass("play")){return true}var d=$(node).attr("href");if(d&&d.charAt(d.length-1)=="#"){e.preventDefault();return false}else{if($.browser.msie&&$.browser.version<8){var d="/"+this.pathname}else{var d=$(this).attr("href")}$.history.add(d);e.preventDefault();return false}});$("li.has_menu").live("mouseover",function(d){$(this).addClass("hover")}).live("mouseout",function(d){$(this).removeClass("hover")}).live("click",function(d){$(this).removeClass("hover")});$.every("15s",function(){$(".relative_date").relativeTime()});$.manageAjax.create("rdiojax",{queue:"clear"});$("#loading_indicator").bind("ajaxStart",function(){$(this).show()}).bind("ajaxStop",function(){$(this).hide()});loadPage($.history.getCurrent())});function resized(){if($("#p_column").length==1){scrollP();resizeContentArea()}}function resizeContentArea(){if($("#content_area").length==1){var b=$(window).height()-$("#content_area").position().top;var a=$("#p_column").outerHeight(true)-$("#content_area").position().top;if(b<a){b=a}$("#content_area").css({"min-height":b})}}function scrollP(){var d=$("#p_column");var b=$(document.documentElement);var c=b.scrollTop();if(b.height()>d.height()+17+8){if($.browser.msie&&$.browser.version.substr(0,1)=="6"){d.css({top:c})}else{d.css("top",0)}return}var e=-b.scrollTop();var a=b.height()-d.height()-17-8;if(e<a){e=a}c=c+e;if($.browser.msie&&$.browser.version.substr(0,1)=="6"){d.css("top",c)}else{d.css("top",e)}}function wantsEncoded(){var a=$.browser.msie||($.browser.safari&&!/chrome/.test(navigator.userAgent.toLowerCase()));return a}function loadPage(path,form,callback){var method="GET";data="";if(form){data=$(form).serialize();if(_submitElement!=undefined){data+="&"+_submitElement}method="POST";_submitElement=undefined}realPath=$.history.sanitizeCurrent(path);var startPath=window.location.protocol+"//"+window.location.host;if(realPath&&realPath.length>0&&realPath.substring(0,startPath.length)!=startPath){if(realPath.charAt(0)!="/"){realPath="/"+realPath}if(!wantsEncoded()){realPath=startPath+realPath.replace(/%/gi,"%25").replace(/\\/gi,"%5C")}else{realPath=startPath+realPath}}log("about to load: ",realPath);$.manageAjax.add("rdiojax",{type:method,url:realPath,data:data,dataType:"json",beforeSend:function(){if(typeof QuickNowPlaying!=="undefined"){QuickNowPlaying.hide()}$("#container").loading()},complete:function(){$("#container").loading({hide:true});if(callback&&callback.onSuccess){callback.onSuccess()}},success:function(o){onPageLoadSuccess(o,path)},error:function(x,text,error){log("Error in loadPage, falling back to text");var result;try{result=eval("("+x.responseText+")")}catch(e){log("Error parsing json in loadPage",e)}if(result&&"message" in result){$("#content").html('<div style="padding:10px;color:#000;font-family:courier;background:#fff;">'+result.message.replace(/\n/g,"<br/>")+"</div>")}else{$("#content").html(x.responseText)}if(callback&&callback.onError){callback.onError()}},cache:false})}function onPageLoadSuccess(m,l){if(!window.isFlashReady){log("onPageLoadSuccess: deferring page load until flash ready");$(window).bind("flashReady",function(){onPageLoadSuccess(m,l)});return}$(document).trigger("pageLoad");$(document).unbind("pageLoad");$(window).unbind(".removeOnLoadPageSuccess");if(m.force_reload){log("forced reload");if(m.redirect_to){window.location="http://"+window.location.host+m.redirect_to+"?_="+Math.floor(Math.random()*10000000000);return}}if(!m){return}if(m.content){if(m.resource_versions){var f=false;for(k in m.resource_versions){if(resourceVersions[k]==null||resourceVersions[k]!=m.resource_versions[k]){$(window).trigger("resourceOutOfDate",k);f=true;break}}}if(f){return}processNewContent(m.content)}if(m.bgTemplate){R.BG.render(m.bgTemplate,m,function(n,e){$("#content").html(e)})}if(m.js_updates){for(key in m.js_updates){try{var b=m.js_updates[key];for(subkey in b){try{clientManager.updateField(key,subkey,b[subkey])}catch(d){}}}catch(g){log(g)}}}if(m.redirect_to){log("Found redirect_to in onPageLoadSuccess");if(m.redirect_to.indexOf("http")==0){log("Doing weird redirect");window.location=m.redirect_to;return}redirectUrl=m.redirect_to;currentUrl=$.history.getCurrent();if(redirectUrl==currentUrl){var c=1000000;redirectUrl+="?cbust="+Math.random()*c}var j=false;if(m.flush_last||"content" in m&&m.content.flush_last){log("Will attempt to flush last history entry");j=true}$.history.add(redirectUrl,j);return}if(m.title){document.title=$.t.deEscape(m.title)+" - Rdio"}else{document.title="Rdio"}if(typeof pageTracker!="undefined"){pageTracker._trackPageview(l)}$(document).scrollTop(0);var h=$.history.getSubhistoryParams(l);for(key in h){$.event.trigger("subhistory",[key,h[key]])}if(navigator.userAgent.match("Rhino")){var a=document.createEvent("HTMLEvents");a.initEvent("contentFinal",true,true);document.dispatchEvent(a)}}function processNewContent(c){var b,d;for(k in c){b=$("#"+k);d=b.css("visibility");b.css("visibility","hidden");b.html(c[k]);processAddedNodes(b);b.css("visibility",d);if(k=="djDebug"){try{jQuery.djDebug()}catch(a){log(a)}}if(k=="your_header_links"){try{if("invite_count" in clientManager.current_user){clientManager.updateField("current_user","invite_count",clientManager.current_user.invite_count)}}catch(a){}}}resizeContentArea()}function processAddedNodes(a){$(".relative_date",$(a)).relativeTime();$("select:not(.unpretty,.one_line)",$(a)).selectSuspenders();convertOneLineSelects($("select.one_line",$(a)));$("button.button, a.button",$(a)).wrapInner("<span />")}function postForm(a,c){try{loadPage(a.action,a,c)}catch(b){log(b)}}function asyncRequest(a){method=a.method||"GET";format=a.format||"json";url="/api/"+format+"/"+a.call+"/";if(a.template){a.content=a.content||{};a.content.bgTemplate=a.template}if(a.success){a.successCallback=a.success;delete a.success}opts={type:method,url:url,data:a.content,dataType:"json",success:function(c){try{if(a.successCallback){if(a.template){R.BG.render(a.template,c,a.successCallback,a.content)}else{a.successCallback(c)}}}catch(b){log(b)}},cache:false};$.extend(opts,a);if(a.shieldElement){opts.beforeSend=function(){$(a.shieldElement).loading()};opts.complete=function(){$(a.shieldElement).loading({hide:true})}}return $.ajax(opts)}function refreshHeader(){$.ajax({type:"GET",url:"/accounts/refreshheader/",dataType:"json",success:function(a){try{if(a.content){processNewContent(a.content)}}catch(b){log(b)}},error:function(a,c,b){log("in failure callback - json parse failure"+a.responseText)},cache:false});log("refreshHeader()")}email_validator=/[a-zA-Z0-9._%+-]+@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,4}/i;function isEmail(a){return a.match(email_validator)}function parseQuerystring(a){var b={};var c=a.substring(a.indexOf("?")+1);if(c==""){return b}c=c.replace(/\&$/,"");$.each(c.split("&"),function(e,d){var h=d.split("=");var f=h[0];var g=h[1];if(/^[0-9.]+$/.test(g)){g=parseFloat(g)}if(typeof g=="number"||(g&&g.length>0)){b[f]=g}});return b}function getSwfObject(a){if(navigator.appName.indexOf("Microsoft")!=-1){return window[a]}else{return document[a]}}function keepPlayerVisible(){var a=$(document).scrollTop();var b=$(document).scrollLeft();$("#player").css({top:a,left:b})}$(window).bind("resourceOutOfDate",function(a){document.location.reload()});function convertOneLineSelects(a){if(a.length==0){return}a.each(function(){var c=$(this);c.hide();var b=$("<span />").addClass("one_line_select");$("option",c).each(function(){var d=$("<span />").addClass("select_item").text($(this).text()).data("val",$(this).val());d.click(function(e){if(c.val()==$(this).data("val")){return}c.val($(this).data("val"));$("span",b).removeClass("selected");$(this).addClass("selected");c.change()});if($(this).is(":selected")){d.addClass("selected")}b.append(d)});$("span:first-child",b).addClass("first_child");$("span:last-child",b).addClass("last_child");b.insertAfter(c)})}function artistRelatedListMoreOrLess(e){var c=$(e);var d=c.parent().parent();var a=d.find(".ellipsis");if(d.length==0){return}var b=d.find("span:not(.more_or_less,.ellipsis)");if(c.text()=="show more"){c.text("show less");c.addClass("less");d.slideUp(function(){d.find("a").show();b.show();a.hide();d.slideDown()})}else{c.text("show more");c.removeClass("less");d.slideUp(function(){d.find("a").hide();d.find("a:lt(10)").show();b.hide();b.filter(":lt(9)").show();a.show();d.slideDown()})}}function artistRelatedListLoadAll(a,e,b){var c=$(e);var d=c.parent().parent();d.slideUp();asyncRequest({call:"getArtistListForArtist",content:{id:a,list_type:b},success:function(f){d.html(f);d.slideDown()}})}function infoGroupMoreOrLess(b){$(b).children().toggle();var a=$(b).closest(".info_group");a.find(".continued").toggle();a.find(".ellipsis").toggle()}jQuery.httpData=function(f,d,c){var b=f.getResponseHeader("content-type")||"",a=d==="xml"||!d&&b.indexOf("xml")>=0,e=a?f.responseXML:f.responseText;if(a&&e.documentElement.nodeName==="parsererror"){throw"parsererror"}if(c&&c.dataFilter){e=c.dataFilter(e,d)}if(typeof e==="string"){if(d==="json"||!d&&b.indexOf("json")>=0){e=(new Function("return "+e))()}}return e};function showLoginRequired(){if(clientManager.current_user.self_invite_email){signupCheckEmail()}else{signupPromptDialog()}}(function(b){b.fn.play=function(c){return this.each(function(){$this=b(this);$this.addClass("play_"+c.type);if(c.type=="r"){$this.addClass("play_tr")}if(this.nodeName=="a"){$this.attr("pid",c.id)}else{$this.val(c.id)}if("secondary_id" in c){$this.attr("uid",c.secondary_id)}if(c.type=="t"||c.type=="a"){if(!c.can_stream&&c.can_sample){$this.addClass("preview")}else{if(!c.can_stream&&!c.can_sample){$this.addClass("disabled")}}}if($this.closest("a").length!=0){$this.click(a)}})};var a=function(e){if(clientManager.current_user.id==-1){showLoginRequired();return false}var f=b(e.target);if(e.target.nodeName!="BUTTON"&&e.target.nodeName!="A"){f=f.closest("a")}if(f.hasClass("disabled")){return false}if(f.attr("pid")){var c=f.attr("pid")}else{var c=f.val()}if(e.metaKey||e.ctrlKey){getPlayer()._enqueueCurrentSource()}var g={id:c};if(f.hasClass("play_a")){g.type="a"}else{if(f.hasClass("play_p")){g.type="p"}else{if(f.hasClass("play_rl")){g.type="rl";g.secondary_id=f.attr("uid")}else{if(f.hasClass("play_al")){g.type="al";g.secondary_id=f.attr("uid")}else{if(f.hasClass("play_rr")){g.type="rr"}else{if(f.hasClass("play_tr")){g.type="tr"}else{var h=f.closest(".playable_source_container");if(h.length==1){var d=h.attr("stype");switch(d){case"p":case"a":case"tr":g.type=d;g.id=h.attr("sid");g.initial_offset=f.attr("sindex");break;default:log(d," was an unknown source_type inside play.js");g.type="t"}}else{g.type="t"}}}}}}}getPlayer()._playSource(g);e.preventDefault();return false};b(document).ready(function(){b("button.play, a.play").live("click",a)})})(jQuery);function setDisplay(b,c){var a=$(c);if(a.hasClass("active")){return}$("#"+b).toggleClass("tile");$(".list",a.parent().get(0)).toggleClass("active");$(".tile",a.parent().get(0)).toggleClass("active")}R.Library=function(){var a={version:-1};return{get:function(){getPlayer()._getLibrary()},add:function(c,b){getPlayer()._addToLibrary(c,b)},remove:function(c,b){getPlayer()._removeFromLibrary(c,b)},contains:function(e,d){var c,b;if(a[e]){b=d.length;for(c=0;c<b;c++){if(a[e][d[c]]){return true}}return false}else{log("slow library fetch!");return getPlayer()._isInLibrary(e,d)}},loaded:function(c){var e,d,b;log("loaded lib version "+c.version);if(c.version==a.version){log("loaded lib version was not new!");return}for(e in c){if(c.hasOwnProperty(e)){b=c[e].length;if(b>=0){a[e]={};for(d=0;d<b;d++){a[e][c[e][d]]=true}}else{a[e]=c[e]}}}},reset:function(){log("Library was resynched, updating tracks on page.");$(".menu.cluster_button").each(function(b){var d=$(this);var c=$.map($(this).attr("class").split(" "),function(e,f){if(e.charAt(0)=="t"){return Number(e.substring(1))}return null});$.each(c,function(f,e){if(R.Library.contains("t",[e+0])){d.addClass("checkmark")}else{d.removeClass("checkmark")}})})},membershipChanged:function(f,e,h){var d;var g=f;var c=e.length;log("received library membership changed");if(!a[f]){a[f]={}}for(d=0;d<c;d++){a[f][e[d]]=h}if(f[0]=="o"){g=f.substr(1)}var b=$.map(e,function(l,j){return"."+g+l}).join(",");$(b).each(function(l){var m=h;if($(this).hasClass("album")){var j=$.map($(this).attr("class").split(" "),function(n,o){if(n.charAt(0)=="t"){return Number(n.substring(1))}return null});if(R.Library.contains(f,j)){m=true}else{m=false}}if(m){if(f=="t"||f=="p"){$(this).addClass("checkmark")}else{if(f=="ot"||f=="op"){$(this).parents(".emblems, .menu_holder, .overlay").addClass("has_offline")}}}else{if(f=="t"||f=="p"){$(this).removeClass("checkmark")}else{if(f=="ot"||f=="op"){$(this).parents(".emblems, .menu_holder, .overlay").removeClass("has_offline")}}}})}}}();var libraryReset=R.Library.reset;var libraryMembershipChanged=R.Library.membershipChanged;var libraryLoaded=R.Library.loaded;function follow(a,b,c){asyncRequest({call:"addFriend",content:{id:a},success:function(d){c.parents(".person_item").addClass("is_following");$.jGrowl("You are now following "+b,{theme:"person_following"})}})}function unfollow_confirm_show_hide(a){var b=$(a);if(b.hasClass("confirm")){b.removeClass("confirm");b.find("a").hide()}else{b.addClass("confirm");b.find("a").show()}}function unfollow(a,b,c){asyncRequest({call:"removeFriend",content:{id:a},success:function(d){c.parents(".person_item").removeClass("is_following");$.jGrowl("You are no longer following "+b,{theme:"person_unfollowing"});unfollow_confirm_show_hide(c.closest(".unfollow"))}})}function showAddToPlaylistDialog(a){getPlaylists(function(j){if(j.owned.length!=0||j.collaborations.length!=0){var l=j.owned.length!=0&&j.collaborations.length!=0;var m='<select id="playlistSelection" onchange="onAddToPlaylistSelectionChanged()">';var d="";$.each(j.owned,function(o){d+='<option value="'+this.id+'">'+this.name+"</option>"});var b="";$.each(j.collaborations,function(o){b+='<option value="'+this.id+'">'+this.name+"</option>"});if(l){d='<optgroup label="My Playlists">'+d+"</optgroup>";b='<optgroup label="My Collaborations">'+b+"</optgroup>"}if(j.latest=="collaborations"){m+=b+d}else{m+=d+b}var d=$('<div id="My_Playlists">').append(m);var f=true}var g=$('<div id="Create_Playlist">').append($('<div class="errors error_message" style="margin-bottom:5px;display:none;"></div>')).append($("<div></div>").append($('<input type="text" title="Title" class="textInput" id="playlistName" />')).append($('<textarea class="textInput" id="playlistDescription" title="Description"></textarea>')));var h={Create:function(){$(this).find(".errors").text("").hide();desc=$("#playlistDescription").val();if(desc=="Description"){desc=""}createPlaylist($("#playlistName").val(),desc,a,function(o){if(o){$("#add_to_playlist_dialog").dialog("close")}else{$("#add_to_playlist_dialog").find(".errors").text("Error creating playlist, please try again").show()}})},Cancel:function(){e.dialog("close").dialog("destroy")}};var c={Add:function(){playlistID=$("#playlistSelection").val();var o=$("#playlistSelection")[0].selectedIndex;var p=$("#playlistSelection option:eq("+o+")").text();addToPlaylist(playlistID,p,a);$(this).dialog("close")},Cancel:function(){e.dialog("close").dialog("destroy")}};var e=$('<div id="add_to_playlist_dialog">').appendTo($(document.body));if(f){e.append('<ul><li><a href="#My_Playlists"><span>My Playlists</span></a></li><li><a href="#Create_Playlist"><span>Create Playlist</span></a></li></ul>');e.append(d)}e.append(g);if(f){e.tabs({select:function(o,p){if(p.panel.id=="Create_Playlist"){$(this).dialog("option","buttons",h)}else{$(this).dialog("option","buttons",c)}}})}var n=R.truncate(a.name,30);e.dialog({title:"Add "+n+" to",buttons:f?c:h,width:357,close:function(p,o){$(this).dialog("destroy").remove()},onOpen:function(){$("#playlistDescription, #playlistName").overlabel()}})})}function onAddToPlaylistSelectionChanged(){val=$("#playlistSelection").val();if(val=="n"){$("#createNewPlaylistPanel").css("display","block")}else{$("#createNewPlaylistPanel").css("display","none")}}function createPlaylist(a,b,c,d){asyncRequest({call:"createPlaylist",method:"POST",content:{name:a,song:c.id,description:b},success:function(e){if(d){d(e)}}})}function deletePlaylist(b,a){asyncRequest({call:"deletePlaylist",method:"POST",content:{id:b},success:function(c){a(c)}})}function getPlaylists(a){asyncRequest({call:"getPlaylists",content:{simple:true},success:function(b){a(b)}})}function addToPlaylist(c,a,b){asyncRequest({call:"addToPlaylist",content:{id:c,song:b.id},success:function(d){if(d){$.jGrowl('"'+R.truncate(b.name,20)+'" was added to the playlist '+a,{theme:"playlist_added"});log(d)}}})}function addToPlaylistAndRender(c,a,b){asyncRequest({call:"addToPlaylistAndRender",content:{id:c,song:a},success:function(d){if(b){b(d)}}})}function setPlaylistCollaborationMode(b,a){asyncRequest({call:"setPlaylistCollaborationMode",content:{id:b,mode:a}})}function startPlaylistCollaboration(a){asyncRequest({call:"startPlaylistCollaboration",content:{id:a}})}function stopPlaylistCollaboration(a){asyncRequest({call:"stopPlaylistCollaboration",content:{id:a}})}function renumberTracks(){$(".playlist_song_list .track_container").each(function(a){$(".index",this).find("button").attr("sindex",a).end().find("span").text(a+1)})}function setupPlaylistManagement(o,n,r,u,p){if(!n&&!r){return}var j=$("#content .main_content");var e=$(".playlist_header",j);var v=$(".playlist_edit_header",j);var d=$(".playlist_song_list",j);var f=$(".content_sidebar",j);var l=$(".playlist_add_songs",j);v.show();d.addClass("no_top_border");$(".edit_button",v).click(function(x){if(d.hasClass("editable")){d.removeClass("editable");d.removeClass("removable");d.sortable("destroy");$("#searchInput_addsongs").autocomplete();$(this).find("span").text("edit");if($.browser.msie){l.hide()}else{l.slideUp()}}else{makePlaylistEditable(o,n,p);$(this).find("span").text("done")}return false});$("#searchInput_addsongs").overlabel();var m=13;var g="/api/json/search/";$("#searchInput_addsongs").autocomplete(g,{dataType:"json",resultsClass:"addsongs_results",loadingClass:"addsongs_loading",scroll:false,selectFirst:false,minChars:2,width:483,cacheLength:10,mustContain:true,autohide:false,extraParams:{query:function(){return s()}},parse:function(z){var y=new Array();for(var x=0;x<z.length;x++){y[x]={data:z[x],value:z[x].name}}return y},formatItem:function(z,x,A){var y="";if(z.type=="t"){var y="<span class='searchSuggestionArtist'>"+z.artist+"</span>";y+=" &ndash; "+z.name;y+="<span class='playlistAddSong' sid='"+z.id+"'></span>"}return y}}).result(function(x,z,y){if(z&&z.id){$("div.addsongs_results ul li span.playlistAddSong[sid="+z.id+"]").parent().addClass("added");addToPlaylistAndRender(o,z.id,function(A){d.append($('<div class="track_container clearfix" />')).find(".track_container:last-child").html(A);d.find(".track_container:last-child .remove").click(removeFromPlaylist);processAddedNodes(d);renumberTracks();log("adding to displayed playlist")})}x.preventDefault();return false}).no_result_submit(function(x){log("nothing selected")});function s(){var x=$("#searchInput_addsongs").val();if(x&&x.length){return x.replace(/^\s+|\s+$/g,"")}return""}if(n){var a=$(".editable_name");var h="";var w={submit:"Save",width:400,data:function(y,x){return $.t.deEscape(y)},onedit:function(){$("+.edit_icon",this).addClass("hidden");h=a.text()},onreset:function(){$("+.edit_icon",this.parent()).removeClass("hidden")},defaultPlugin:function(A,z){var x=$("button",z);x.hide();var y=$("<a><span>save</span></a>");y.addClass("button large_button default_button");y.click(function(){$(this).parent().submit();return false});$("form",z).append(y)}};f.find(".delete").show().click(function(y){var z=$('<div id="delete_playlist_dialog">').appendTo($(document.body));z.append($('<div class="errors error_message" style="margin-bottom:5px;display:none;"></div>'));z.append('Are you sure you want to delete the playlist "'+$(".editable_name").text()+'"?');var x={Delete:function(){deletePlaylist(o,function(A){var B=$("#delete_playlist_dialog");if(A){B.dialog("close");$.history.add(p)}else{B.find(".errors").text("Error deleting playlist, please try again").show()}})},Cancel:function(){z.dialog("close").dialog("destroy")}};z.dialog({title:"Delete Playlist",buttons:x,width:357,close:function(B,A){$(this).dialog("destroy").remove()}})});e.addClass("deletable");e.hover(function(x){$(".edit_icon",this).show()},function(x){$(".edit_icon",this).hide()});f.addClass("deletable");a.editable(function(y,x){asyncRequest({call:"savePlaylistName",method:"POST",content:{id:o,name:y},success:function(z){if(z==false){a.text(h)}}});$("+.edit_icon",this).removeClass("hidden");return y},w);$("+.edit_icon",a).click(function(){$(a).click()});var b="";var q=$(".editable_description");var c={submit:"Save",width:"100%",type:"textarea",data:function(y,x){return $.t.deEscape($.trim(y.replace(/<br[\s\/]?>/gi,"\n")))},defaultPlugin:function(A,z){$("textarea",z).autoResize();var x=$("button",z);x.hide();var y=$("<a><span>save</span></a>");y.addClass("button default_button");y.click(function(){$(this).parent().submit();return false});$("form",z).append(y)},onedit:function(){$("+.edit_icon",this).addClass("hidden");h=q.text()},onreset:function(){$("+.edit_icon",this.parent()).removeClass("hidden")}};q.editable(function(y,x){asyncRequest({call:"savePlaylistDescription",method:"POST",content:{id:o,description:y},success:function(z){if(z==false){q.text(b)}}});$("+.edit_icon",this).removeClass("hidden");return y.replace(/\n/g,"<br/>")},c);$("+.edit_icon",q).click(function(){$(q).click()});$("#collaboration_checkbox").click(function(x){if($(this).is(":checked")){$("#collaboration_settings").show();setPlaylistCollaborationMode(o,$("#collaboration_mode_select").val())}else{$("#collaboration_settings").hide();setPlaylistCollaborationMode(o,0)}});$("#collaboration_mode_select").change(function(x){setPlaylistCollaborationMode(o,$(this).val())})}if(r&&!n){$("#participate_checkbox").click(function(x){if($(this).is(":checked")){startPlaylistCollaboration(o);$(".playlist_edit_buttons").show()}else{stopPlaylistCollaboration(o);$(".playlist_edit_buttons").hide();if(d.hasClass("editable")){$(".edit_button",v).click()}}});$("#participate_checkbox").attr("checked",u);if(!u){$(".playlist_edit_buttons").hide()}}}function makePlaylistEditable(e,c,a){var d=$(".playlist_song_list");d.addClass("editable");d.sortable({axis:"y",stop:function(f){new_ordering=new Array();$(".track_container",this).each(function(g){new_ordering.push($(".play",this).val());renumberTracks()});asyncRequest({call:"savePlaylistOrder",method:"POST",content:{id:e,order:new_ordering}})}});var b=$(".playlist_add_songs");b.slideDown();d.addClass("removable");$(".playlist_song_list .remove").click(removeFromPlaylist)}var removingTrack=false;function removeFromPlaylist(){if(removingTrack){return}removingTrack=true;var b=$(this).closest(".track_container");var a=$.trim($(".index span",b).text())-1;var c=b.closest(".playlist_song_list");var d=c.attr("sid");asyncRequest({call:"removeFromPlaylist",content:{id:d,idx:a}});$(b).slideUp(function(){$(b).remove();renumberTracks();removingTrack=false})}(function(a){a.fn.extend({autocomplete:function(b,c){var d=typeof b=="string";c=a.extend({},a.Autocompleter.defaults,{url:d?b:null,data:d?null:b,delay:d?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150,wrapKeyboardNav:false},c);c.highlight=c.highlight||function(e){return e};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},no_result_submit:function(b){return this.bind("no_result_submit",b)},result:function(b){return this.bind("result",b)},search:function(b){return this.trigger("search",[b])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(b){return this.trigger("setOptions",[b])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(n,g){var c={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var b=a(n).attr("autocomplete","off").addClass(g.inputClass);var l;var r="";var o=a.Autocompleter.Cache(g);var e=0;var x;var A={mouseDownOnSelect:false};var u=a.Autocompleter.Select(g,n,d,A);var z;a.browser.opera&&a(n.form).bind("submit.autocomplete",function(){if(z){z=false;return false}});b.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(B){x=B.keyCode;switch(B.keyCode){case c.UP:B.preventDefault();if(u.visible()){u.prev()}else{w(0,true)}break;case c.DOWN:B.preventDefault();if(u.visible()){u.next()}else{w(0,true)}break;case c.PAGEUP:B.preventDefault();if(u.visible()){u.pageUp()}else{w(0,true)}break;case c.PAGEDOWN:B.preventDefault();if(u.visible()){u.pageDown()}else{w(0,true)}break;case g.multiple&&a.trim(g.multipleSeparator)==","&&c.COMMA:case c.RETURN:if(d()){B.preventDefault();z=true;return false}else{y();b.trigger("no_result_submit")}break;case c.ESC:u.hide();break;default:clearTimeout(l);l=setTimeout(w,g.delay);break}}).focus(function(){e++}).blur(function(){e=0;if(!A.mouseDownOnSelect){v()}}).click(function(){if(e++>1&&!u.visible()&&u.hasItems){w(0,true)}}).bind("search",function(){var B=(arguments.length>1)?arguments[1]:null;function C(G,F){var D;if(F&&F.length){for(var E=0;E<F.length;E++){if(F[E].result.toLowerCase()==G.toLowerCase()){D=F[E];break}}}if(typeof B=="function"){B(D)}else{b.trigger("result",D&&[D.data,D.value])}}a.each(h(b.val()),function(D,E){f(E,C,C)})}).bind("flushCache",function(){o.flush()}).bind("setOptions",function(){a.extend(g,arguments[1]);if("data" in arguments[1]){o.populate()}}).bind("unautocomplete",function(){u.unbind();b.unbind();a(n.form).unbind(".autocomplete")});function d(){var C=u.selected();if(!C){return false}var B=C.result;r=B;if(g.multiple){var D=h(b.val());if(D.length>1){B=D.slice(0,D.length-1).join(g.multipleSeparator)+g.multipleSeparator+B}B+=g.multipleSeparator}b.val(B);if(g.autohide){y()}b.trigger("result",[C.data,C.value]);return true}function w(D,C){if(x==c.DEL){u.hide();return}var B=b.val();if(!C&&B==r){return}r=B;B=j(B);if(B.length>=g.minChars){b.addClass(g.loadingClass);if(!g.matchCase){B=B.toLowerCase()}f(B,m,y)}else{p();u.hide()}}function h(C){if(!C){return[""]}var D=C.split(g.multipleSeparator);var B=[];a.each(D,function(E,F){if(a.trim(F)){B[E]=a.trim(F)}});return B}function j(B){if(!g.multiple){return B}var C=h(B);return C[C.length-1]}function s(B,C){if(g.autoFill&&(j(b.val()).toLowerCase()==B.toLowerCase())&&x!=c.BACKSPACE){b.val(b.val()+C.substring(j(r).length));a.Autocompleter.Selection(n,r.length,r.length+C.length)}}function v(){clearTimeout(l);l=setTimeout(y,200)}function y(){var B=u.visible();u.hide();clearTimeout(l);p();if(g.mustMatch){b.search(function(C){if(!C){if(g.multiple){var D=h(b.val()).slice(0,-1);b.val(D.join(g.multipleSeparator)+(D.length?g.multipleSeparator:""))}else{b.val("")}}})}if(B){a.Autocompleter.Selection(n,n.value.length,n.value.length)}}function m(C,B){if(B&&B.length&&e){p();u.display(B,C);s(C,B[0].value);u.show()}else{y()}}function f(C,E,B){if(!g.matchCase){C=C.toLowerCase()}var D=o.load(C);if(D&&D.length){E(C,D)}else{if((typeof g.url=="string")&&(g.url.length>0)){var F={timestamp:+new Date()};a.each(g.extraParams,function(G,H){F[G]=typeof H=="function"?H():H});a.ajax({mode:"abort",port:"autocomplete"+n.name,dataType:g.dataType,url:g.url,data:a.extend({q:j(C),limit:g.max},F),success:function(H){var G=g.parse&&g.parse(H)||q(H);o.add(C,G);E(C,G);u.hasItems=H&&H.length}})}else{u.emptyList();B(C)}}}function q(E){var B=[];var D=E.split("\n");for(var C=0;C<D.length;C++){var F=a.trim(D[C]);if(F){F=F.split("|");B[B.length]={data:F,value:F[0],result:g.formatResult&&g.formatResult(F,F[0])||F[0]}}}return B}function p(){b.removeClass(g.loadingClass)}};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(b){return b[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",autohide:true,matchZIndex:false,highlight:function(c,b){return c.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};a.Autocompleter.Cache=function(c){var f={};var d=0;function h(m,l){if(!c.matchCase){m=m.toLowerCase()}var j=m.indexOf(l);if(j==-1){return false}return j==0||c.matchContains}function g(l,j){if(d>c.cacheLength){b()}if(!f[l]){d++}f[l]=j}function e(){if(!c.data){return false}var l={},j=0;if(!c.url){c.cacheLength=1}l[""]=[];for(var n=0,m=c.data.length;n<m;n++){var q=c.data[n];q=(typeof q=="string")?[q]:q;var p=c.formatMatch(q,n+1,c.data.length);if(p===false){continue}var o=p.charAt(0).toLowerCase();if(!l[o]){l[o]=[]}var r={value:p,data:q,result:c.formatResult&&c.formatResult(q)||p};l[o].push(r);if(j++<c.max){l[""].push(r)}}a.each(l,function(s,u){c.cacheLength++;g(s,u)})}setTimeout(e,25);function b(){f={};d=0}return{flush:b,add:g,populate:e,load:function(n){if(!c.cacheLength||!d){return null}if(!c.url&&c.matchContains){var m=[];for(var j in f){if(j.length>0){var o=f[j];a.each(o,function(q,p){if(h(p.value,n)){m.push(p)}})}}return m}else{if(f[n]){return f[n]}else{if(c.matchSubset){for(var l=n.length-1;l>=c.minChars;l--){var o=f[n.substr(0,l)];if(o){var m=[];a.each(o,function(q,p){if(h(p.value,n)){m[m.length]=p}});return m}}}}}return null}}};a.Autocompleter.Select=function(f,m,o,s){var l={ACTIVE:"ac_over"};var n,g=-1,v,p="",w=true,c,r,e=false;function q(){if(!w){return}c=a("<div/>").hide().addClass(f.resultsClass).css("position","absolute").appendTo(document.body);r=a("<ul/>").appendTo(c).mouseover(function(x){if(u(x).nodeName&&u(x).nodeName.toUpperCase()=="LI"){g=a("li",r).removeClass(l.ACTIVE).index(u(x));a(u(x)).addClass(l.ACTIVE)}}).click(function(x){a(u(x)).addClass(l.ACTIVE);o();m.focus();return false}).mousedown(function(){s.mouseDownOnSelect=true}).mouseup(function(){s.mouseDownOnSelect=false});if(f.width>0){c.css("width",f.width)}if(f.matchZIndex){c.css("z-index",a(m).css("z-index")-1)}w=false}function u(y){var x=y.target;while(x&&x.tagName!="LI"){x=x.parentNode}if(!x){return[]}return x}function j(x){n.slice(g,g+1).removeClass(l.ACTIVE);h(x);var z=n.slice(g,g+1).addClass(l.ACTIVE);if(f.scroll){var y=0;n.slice(0,g).each(function(){y+=this.offsetHeight});if((y+z[0].offsetHeight-r.scrollTop())>r[0].clientHeight){r.scrollTop(y+z[0].offsetHeight-r.innerHeight())}else{if(y<r.scrollTop()){r.scrollTop(y)}}}}function h(x){g+=x;if(f.wrapKeyboardNav){if(g<=-1){g=n.size()-1}else{if(g>=n.size()){g=0}}}else{if(x<0&&g<0){if(g==0){g+=x}else{if(g<=-1){g=-1;return}}}else{if(x>0&&(g>=n.size())){g=n.size()-1}}}}function b(x){return f.max&&f.max<x?f.max:x}function d(){r.empty();var y=b(v.length);for(var z=0;z<y;z++){if(!v[z]){continue}var A=f.formatItem(v[z].data,z+1,y,v[z].value,p);if(A===false){continue}var x=a("<li/>").html(f.highlight(A,p)).addClass(z%2==0?"ac_even":"ac_odd").appendTo(r)[0];a.data(x,"ac_data",v[z])}n=r.find("li");if(f.selectFirst){n.slice(0,1).addClass(l.ACTIVE);g=0}if(a.fn.bgiframe){r.bgiframe()}}return{display:function(y,x){q();v=y;p=x;d()},next:function(){j(1)},prev:function(){j(-1)},pageUp:function(){if(g!=0&&g-8<0){j(-g)}else{j(-8)}},pageDown:function(){if(g!=n.size()-1&&g+8>n.size()){j(n.size()-1-g)}else{j(8)}},hide:function(){c&&c.hide();n&&n.removeClass(l.ACTIVE);g=-1},visible:function(){return c&&c.is(":visible")},current:function(){return this.visible()&&(n.filter("."+l.ACTIVE)[0]||f.selectFirst&&n[0])},show:function(){function B(E,D){return E>D?E-D:D-E}var C=a(m).offset();var z=typeof f.width=="string"||f.width>0?f.width:a(m).width();var A=f.alignRight?C.left-(B(z,a(m).outerWidth())):C.left;c.css({width:z,top:C.top+m.offsetHeight,left:A}).show();if(f.scroll){r.scrollTop(0);r.css({maxHeight:f.scrollHeight,overflow:"auto"});if(a.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var x=0;n.each(function(){x+=this.offsetHeight});var y=x>f.scrollHeight;r.css("height",y?f.scrollHeight:x);if(!y){n.width(r.width()-parseInt(n.css("padding-left"))-parseInt(n.css("padding-right")))}}}},selected:function(){var x=n&&n.filter("."+l.ACTIVE).removeClass(l.ACTIVE);return x&&x.length&&a.data(x[0],"ac_data")},emptyList:function(){r&&r.empty()},unbind:function(){c&&c.remove()}}};a.Autocompleter.Selection=function(f,g,c){if(f.createTextRange){var b=f.createTextRange();b.collapse(true);b.moveStart("character",g);b.moveEnd("character",c);b.select()}else{if(f.setSelectionRange){f.setSelectionRange(g,c)}else{if(f.selectionStart){f.selectionStart=g;f.selectionEnd=c}}}try{f.focus()}catch(d){}}})(jQuery);$(function(){var b=13;var a="/api/json/searchSuggestions/";var d=$("#searchInput");var c=$("#searchClear");c.click(function(f){c.removeClass("searchClearOn");d.val("");d.focus()});d.keyup(function(f){if(d.val().length>0){c.addClass("searchClearOn")}else{c.removeClass("searchClearOn")}});d.autocomplete(a,{dataType:"json",scroll:false,selectFirst:false,minChars:2,width:300,alignRight:true,cacheLength:0,mustContain:true,extraParams:{query:function(){return e()}},parse:function(h){var g=new Array();for(var f=0;f<h.length;f++){g[f]={data:h[f],value:h[f].name}}return g},formatItem:function(j,g,l){var h=j.name;var f=j.type;if(j.type=="track"){f="song"}if(j.type=="album"){h+="<span class='searchSuggestionArtist'> &mdash; "+j.artist+"</span>"}h="<span class='search_badge'>"+f+"</span><span class='search_item'>"+h+"</span>";return h}}).result(function(f,h,g){$.history.add(h.url);f.preventDefault();return false}).no_result_submit(function(f){$.history.add("/search/"+encodeURIComponent(e())+"/")});function e(){var f=$("#searchInput").val();if(f&&f.length){return f.replace(/^\s+|\s+$/g,"").replace(/%/g,"").replace(/#/g,"")}return""}$(document).ready(function(){$("#searchInput").overlabel()})});function gotoInviteSend(){var a=$("form#invite_email_list");a.action=a.attr("action");postForm(a);return false}function editRecipientsButton(b){var a=$("#invite_send_addresses_info");a.action=$("#invite_email_list_source").val();postForm(a);return false}function editablePersonalizedMessage(a){$(a).hide();$("#invite_personalized_message").show()}function toggleEmailListShow(){$("#invite_email_short_list").hide();$("#invite_email_list").show();$("#invite_email_list_toggle").hide()}function selectImporter(){$("#invite_import_selectors .import_selector_selected").removeClass("import_selector_selected");$(this).addClass("import_selector_selected");$("#invite_import_details .import_details_selected").removeClass("import_details_selected");$('#invite_import_details .import_details[service="'+$(this).attr("service")+'"]').addClass("import_details_selected")}function inviteDetailsToggle(a){$(a).toggle()}function adjustInviteCount(b){var c=parseInt($("#invite_count_value").text());var a=$(b).attr("checked")?c-1:c+1;$("#invite_count_value").text(a.toString());if(a==0){$("#invite_count_value").removeClass("invite_count_pill_invites").addClass("invite_count_pill_no_invites")}else{$("#invite_count_value").removeClass("invite_count_pill_no_invites").addClass("invite_count_pill_invites")}if(a==0){$(".import_select_item").each(function(){var d=$(this).children(".import_select_item_checkbox");if(!d.attr("checked")){d.attr("disabled",true);$(this).removeClass("import_select_item").addClass("import_select_item_disabled")}})}else{if(c==0&&a>0){$(".import_select_item_disabled").each(function(){var d=$(this).children(".import_select_item_checkbox");d.attr("disabled",false);$(this).removeClass("import_select_item_disabled").addClass("import_select_item")})}}}function selectAllNone(a){var b;b=$(a).attr("checked");$(".import_select_item_checkbox").each(function(){$(this).attr("checked",b)})}var importerWindow;function importerCallback(a){importerWindow.close();if(a.type=="google"||a.type=="yahoo"){$("#invite_oauth_token").val(a.oauth_token);$("#invite_oauth_verifier").val(a.oauth_verifier)}else{if(a.type=="windowslive"){$("#invite_action").val(a.action);$("#invite_ConsentToken").val(a.ConsentToken);$("#invite_appctx").val(a.appctx);$("#invite_ResponseCode").val(a.ResponseCode)}}var b=$("#invite_callback_form");b.action=a.handler;postForm(b)}function spawnImporterWindow(a){importerWindow=window.open(a,"","toolbar=0");window.importerCallback=importerCallback}function fileUploadCallback(a,b){if(b){$("#import_file_selected").show().text(a);$("#import_file_not_selected").hide()}else{$("#import_file_selected").hide();$("#import_file_not_selected").show();b=" "}$("#import_file_data").val(b)}function postComment(c){var a=c.closest(".comment_area").find(".comment_text_area");var d=a.val();var b=a.attr("oid");a.val("");asyncRequest({call:"createComment",content:{key:b,text:d},method:"POST",success:function(e){if(!e){return}var g=$(e);a.closest(".comments").find(".comment_insertion_point").after(g);processAddedNodes(g);if(a.closest(".comments").find(".large_section").is(":hidden")){a.closest(".comments").find(".large_section").show()}var f=a.closest(".comments").find(".no_comments");if(f.length>0){f.hide()}}})}function deleteComment(a,b,c){asyncRequest({call:"deleteComment",content:{key:a,comment_id:b},success:function(d){if(d){c.remove()}}})}function startEditingComment(a){var b=a.parents(".comment");b.find(".comment_display").css({display:"none"});b.find(".comment_editing").css({display:"block"})}function stopEditingComment(a){var b=a.parents(".comment");b.find(".comment_editing").css({display:"none"});b.find(".comment_display").css({display:"block"})}function editComment(b,a,c){text=b.val();asyncRequest({call:"editComment",content:{key:a,comment_id:c,text:text},method:"POST",success:function(e){var d=b.parents(".comment");d.replaceWith(e);processAddedNodes(d)}})}function showComments(a){$(a).parents(".pill_update").find(".comments.empty").show();$(a).parents(".pill_update").find(".comment_area textarea").focus()}function changeCommentedItem(a){a.closest(".comment_area").find(".comment_text_area").attr("oid",a.val());var b=a.prev(".review_header_text");if(b.length==1){if(a[0].selectedIndex==0){b.text("Review this album");a.children("option:eq(0)").text("or select a song")}else{b.text("Review this song");a.children("option:eq(0)").text("review this album")}}}function ISODateString(b){function a(c){return c<10?"0"+c:c}return b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1)+"-"+a(b.getUTCDate())+"T"+a(b.getUTCHours())+":"+a(b.getUTCMinutes())+":"+a(b.getUTCSeconds())+"Z"}function parseISODate(b){var c="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";var f=b.match(new RegExp(c));var e=0;var a=new Date(f[1],0,1);if(f[3]){a.setMonth(f[3]-1)}if(f[5]){a.setDate(f[5])}if(f[7]){a.setHours(f[7])}if(f[8]){a.setMinutes(f[8])}if(f[10]){a.setSeconds(f[10])}if(f[12]){a.setMilliseconds(Number("0."+f[12])*1000)}if(f[14]){e=(Number(f[16])*60)+Number(f[17]);e*=((f[15]=="-")?1:-1)}e-=a.getTimezoneOffset();return(Number(a)+(e*60*1000))}(function(){var b={ms:1,s:(1000),m:(1000*60),h:(1000*60*60),d:(1000*60*60*24),w:(1000*60*60*24*7),mo:(1000*60*60*24*30),y:(1000*60*60*24*365)};var a=/^(-?)([0-9]+)\s*(.*)$/;function d(f){var e=f.match(a);return parseInt(""+e[1]+(parseInt(e[2])*b[e[3]]))}function c(e){if(e<0){if(e<d("-1y")){return"in "+Math.round(e/d("-1y"))+" years"}else{if(e<d("-6w")){return"in "+Math.round(e/d("-1mo"))+" months"}else{if(e<d("-2w")){return"in "+Math.round(e/d("-1w"))+" weeks"}else{if(e<d("-1d")){return"in "+Math.ceil(e/d("-1d"))+" days"}else{if(e<d("-1h")){return"in "+Math.round(e/d("-1h"))+" hours"}else{if(e<d("-2m")){return"in one hour"}else{if(e<d("-1m")){return"in a minute"}else{return"in a moment"}}}}}}}}if(e<d("1m")){return"a moment ago"}else{if(e<d("2m")){return"1 minute ago"}else{if(e<d("1h")){return Math.round(e/d("1m"))+" minutes ago"}else{if(e<d("2h")){return"1 hour ago"}else{if(e<d("1d")){return Math.round(e/d("1h"))+" hours ago"}else{if(e<d("2d")){return"1 day ago"}else{if(e<d("1w")){return Math.round(e/d("1d"))+" days ago"}else{if(e<d("2w")){return"1 week ago"}else{if(e<d("6w")){return Math.round(e/d("1w"))+" weeks ago"}else{if(e<d("1y")){return Math.round(e/d("1mo"))+" months ago"}else{return Math.round(e/d("1y"))+" years ago"}}}}}}}}}}}jQuery.fn.relativeTime=function(){$(this).each(function(){var g=$.data(this,"date");if(!g){g=parseISODate($(this).attr("title"));$.data(this,"date",g);var e=new Date();e.setTime(g);$(this).attr("title",e.toLocaleString())}var f=(new Date()).getTime();var h=f-g;$(this).text(c(h))});return $(this)};jQuery.every=function(f,e){return setInterval(e,d(f))}})();(function(){window.launcherStateChanged=function b(d){log("SyncManagerLauncher: state "+d);$.launcherState=d;if($.launcherDialogOpen&&(d=="app-installed"||d=="app-running")){$(document).trigger("downloaderLaunched")}};window.launcherClicked=function c(){$($.launcherContext).click()};function a(d){var e=$("#player");$.launcherContext=d;if(d){d=$(d);e.css(d.offset());e.css({width:d.outerWidth(),height:d.outerHeight(),"z-index":20000})}else{e.css({left:-1,top:0,width:1,height:1,"z-index":-2000})}}$.extend({launcherDialogOpen:false,launcherState:null,launcherContext:null});$.fn.extend({launcher:function(d){$(this).each(function(){var e=$(this);var f=$("#player");e.mouseenter(function(){if(d!=null){var g=false;for(var h=0;h<d.length;h++){if(d[h]==$.launcherState){g=true;break}}if(!g){return}}$(e).parents(".hover-hint").andSelf().addClass("hover");a(this);function j(l){if(f.index(l.target)==-1&&$(e).children().andSelf().index(l.target)==-1){$(document).unbind("mousemove",j);a(null);$(e).parents(".hover-hint").andSelf().removeClass("hover")}}$(document).bind("mousemove",j)})});return(this)}});$.fn.extend({uploader:function(f,e,d){$(this).each(function(){var g=$(this);var h=$("#player");g.mouseenter(function(){$(g).parents(".hover-hint").andSelf().addClass("hover");getPlayer()._fileUpload(f,e,d);a(this);function j(l){if(h.index(l.target)==-1&&$(g).children().andSelf().index(l.target)==-1){$(document).unbind("mousemove",j);getPlayer()._resetUpload();a(null);$(g).parents(".hover-hint").andSelf().removeClass("hover")}}$(document).bind("mousemove",j)})});return(this)},copyToClipboard:function(d){$(this).each(function(){var f=$(this);var e=$("#player");f.mouseenter(function(){$(f).parents(".hover-hint").addClass("hover");$(f).addClass("hover");getPlayer()._copyToClipboard(d);a(this);function g(h){if(e.index(h.target)==-1&&$(f).children().andSelf().index(h.target)==-1){$(f).parents(".hover-hint").removeClass("hover");$(f).removeClass("hover");$(window).unbind("mousemove",g);getPlayer()._resetCopyToClipboard();a(null)}}$(document).bind("mousemove",g)})});return(this)}})})();function installSyncManager(){var b=$(".syncmanager_install_dialog").clone().appendTo(document);b.find(".syncmanager_install_button").launcher();var a={draggable:false,modal:true,resizable:false,title:"Install Downloader",width:410,onOpen:function(c,d){$.launcherDialogOpen=true;$(document).bind("downloaderLaunched",function(){log("syncmanager dialog got downloaderLaunched event");b.dialog("close")})},onClose:function(c,d){log("syncmanager dialog got dialog close event");$(document).unbind("downloaderLaunched");$.launcherDialogOpen=false}};openDialog("Install Downloader",b,a)}function paginate(d){var c=$.extend({spacing:0,clipperHasWidth:true,vertical:false,loop:true,reverse:false},d);c.items=c.list.children("li");c.list.css({position:"relative"});c.items.addClass("carousel_item");if(c.vertical){c.list.closest(".carousel").addClass("vertical_carousel")}if(!("numPages" in c)){c.numPages=Math.ceil(c.items.length/c.perPage)}if(!$($(c.list).parent().get(0)).hasClass("clipper")){$(c.list).wrap('<div class="clipper"></div>');c.clipper=$(c.list).parent();c.clipper.css({overflow:"hidden",padding:c.spacing,position:"relative"})}else{c.clipper=$(c.list).parent()}var b;var g;if("control_area" in c){c.control_area.empty();g=$("<button>").addClass("prev").val("-1").appendTo(c.control_area);b=$("<button>").addClass("next").val("+1").appendTo(c.control_area);for(var e=0;e<c.numPages;e++){$("<button>").addClass("page").val(e).appendTo(c.control_area)}c.controls=$("button",c.control_area);if(c.numPages<2){c.control_area.hide()}else{c.control_area.show()}$(c.controls).unbind("click.pager");$(c.controls).bind("click.pager",function(){if($(this).val()=="-1"){a(f()-1)}else{if($(this).val()=="+1"){a(f()+1)}else{a(parseInt($(this).val()))}}})}else{if("control_prev" in c){c.control_prev.click(function(h){if(!$(this).hasClass("disabled")){a(f()-1)}h.preventDefault();return false});g=c.control_prev}if("control_next" in c){c.control_next.click(function(h){if(!$(this).hasClass("disabled")){a(f()+1)}h.preventDefault();return false});b=c.control_next}}function f(){var h=$(c.state).data("page");if(h==undefined){return 0}else{return h}}function a(m,l){if(m>=c.numPages){m=0}if(m<0){m=c.numPages-1}if(!c.loop){if(m==c.numPages-1){b.addClass("disabled")}else{b.removeClass("disabled")}if(m==0){g.addClass("disabled")}else{g.removeClass("disabled")}}if(c.animate){$(c.items).show();var h=0;var j=0;c.list.stop();if(c.vertical){$(c.items).each(function(){j=$(this).outerHeight(true);h+=j});h*=2;$(c.list).height(h);var n=-1*j*c.perPage*m-(m*c.spacing);if(l){$(c.list).css("top",n)}else{$(c.list).animate({top:n},{easing:"swing"})}}else{$(c.items).each(function(){j=$(this).outerWidth(true);h+=j});h*=2;$(c.list).width(h);var n=-1*j*c.perPage*m-(m*c.spacing);if(l){$(c.list).css("left",n)}else{$(c.list).animate({left:n},{easing:"swing"})}}}else{$(c.items).hide();$(c.items).slice(m*c.perPage,(m+1)*c.perPage).show()}$(c.state).data("page",m);$(c.controls).removeClass("selected");$(c.controls).filter(function(){return $(this).val()==m}).addClass("selected");if(c.onsetpage){c.onsetpage(m)}}if(c.reverse){a(-1,true)}else{a(0,true)}}function getHitGraphData(b,c,a){asyncRequest({call:"getHitGraphData",content:{type:b,id:c},success:function(d){a.sparkline(d,{type:"bar",barColor:"#8A9499",barWidth:6})}})}function showLogin(){$.ajax({type:"GET",url:"/accounts/login/",data:{in_dialog:true},dataType:"json",success:function(c){var a=$('<div id="login_dialog">').append(c.content.content).appendTo(document);var b=$("form",a);processAddedNodes(a);a.dialog({resizable:false,draggable:false,modal:true,title:"Login",buttons:{Login:function(){c=$(b).serialize();c+="&"+_submitElement;$.ajax({url:b.get(0).action,type:"POST",data:c,dataType:"json",success:function(d){log(d.redirect_to);if(d.redirect_to){if(d.content){processNewContent(d.content)}a.dialog("close")}else{log("failed login");$("#login_dialog").html(d.content.content);processAddedNodes($("#login_dialog"));b=$("form",a)}}})},Cancel:function(){$(this).dialog("close")}},close:function(f,d){$(this).dialog("destroy").remove()}})}})}(function(e){var b;var d;var g=true;function a(){var j="person";var h=e("#heavy_rotation_scope_selector");if(h.length){j=h.val()}asyncRequest({call:"getHeavyRotationForUser",content:{id:b,type:"albums",scope:j,timeframe:"weighted",attempt_everyone:g},shieldElement:"#top_album_grid",template:"profiles/templates/hr.bg.html",success:function(n,m){e("#top_album_grid .content").html(m);processAddedNodes(e("#top_album_grid .content"));if(n.scope=="everyone"&&g){e("#heavy_rotation_scope_selector").val(n.scope);var l=e("#heavy_rotation_scope_selector").closest("div").find(".one_line_select");e(".select_item",l).removeClass("selected");e(".select_item:last-child",l).addClass("selected")}g=false}})}function c(){var j="person";var h=e("#top_artists_scope_selector");if(h.length){j=h.val()}asyncRequest({call:"getHeavyRotationForUser",content:{id:b,type:"artists",scope:j,timeframe:"weighted"},shieldElement:"#top_artists",template:"profiles/templates/top_artists.bg.html",success:function(m,l){e("#top_artists .content").empty();if((m.items.length==0&&b!=clientManager.current_user.id)||(m.items.length==0&&j=="friends")){e("#top_artists").hide();return}e("#top_artists .content").html(l);processAddedNodes(e("#top_artists .content"))}})}function f(){var j="person";var h=e("#recent_activity_scope_selector");if(h.length){j=h.val()}var l="#recent_activity_section";if(e("#recent_activity_section .update").length!=0){l="#recent_activity_section .more_activity"}asyncRequest({call:"getActivityStream",content:{id:b,scope:j,last_id:e("#recent_activity_section").data("last_id")},shieldElement:l,template:"profiles/templates/recent_activity.bg.html",success:function(o,n){e("#recent_activity_section").data("last_id",o.last_id);var m=e("<div />");m.addClass("activity_stream");e("#recent_activity_section > .content").append(m);m.html(n);processAddedNodes(m);e("#recent_activity_section").data("last_id",o.last_id);if(o.last_id==0){e("#recent_activity_section .more_activity").hide()}}})}window.Dashboard={};window.Dashboard.init=function(j,h){b=j;d=h;a();e("#heavy_rotation_scope_selector").change(function(){a()});c();e("#top_artists_scope_selector").change(function(){c()});e("#recent_activity_section").data("last_id",-1);f();e("#recent_activity_scope_selector").change(function(){e("#recent_activity_section .content").empty();e("#recent_activity_section").data("last_id",-1);e("#recent_activity_section .more_activity").show();f()});e("#recent_activity_section .more_activity .button").click(function(){f();return false})}})(jQuery);function showBillingDialog(b,d,a,c,e){if(typeof(c)=="undefined"){c={}}c.in_dialog=true;$.ajax({type:"GET",url:b,data:c,dataType:"json",success:function(j){var h=$('<div id="dialog_container">').append(j.content.content).appendTo(document);processAddedNodes(h);confirmButtonLabel=""+a;buttons={};buttons[a]=n;buttons.Cancel=m;function n(){var p=$("#dialog_container").find("form:visible");if(p.length!=1){throw ("There are multiple forms on this page that are visible and I do not know which one to submit.");return false}var o={complete:function(){g().removeAttr("disabled")},beforeSend:function(){g().attr("disabled",true)},success:function(q){f();g().removeAttr("disabled");if(q.content.launchDownloader==true){asyncRequest({url:q.redirect_to,success:function(r){$("#dialog_container").html(r.content.content)}});if(e&&e.onSuccess){e.onSuccess(q,h)}}else{if(q.content.paymentFailed){$("#dialog_container").html(q.content.content);if(e&&e.onFail){e.onFail(q,h)}}else{if(q.content.failed){$("#dialog_container").html("Error purchasing content. Please try again later or contact support if the problem continues.");if(e&&e.onFail){e.onFail(q,h)}}else{p.parent().html(q.content.content);processAddedNodes($("#dialog_container"));p=$("form",h).find(":visible")}}}h.dialog("option","position","center")},validate:function(v){var u=creditCardValidationFunc(v,$(".errors"));if(!u){var r=$(v).find(".form_row_error");if(r){var q=$("#paymentProfilesForm").offset().top;var w=v.find(".form_row_error").offset().top;var s=w-q;$("#dialog_container").animate({scrollTop:s},300)}else{$("#dialog_container").animate({scrollTop:0},300)}}return u},error:function(s,u,q){var r="There was an error processing your request. Please wait a minute ";r+=" and try again. If this persists, please contact customer service.";$("#dialog_container").html(r);if(e&&e.onFail){e.onFail(null,h)}}};j=$(p).serialize();$.ajax({type:$(p).attr("method")||"POST",url:$(p).attr("action"),data:j,dataType:"json",beforeSend:function(q){o.beforeSend(q)},success:function(q){o.success(q)},error:function(r,s,q){o.error(r,s,q)}})}h.bind("onAction",n);function m(){$(this).dialog("close")}function g(){return h.parent().find(".ui-dialog-buttonpane button")}function f(){g().parent().find(".buttonpane-msg").remove();if(h.find("#existing_card_info").length>0){g().parent().prepend($('<div class="buttonpane-msg">By purchasing this music, you agree to Rdio\'s <a target="_blank" href="/legal/paymentterms/">payment terms</a>.</div>'))}}var l={buttons:buttons,width:500,modal:true,onOpen:function(q,p){var o=h.find("input#id_accountNumber");o.focus().blur(function(){highlightCard($(this).val())});f()},onClose:function(p,o){h.unbind("onAction")}};openDialog(d,h,l);if(j.content.outstanding){h.dialog("option","buttons",{});h.dialog("option","title","Payment Failed");h.html('A purchase you made previously has failed. Please resolve this issue by going to your <a href="/management/payment_profiles/">payment profiles</a> page.');h.find("a").click(function(){h.dialog("destroy")})}}})}function alertDialog(b,a){return openDialog(b,$("<div>"+a+"</div>"))}function openDialog(c,b,a){var a=jQuery.extend({draggable:false,modal:true,resizable:false,title:c||"Notice",keepInCenter:true,buttons:{Close:function(){$(this).dialog("close")}},open:function(f,d){window.setTimeout(function(){$(document).unbind($.ui.dialog.overlay.events)},50);if(typeof keepPlayerVisible=="function"){$(window).unbind("scroll",keepPlayerVisible)}},beforeclose:function(f,d){if(typeof keepPlayerVisible=="function"){$(window).bind("scroll",keepPlayerVisible)}if(a.onBeforeClose){a.onBeforeClose(f,d)}},close:function(f,d){$(this).dialog("destroy").remove();if(a.onClose){a.onClose(f,d)}}},a);return b.dialog(a)}function warningDialog(d,c,a){var b=$("<div></div>").append(c);a.width=430;a.onOpen=function(j,m){var q=$(b).parent().find(".ui-dialog-titlebar");q.addClass("warning_titlebar");q.find(".ui-dialog-titlebar-close").hide();var n=$(b).parent().find(".ui-dialog-buttonpane");n.empty();var h=$("<div></div>").addClass("warning_hide_box");if(!a.hide_checkbox){var f=$("<input>").attr({type:"checkbox",id:"dont_show"});var g=$("<label></label>").attr("for","dont_show").text("Don't show again");h.append(f,g)}var p=$("<button></button>").addClass("button").addClass("default_button").addClass("large_button").text(a.success_button_label).click(function(){a.success_function();if(f&&f.is(":checked")){asyncRequest({call:"stopWarningUser",content:{s:a.warning_key}});clientManager.current_user.warnings[a.warning_key]=false}b.dialog("close")});h.append(p);if(a.has_cancel){var o=$("<button></button>").addClass("button").addClass("large_button").text("Cancel").click(function(){b.dialog("close")});h.append(o)}var l=$("<div></div>").html('<a href="/apps/mobile/">Get Rdio mobile apps.</a>').addClass("get_message");l.find("a").click(function(){b.dialog("close")});n.append(h,l);$(b).parent().find(".ui-dialog-content a").click(function(){b.dialog("close")});processAddedNodes($(b).parent())};a.buttons={};a.buttons[a.success_button_label]=function(){};openDialog(d,b,a)}function simpleDialog(c,a){var b=$("<div></div>").append($(c));if(!a){a={}}a.onOpen=function(g,f){$(b).parent().find(".ui-dialog-titlebar").hide();var h=$(b).parent().find(".ui-dialog-buttonpane");h.empty();h.css("text-align","center");if(a.reallySimple){h.remove()}else{var d=$("<button></button>").addClass("button").addClass("default_button").addClass("large_button").css("float","none").text("OK").click(function(){b.dialog("close")});h.append(d)}processAddedNodes($(b).parent())};a.buttons={};a.buttons.OK=function(){};openDialog("",b,a);return b}function newPaymentProfileDialog(c){var b=server_info.secure_host+"/secure/payment/new/";if(c.outstanding_id){b+="?out="+c.outstanding_id}var d=$('<div title="Enter new payment method"></div>');var a=$("<div></div>").appendTo(d);d.dialog({width:500,open:function(){var e={container:a,dialog:d,handlers:{success:function(){d.dialog("close").dialog("destroy");if(c.callback&&typeof c.callback=="function"){c.callback()}},cancel:function(){d.dialog("close").dialog("destroy")},failed:function(){d.dialog("close").dialog("destroy");$("<div>Failed to add card</div>").dialog()}}};secureDialog(b,e)}})}function editPaymentProfileDialog(d){if(!d.profile_id){return}var a=d.profile_id;var c=server_info.secure_host+"/secure/payment/edit/"+a+"/";if(d.outstanding_id){c+="?out="+d.outstanding_id}var e=$('<div title="Update Billing Info"></div>');var b=$("<div></div>").appendTo(e);e.dialog({width:500,open:function(){var f={dialog:e,container:b,handlers:{success:function(){e.dialog("close").dialog("destroy");if(d.callback&&typeof d.callback=="function"){d.callback()}},cancel:function(){e.dialog("close").dialog("destroy")},failed:function(){e.dialog("close").dialog("destroy");$("<div>Failed to edit card</div>").dialog()}}};secureDialog(c,f)}});return false}var iframeHolder;var securePopup;var underFormBlocker;var intvals={};function secureDialog(c,o){if(!o){log("No params passed to secureDialog, don't know what to do");return}if(!o.container){log("Secure dialog has no container");return}var f="secure_dialog_result";if("cookieName" in o){f=o.cookieName}var j=c;function m(p){return p.indexOf("?")!=-1?"&":"?"}c+=m(c)+"cn="+f;if(o.button_title){c+=m(c)+"b_title="+o.button_title}if(o.subscribe){c+=m(c)+"subscribe=1"}if(o.popup){c+=m(c)+"popup=1"}if(o.dialog){c+=m(c)+"in_dialog=1"}a();function h(){underFormBlocker=$('<div title="Complete form in new window">Please wait while the secure form opens in a new window.</div>').dialog({buttons:{Cancel:function(){$(this).dialog("close").dialog("destroy")}},close:function(){if(securePopup){try{securePopup.close()}catch(u){}}}});var q=c+=m(c)+"popup=1";var p=iframeHolder.outerHeight()+60;var r=540;if(o.popupSameWidth){r=iframeHolder.width()}var s="toolbar=0,location=0,scrollbars=1,resizable=1,width="+r+",height="+p;securePopup=window.open(q,"secure_popup_"+f,s);return false}if(o.popup){log("opening secure dialog in popup");securePopup=window.open(c,"secure_popup_"+f,"toolbar=0,height=600,width=510,location=0,scrollbars=1");e(f,o.handlers,true)}else{$(o.container).empty();var l=$('<div class="https_info_inner"></div>').append($("<div></div>").text("The information in the form below will be sent to Rdio over SSL. It is just as secure as loading a new window but you don't even have to leave the page."),$('<div class="open_line"></div>').append($("<span>If you prefer, you can </span>")).append($('<a href="#">open this form in a new window</a>.').click(h))).hide();var n=$('<div class="https_info"></div>').append($('<div class="secure_form">Secure Form</div>')).append($('<a class="secure_link more_link more_down" href="#">More info</a>').click(function(){if(l.is(":visible")){$(o.container).height($(o.container).height()-l.outerHeight());l.hide();$(this).removeClass("more_up");$(this).addClass("more_down");$(this).text("More info")}else{l.show();$(o.container).height($(o.container).height()+l.outerHeight());$(this).removeClass("more_down");$(this).addClass("more_up");$(this).text("Hide info")}})).append(l);$(o.container).append(n);iframeHolder=$("<div></div>").appendTo($(o.container));iframeHolder.css("display","none");iframeHolder.append($("<iframe></iframe>").attr("allowtransparency","true").attr("frameborder",0).css("width","100%").css("height","100%").css("background-color","transparent"));setTimeout(function(){var p=iframeHolder.find("iframe")[0];p.src="";p.src=c},1);var b=$('<div class="launching_secure"></div>').append($('<div class="green_padlock"><div class="green_padlock_loading"></div></div>'),$('<div class="init_secure">Loading secure connection...</div>'));$(o.container).append(b);o.handlers.resize=function(){e("secure_height",{"default":function(q){var p=parseInt(q)+20;iframeHolder.animate({height:p});var r=$(o.container).find(".https_info").outerHeight();$(o.container).animate({height:p+r},function(){if(o.dialog){$(o.dialog).dialog("option","position",["center","middle"])}})}})};$(document).bind("pageLoad.secureiframe",a);var g={open:function(p){iframeHolder.css("height",b.height());b.fadeOut(function(){iframeHolder.fadeIn();iframeHolder.find("iframe").css("overflow","hidden")});e(f,o.handlers,true)}};e("secure_dialog_open",g)}function e(r,p,q){var v=20000;if(!p){log("attempting to wait for cookie with no handlers, bailing");return}var u=new Date().getTime();function s(){if(new Date().getTime()-u>v){if(o.popup){if(securePopup){u=new Date().getTime()}else{a()}}else{if(iframeHolder&&iframeHolder.is(":visible")){u=new Date().getTime()}else{a()}}}var w=$.cookie(r);if(typeof w!="undefined"&&w!=null){$.cookie(r,null,{path:"/"});if(w=="resize"&&"resize" in p){p.resize();return}d(r);if(q){a()}if(w in p){p[w](w)}else{if("default" in p){p["default"](w)}else{if(w!=null){log("found secure cookie value "+w+" but it didn't have a handler and there was no default handler!")}}}}}d(r);intvals[r]=setInterval(s,100)}function d(q){if(q){if(q in intvals){clearInterval(intvals[q]);delete (intvals[q])}return}for(var p in intvals){if(typeof intvals[p]!="undefined"){clearInterval(intvals[p]);delete (intvals[p])}}}function a(){log("cleaning up secure frame");if(f){$.cookie(f,null,{path:"/"});$.cookie("secure_dialog_open",null,{path:"/"})}if(iframeHolder){iframeHolder.remove();$([window,document]).unbind(".secureiframe")}if(securePopup){try{securePopup.close()}catch(p){}}if(underFormBlocker){underFormBlocker.dialog("close").dialog("destroy")}d()}}function signupCheckEmail(){var b=$('<div title="Please check your email"></div>');if(!clientManager.current_user.self_invite_email){return}var a=clientManager.current_user.self_invite_email;b.append($("<div>We sent an email to <strong>"+a+"</strong> with a link to complete your registration. Once you register, you will be able to play music."));b.dialog({close:function(){b.remove()},buttons:{"Send Email Again":function(){signupPromptDialog();b.dialog("close")},Close:function(){b.dialog("close")}}})}function signupPromptDialog(){var b=$('<div title="Try Rdio for Free" class="signup_dialog"></div>');var a=$("<div></div>").append('<h2 class="free_trial"><strong>Free Trial - Enter your email address</strong></h2>').append("<p>We'll send an email with a link to finish registering.</p>").append($('<div class="error error_message"></div>').hide());var c=$('<div class="input_row"><input class="textInput" type="text" id="signup-email-input" title="you@example.com" /><button class="button small_button default_button">Submit</button></div><p class="region_warning">Rdio is currently available in the US and Canada.</p>');if(clientManager.current_user.self_invite_email){c.find("input").val(clientManager.current_user.self_invite_email)}c.find("button").click(function(){var e=c.find("input").val();var f=$(this);f.attr("disabled",true);a.find(".error").hide();asyncRequest({call:"selfInvite",method:"POST",content:{email:e},success:function(g){if(g&&g!=true){a.find(".error").text(g).show();f.attr("disabled",false)}else{clientManager.updateField("current_user","self_invite_email",e);$('<div title="Thanks!">We sent you an email with a link to complete your registration.</div>').dialog();$('<style type="text/css">.inline_upsell,.inline_upsell_holder{display:none;}</style>').appendTo($(document.body));b.dialog("close");try{pageTracker._trackPageview("/goals/selfinvite/")}catch(h){}}},failed:function(g){$(this).attr("disabled",false)}});return false});a.append(c);b.append(a);var d=$('<div class="sub-content"></div>');d.append($('<div class="reason music"><strong>Listen to music</strong><br/>Play what you want, when you want.</div>'));d.append($('<div class="reason mobile"><strong>Take it with you</strong><br/>On iPhone, BlackBerry, and Android phones.</div>'));d.append($('<div class="reason offline"><strong>Play music offline</strong><br/>Sync to your phone and listen while offline.</div>'));d.append($('<div class="reason people"><strong>People-powered</strong><br/>Discover music through your friends.</div>'));b.append(d);b.dialog({open:function(){c.find("input").overlabel()},close:function(){b.remove()}})}function openShareDialog(n){var g=$('<div class="sub-content"></div>').append($('<span class="sub-content-label link_icon">Link to it</span>')).append($('<span class="sub-content-details"><input style="width:209px;" type="text" class="textInput" readonly="readonly" value="'+n.shortUrl+'" /></span>'));g.click(function(){$(this).find("input").select()});var z=$('<a class="connect_button" href="#"></a>').append($('<img src="/media/images/share/facebook_connect.png" />')).click(function(){launchConnectWindow("/connect/facebook/",function(E){if("success" in E){z.hide();j.show();clientManager.current_user.has_facebook=true}});return false});var j=$('<span class="post_checkbox_holder"></span>').append($('<span class="post_checkbox"><input type="checkbox" name="post_to_facebook" id="post_to_facebook" /></span>')).append($('<span class="post_to facebook_icon">Facebook</span>'));var d=$('<a class="connect_button" href="#"></a>').append($('<img src="/media/images/share/twitter_connect.png" />')).click(function(){launchConnectWindow("/connect/twitter/",function(E){if("success" in E){d.hide();v.show();clientManager.current_user.has_twitter=true}});return false});var v=$('<span class="post_checkbox_holder"></span>').append($('<span class="post_checkbox"><input type="checkbox" name="post_to_twitter" id="post_to_twitter" /></span>')).append($('<span class="post_to twitter_icon">Twitter</span>'));var r=function(){u.find("button").attr("disabled",true).hide();u.find(".posting").show();var F=$("#post_to_twitter").attr("checked");var E=$("#post_to_facebook").attr("checked");var G=u.find("textarea").val();asyncRequest({call:"shareItem",method:"POST",content:{item_type:n.type,item_id:n.id,do_twitter:F,do_facebook:E,message:G},success:function(H){$.jGrowl('"'+R.truncate(n.name,20)+'" posted successfully',{theme:"share"});w.dialog("close")},failed:function(H){u.find("button").attr("disabled",false).show();u.find(".posting").hide()}})};var u=$('<div class="message_holder clearfix"></div>').append($('<textarea class="textInput" id="post_message_text" title="Add a message (optional)" rows="2" cols="37"></textarea>')).append($('<button class="button default_button"><span>Post</span></button></span>').click(r)).append($('<span class="posting">Posting...</span>').hide()).hide();var l=$('<div class="sub-content clearfix"></div>').append($('<span class="sub-content-label post_icon">Share on</span>')).append(z).append(j).append(d).append(v).append(u);var m=l.find('input[type="checkbox"]');m.bind("change",function(){if($(this).attr("checked")){$(this).parent().next().addClass("selected")}else{$(this).parent().next().removeClass("selected")}if(m.filter(":checked").length>0){u.show();w.dialog("option","position",["center","middle"])}else{u.hide();w.dialog("option","position",["center","middle"])}});var e="Type the name of an Rdio friend";if(clientManager.current_user.has_facebook){e="Type the name of an Rdio or Facebook friend"}var p=$('<input type="text" id="user_search_box" title="'+e+'" class="textInput" />');var q=$('<div class="user-list"></div>').hide();var D=$('<div class="message_holder clearfix"></div>').hide().append($('<textarea class="textInput" id="recommend_message_text" title="Add a message (optional)" rows="2" cols="37"></textarea>'));var b=$('<a href="#">Add a message?</a>').click(function(){if(D.is(":visible")){D.hide();$(this).text("Add a message?")}else{D.show();$(this).text("Don't add a message")}return false});var c=$('<div class="error_message"></div>').hide();var C=$('<div class="user-list-submit-buttons"></div>').append($('<button class="button"><span>Cancel</span></button></span>').click(function(){w.dialog("close")})).append($('<button class="button default_button"><span>Send</span></button></span>').click(function(){o()})).append($('<span class="posting">Sending...</span>').hide());var A=$('<div class="user-list-submit"></div>').hide().append(D).append(c).append(b).append(C);var o=function(){c.hide();C.find("button").attr("disabled",true).hide();C.find(".posting").show();var E=[];var I=[];q.find(".user-entry[source!=fb]").each(function(){E.push($(this).attr("uid"))});q.find(".user-entry[source=fb]").each(function(){I.push($(this).attr("uid"))});var H=E.join(",");var G=I.join(",");var F="";if(D.is(":visible")){F=$("#recommend_message_text").val()}asyncRequest({call:"recommendItem",method:"POST",content:{item_type:n.type,item_id:n.id,recipient_ids:H,facebook_ids:G,message:F},success:function(J){if("error" in J){c.text(J.error).show();C.find("button").attr("disabled",false).show();C.find(".posting").hide()}else{$.jGrowl('"'+R.truncate(n.name,20)+'" recommended to your friends',{theme:"share"});w.dialog("close")}},failed:function(J){C.find("button").attr("disabled",false).show();C.find(".posting").hide()}})};var B=function(F){var E="div[uid="+F.id+"]";if("type" in F&&F.type=="fb"){E="div[uid="+F.id+"][source=fb]"}return E};var y=function(E){q.show();A.show();if(q.find(B(E)).length==0){var G="";if("name" in E){G=E.name}else{G=E.firstName+" "+E.lastName}var H="";var F=$('<div class="user-entry" uid="'+E.id+'">'+G+"</div>").prepend($('<span class="delete"></span>').click(function(){a(E)})).hide().fadeIn().data("user",E);if("type" in E&&E.type=="fb"){F.attr("source","fb");F.addClass("fb_icon")}q.prepend(F)}};var a=function(E){q.find(B(E)).fadeOut(function(){$(this).remove();if(q.find("div").length==0){A.hide();q.hide()}})};var x=$('<div class="sub-content clearfix recommend_icon"></div>').append($('<span class="sub-content-label email_icon">Recommend this '+$.t.prettyType(n.type).toLowerCase()+" to a friend</span>")).append(p).append(q).append(A);var s=$('<div class="share_item clearfix"></div>');if(n.type=="r"){s.append($('<div class="share_item_icon"><img src="'+R.resizedImage(n.baseIcon,50,50,5)+'" /></div>'))}else{s.append($('<div class="share_item_icon shadowbox_50"><img src="'+R.resizedImage(n.baseIcon,50,50)+'&ov=2" /></div>'))}var h=n.name;var f="";if(n.type=="t"){f=n.artist+" - "+n.album}else{if(n.type=="p"){f="by "+n.owner}else{if(n.type=="a"){f=n.artist}}}s.append($('<div class="share_item_details"></div>').append($('<div class="share_item_details_name">'+h+"</div>")).append($('<div class="share_item_details_artist">'+f+"</div>")));var w=$('<div title="Share this '+$.t.prettyType(n.type)+'"></div>').append(s).append(g).append(l).append(x).dialog({width:360,open:function(){$("#post_message_text").overlabel();$("#recommend_message_text").overlabel();$("#user_search_box").overlabel();if(clientManager.current_user.has_twitter){d.hide()}else{v.hide()}if(clientManager.current_user.has_facebook){z.hide()}else{j.hide()}var F=13;var E="/api/json/searchFollowers/";p.css("z-index",parseInt($(this).parent().css("z-index"))+1);function G(){var H=p.val();if(H&&H.length){return H.replace(/^\s+|\s+$/g,"")}return""}p.autocomplete(E,{dataType:"json",resultsClass:"searchuser_results",loadingClass:"searchuser_loading",scroll:false,selectFirst:false,minChars:2,width:333,cacheLength:10,mustContain:true,matchZIndex:true,extraParams:{query:function(){return G()}},parse:function(J){var I=new Array();for(var H=0;H<J.length;H++){I[H]={data:J[H],value:J[H].firstName+" "+J[H].lastName}}return I},formatItem:function(J,H,L){var I="";if("type" in J&&J.type=="fb"){var K=J.icon;I='<img src="'+K+'" align="left" width="35" height="35" /><span class="username">'+J.name+'</span><br/><span class="location">'+J.location+"</span>"}else{var K=R.resizedImage(J.baseIcon,35,35,3);I='<img src="'+K+'" align="left" /><span class="username">'+J.firstName+" "+J.lastName+'</span><br/><span class="location">'+J.location+"</span>"}return I}}).result(function(H,J,I){if(J&&J.id){y(J)}return false}).no_result_submit(function(H){log("nothing selected")});g.find("input").click()},close:function(){p.unautocomplete();$(this).remove()}})}function getCardType(b){var a=new RegExp("^4");if(b.match(a)!=null){return"Visa"}a=new RegExp("^(34|37)");if(b.match(a)!=null){return"American Express"}a=new RegExp("^5[1-5]");if(b.match(a)!=null){return"MasterCard"}a=new RegExp("^6011");if(b.match(a)!=null){return"Discover"}return""}function isCreditCard(e){if(e.length==0){return false}var e=e.replace(/\s+/g,"");var b;var m=1;var f=2;var l=0;var c=0;var j="";var n="";var d;var a;b=e;for(var g=0;g!=b.length;g++){n=b.substring(g,g+1);if(n=="-"){continue}j=j+n}d=parseInt(j);if(d==0){return false}a=b.length/2;if(b.length-(parseInt(a)*2)==0){m=2;f=1}for(var h=b.length-1;h>0;h--){a=h/2;if(a<1){a++}if(h-(parseInt(a)*2)!=0){c=(parseInt(b.charAt(h-1)))*m}else{c=(parseInt(b.charAt(h-1)))*f}if(c>=10){c=c-10+1}l=l+c}c=10-(l%10);if(c==10){c=0}if(c==(parseInt(b.charAt(b.length-1)))){return true}else{return false}}function cardTypeToId(a){rval="";switch(a){case"Visa":rval="001";break;case"MasterCard":rval="002";break;case"American Express":rval="003";break;case"Discover":rval="004";break;default:rval=null}return rval}var validErrors={invalid_card_number:"The credit card you entered is invalid.",card_type_not_supported:"Only Visa, Mastercard, American Express and Discover are accepted.",invalid_card_expirey:"Please enter expirey in the format MM/YY.",card_has_expired:"This card has expired.",invalid_cv:"The CV number your supplied is invalid."};function expirationDateIsValid(c,b){var a=new Date();expiryDate=new Date();expiryDate.setFullYear(b,c,1);return(a-expiryDate)<0}function cvNumberisValid(a){if(a.indexOf(".")!=-1){return false}return !isNaN(a)}function creditCardValidationFunc(c,h){var g="";var d=false;var e="<span class='error_message'>%s%</span><br />";var f=$(c).find("input#id_accountNumber").val();$(h).html("");$(c).find(".form_row_error").removeClass("form_row_error");$(c).find("span.error_message").remove();$(c).find(".required").each(function(){var j=$(this).find("input, select");if(j.val().length==0){d=true;$(this).parent(".form_row").addClass("form_row_error");$(this).parent().append('<span class="error_message">This field is required</span>')}});if(d){return false}if(isCreditCard(f)){var a=getCardType(f);var b=cardTypeToId(a);if(b==null){d=true;g+=e.replace("%s%",validErrors.card_type_not_supported)}else{highlightCard(f)}}else{d=true;g+=e.replace("%s%",validErrors.invalid_card_number)}if(!expirationDateIsValid($("select#id_expiration_0").val(),$("select#id_expiration_1").val())){d=true;g+=e.replace("%s%",validErrors.card_has_expired)}if(!cvNumberisValid($("#id_cvNumber").val())){d=true;g+=e.replace("%s%",validErrors.invalid_cv)}if(h){$(h).html(g)}if(g.length>0&&d==false){throw ("There are recorded errors but the form is valid... this shouldn't happen");return false}return d==false}function highlightCard(b){var a=getCardType(b);$("#card_types>span").addClass("disabled");if(isCreditCard(b)&&a){$("#card_types ."+a.replace(" ","").toLowerCase()).removeClass("disabled")}}function ClientStateManager(){this._listeners=Array();this.current_user=null;this.system=null}ClientStateManager.prototype.addListener=function(a){this._listeners.push(a)};ClientStateManager.prototype.removeListener=function(b){for(var a=0;a<this._listeners.length;++a){if(this._listeners[a]==b){this._listeners[a].splice(b)}}};ClientStateManager.prototype.updateField=function(a,d,c){try{if(c!=null){this[a][d]=c}else{delete this[a][d]}this._notify_listeners(a,d,c)}catch(b){log(b)}};ClientStateManager.prototype._notify_listeners=function(a,d,c){for(var b=0;b<this._listeners.length;++b){this._listeners[b].onChange(a,d,c)}};var clientManager;function setupClientManager(a){clientManager=new ClientStateManager();clientManager.current_user=a;for(var d in clientManager.current_user){if(clientManager.current_user[d]==null){delete clientManager.current_user[d]}}var g={onChange:function(h,l,j){log("object "+h+" a field "+l+" a value "+j);if(h=="current_user"){switch(l){case"subscription_type":case"free_trial":case"subscription":case"has_subscription_failure":e();b();c();break;case"invite_count":f();break;case"id":player_model.userID=clientManager.current_user.id;getPlayer()._setUserID(clientManager.current_user.id);c();case"self_invite_email":c();b()}}}};function c(){if(clientManager.current_user.id==-1){$("body").addClass("logged_out");$("body").removeClass("logged_in")}else{$("body").removeClass("logged_out");$("body").addClass("logged_in")}if(clientManager.current_user.subscription_type==0){$("body").removeClass("subscriber")}else{$("body").addClass("subscriber")}}function e(){var h=$("ul.menu li#header_link_upgrade");if(h.length==0){return}if(!("subscription" in clientManager.current_user)&&(clientManager.current_user.subscription_type==0||"free_trial" in clientManager.current_user)){h.show()}else{h.hide()}}function b(){var n=$("#warning_box");var q=$("#inner_container");if(clientManager.current_user.id==-1){q.hide();n.empty();if(clientManager.current_user.self_invite_email){var m=$("#js_templates .warning_box_resend").clone();m.find(".self_invite_email").text(clientManager.current_user.self_invite_email);m.find("button").click(function(){signupPromptDialog()});n.append(m).show()}else{var r=$("#js_templates .warning_box_upsell").clone();r.find("button").click(function(){signupPromptDialog()});n.append(r).show()}}else{q.show();n.removeClass("free_account");if(n){var s="";var p="";var o=false;var l=new Date();var j="";if("subscription" in clientManager.current_user&&"subscription_end_date" in clientManager.current_user.subscription){l=new Date(parseISODate(clientManager.current_user.subscription.subscription_end_date));p="Manage Subscription";o=true;if(l>new Date()){inner_text='Subscription will end <span class="highlight"><span class="relative_date" title="'+ISODateString(l)+'"></span></span>'}else{n.html("").hide();return}}else{if("subscription" in clientManager.current_user){n.html("").hide();return}else{if("has_subscription_failure" in clientManager.current_user&&clientManager.current_user.has_subscription_failure){inner_text='<div style="font-size:14px;font-weight:bold;line-height:18px;">Credit Card Error</div><div style="line-height:14px;margin-top:4px;font-size:12px;color:#cbdbe7;">We were unable to bill your credit card. Your account will stream 30-second previews until you update your card\'s information.</div>';p="Update";j="/management/resolve_subscription/"}else{if("free_trial" in clientManager.current_user&&"trial_end_date" in clientManager.current_user.free_trial){l=new Date(parseISODate(clientManager.current_user.free_trial.trial_end_date));p="Subscribe";if(l>new Date()){inner_text='Free trial period is ending <span class="highlight"><span class="relative_date" title="'+ISODateString(l)+'"></span></span>'}else{if(clientManager.current_user.free_trial.eligible){inner_text="Your free 3-day trial has ended.";p="Extend free trial";o="true"}else{inner_text='<div style="font-size:14px;font-weight:bold;line-height:18px;">You are using a free Rdio account.</div><div style="line-height:14px;margin-top:4px;font-size:12px;color:#cbdbe7;">You can only stream 30-second previews, but you can still buy music to download. <strong style="font-weight: bold;color:#fff;">Subscribe now to unlock full-length streaming.</strong></div>';n.addClass("free_account")}}}else{n.html("").hide();return}}}}var h=l.getTime()-(new Date()).getTime()+500;if(h>0&&h<60*60*24*7){if(n.data("timer")){clearTimeout(n.data("timer"));n.removeData("timer")}n.data("timer",setTimeout(function(){b()},h))}s+='<div class="info">';s+=inner_text;s+="</div>";s+='<div class="button_row">';s+='<a class="button default_button';if(!o){s+=" large_button"}if(j==""){j="/management/subscriptions/"}s+='" href="'+j+'">'+p+"</a>";s+="</div>";n.html(s);n.show();processAddedNodes(n)}}}function f(){var j=$("#invite_count_holder");if(!clientManager.current_user.invite_count||clientManager.current_user.invite_count==0){j.hide();return}else{j.show()}var h="";if(clientManager.current_user.invite_count!=-1){h=clientManager.current_user.invite_count;if(h==1){h+=" Invite"}else{h+=" Invites"}}else{h="Invite"}$("#invite_count").html(h)}clientManager.addListener(g);return function(){b();f();c()}}function NowPlayingManager(b,a,e){var c=this;this._container=$(b);this._clear_queue_button=$(".clear_queue",this._container);this._queue_track_count=$(".queue_track_count",this._container);this._player_model=player_model;this._queue=new Array();this._queue_num_songs=0;this._duration=player_model.duration;this._sort_item=null;this._sort_item_start_index=null;this._player=getPlayer();this._is_self=clientManager.current_user.id==a;this._user_id=a;this._expecting_queue_change=false;var d=$(".queue",this._container);if(e){this._clear_queue_button=$("#clear_queue_button");this._clear_queue_button.click(function(f){return false});this._queue_track_count=$("#queue_track_count")}if(this._is_self){if(!e||e=="queue"){d.sortable({containment:"parent",tolerance:"pointer"});d.bind("sortstart",function(f,g){c._sort_item=g.item;c._sort_item_start_index=$(".queue",c._container).find("> .queue_item").index(c._sort_item)});d.bind("sortstop",function(g,h){var f=$(".queue",c._container).find("> .queue_item").index(c._sort_item);c._expecting_queue_change=true;c._player._moveQueuedSource(c._sort_item_start_index,f);c.updateQueuePositions()});$(document).bind("queueChange.now_playing",function(f){c.onChange(f.queue)});this._clear_queue_button.click(function(f){c._player._clearQueue();c._updateQueueDurationLabels()});this.onPlayingSourceChanged(player_model.playingSource);$(document).bind("playingSourceChanged.now_playing",function(f){c.onPlayingSourceChanged(f.source)});this.onPlayingTrackChanged(player_model.playingTrack,player_model.sourcePosition);$(document).bind("playingTrackChanged.now_playing",function(f){c.onPlayingTrackChanged(f.track,f.sourcePosition)});$(window).bind("unload",function(f){$(document).unbind("playingSourceChanged.now_playing");$(document).unbind("queueChange.now_playing");$(document).unbind("playingTrackChanged.now_playing")})}}else{$(this._clear_queue_button).hide();if(!e){asyncRequest({call:"getNowPlayingForUser",content:{uid:this._user_id},success:function(f){c.onPlayingSourceChanged(f)}})}}if(e){if(e=="queue"){$(".queue",c._container).show();c.loadItems()}else{if(e=="history"){$(".history",c._container).show();c.loadHistory()}}}else{$(".now_playing_content .accordion_item",this._container).each(function(f){if(!$(".accordion_header",this).hasClass("active")){$(".accordion_content",this).hide()}});$(".now_playing_content .accordion_header",this._container).click(function(g){var f=$(".accordion_content",$(this).closest(".accordion_item"));if($(this).hasClass("active")){$(this).removeClass("active");f.hide()}else{$(this).addClass("active");f.show()}if(f.hasClass("recent")&&!f.hasClass("loaded")){f.addClass("loaded");c.loadRecentlyPlayed()}c.onResize()});this.loadItems()}}NowPlayingManager.prototype.resetRecentlyPlayed=function(){var a=$("#recently_played_accordion_item",this._container);a.find(".accordion_header").removeClass("active");a.find(".accordion_content").removeClass("loaded").hide()};NowPlayingManager.prototype.onResize=function(){var b=$("#now_playing_dialog");if(b.length>0){var a=b.css("overflow");if(!a||a==="visible"){b.css("overflow","hidden")}if(b[0].clientHeight<b[0].scrollHeight){b.addClass("overflowing")}else{b.removeClass("overflowing")}b.css("overflow",a);$(".carousel .controls button.page.selected",b).click()}};NowPlayingManager.prototype.onPlayingSourceChanged=function(b){var a=this;$(".now_playing",this._container).empty();if(b){if(b.type=="t"){a._appendSourceItem($(".now_playing",this._container),b,true)}else{a._appendSourceItem($(".now_playing",this._container),b,true)}}else{if(this._is_self){$(".now_playing",this._container).html($("#js_templates #empty_states .now_playing_empty").html());$(".now_playing .empty_state .content_alert",this._container).html("You are not currently listening to anything.")}else{$(".now_playing",this._container).html($("#js_templates #empty_states .now_playing_empty").html());$(".now_playing .empty_state .content_alert",this._container).html("This user is not currently listening to anything.")}}a.onResize()};NowPlayingManager.prototype.onPlayingTrackChanged=function(a,b){$(".now_playing .song_list .track",this._container).removeClass("now_playing");$(".now_playing .song_list .track:nth-child("+(b+1)+")",this._container).addClass("now_playing")};NowPlayingManager.prototype.loadRecentlyPlayed=function(){var a=this;asyncRequest({call:"getRecentlyPlayedSourcesForUser",content:{uid:this._user_id},shieldElement:$("#recently_played_accordion_item",a._container),success:function(b){var c=$(".recent .carousel_area",a._container);$.each(b,function(f){var h=this.name;var d;if(this.url){d=this.url}if(this.type=="t"){h='<a class="title" href="'+this.url+'">'+this.name+'</a><span class="info"><a href="'+this.artistUrl+'">'+this.artist+"</a></span>"}else{if(this.type=="a"){h='<a class="title" href="'+this.url+'">'+this.name+'</a><span class="info"><a href="'+this.artistUrl+'">'+this.artist+"</a></span>"}else{if(this.type=="p"){h='<a class="title" href="'+this.url+'">'+this.name+'</a><span class="info">Playlist by '+this.owner+"</span>"}else{if(this.type=="al"){h='<a class="title" href="'+this.url+'">'+this.albumName+'</a><span class="info"><a href="'+this.artistUrl+'">'+this.artistName+"</a> from "+this.userName+"&rsquo;s collection</span>"}else{if(this.type=="rl"){h='<a class="title" href="'+this.url+'">'+this.artistName+'</a><span class="info">from '+this.userName+"&rsquo;s collection</span>"}else{if(this.type=="rr"){d=this.artistUrl;h='<a class="title" href="'+this.artistUrl+'">'+this.artistName+'</a><span class="info">Artist Radio</span>'}else{if(this.type=="tr"){h='<a class="title" href="'+this.url+'">'+this.name+'</a><span class="info">Top Songs</span>'}}}}}}}var g=$("<div />").addClass("image_wrapper").addClass("has_overlay");var l=server_info.is_address+"?m="+this.baseIcon+"&w=132&h=132&ov=2";if($.inArray(this.type,["rl","tr","rr"])>-1){l=server_info.is_address+"?m="+this.baseIcon+"&w=132&h=132&rc=5"}else{g.addClass("shadowbox_132")}if(this.type=="p"){l=this.icon}g.append($("<img />").attr("src",l).css("width","132px").css("height","132px"));var j=$("<a/>").addClass("nohover").data("item",this).data("index",f).append(g).attr("href",d).click(function(m){$.history.add($(this).data("item").url);return false});var e={location:$(".has_overlay",j),inside:"#now_playing_dialog .now_playing_content"};artworkOverlays(this,e);$("<li />").addClass("carousel_item").append(j).append($("<div />").addClass("source_name").html(h)).appendTo(c)});paginate({control_area:$(".controls",c.closest(".carousel")),list:c,state:$(".recent",a._container),perPage:5,animate:true});a.onResize()}})};NowPlayingManager.prototype._appendSourceItem=function(f,h,g){var j=this;var b=h;if("source" in h){b=h.source}if(b.type=="t"){var c=h;var d="";if("tracks" in c){c=h.tracks[0].track;d=h.tracks[0].time}if(!g){var l=$("#now_playing_templates .complex_source").clone().appendTo(f);$(".main_description a",l).attr("href",c.albumUrl).text(c.album);if("albumArtistID" in c&&c.albumArtistID==server_info.various_artist_id){$("<span />").text(c.albumArtist).appendTo($(".secondary_description",l))}else{$("<a />").attr("href",c.artistUrl).text(c.artist).appendTo($(".secondary_description",l))}$(".art",l).attr("src",server_info.is_address+"?m="+c.baseIcon+"&w=50&h=50&ov=2");$(".song_list",l).remove();$(".menu_sus",l).hide()}var l=$("<div />").addClass("song_list").addClass("single_song").append(j._generateTrackRow(c,c,g,0,d)).appendTo(f);if(g){l.addClass("playlist_song_list")}else{l.addClass("album_song_list")}}else{var l=$("#now_playing_templates .complex_source").clone().appendTo(f);var e="";if(g){$("button.play",l).hide()}switch(b.type){case"a":$(".main_description a",l).attr("href",b.url).text(b.name);if(b.artistID==server_info.various_artist_id){$("<span />").text(b.artist).appendTo($(".secondary_description",l))}else{$("<a />").attr("href",b.artistUrl).text(b.artist).appendTo($(".secondary_description",l))}$("button.play",l).play(b);e="album_song_list";break;case"p":$(".main_description a",l).attr("href",b.url).html(b.name);$(".secondary_description",l).append($("<span />").text("Playlist by "),$("<a />").attr("href",b.ownerUrl).html(b.owner));$("button.play",l).play(b);e="playlist_song_list";break;case"al":$(".main_description a",l).attr("href",b.albumUrl).text(b.albumName);$(".secondary_description",l).append($("<a />").attr("href",b.artistUrl).text(b.artist),$("<span />").text(" from "),$("<a />").attr("href",b.url).html(b.userName+"&rsquo;s collection"));$("button.play",l).play(b);e="album_song_list";break;case"rl":$(".main_description a",l).attr("href",b.artistUrl).text(b.artistName);$(".secondary_description",l).append($("<span />").text("From "),$("<a />").attr("href",b.url).html(b.userName+"&rsquo;s collection"));$("button.play",l).play(b);e="artist_song_list";break;case"rr":$(".main_description a",l).attr("href",b.artistUrl).text(b.artistName);$("button.play",l).play(b);if(g){j._addCountSelector(b,l);j._addMixSelector(b,l)}e="playlist_song_list";break;case"tr":$(".main_description a",l).attr("href",b.url).text(b.name);$("button.play",l).play(b);if(g){j._addCountSelector(b,l);j._addMixSelector(b,l)}e="artist_song_list";break;default:$(".main_description a",l).attr("href",b.url).text(b.name);break}if(e!=""){$(".song_list",l).addClass(e)}if(b.type=="rl"||b.type=="rr"||b.type=="tr"||b.type=="p"){var a=b.baseIcon;if(b.type=="p"){a=b.ownerIcon}$(".album_art",l).addClass("no_shadow");$(".art",l).attr("src",server_info.is_address+"?m="+a+"&w=50&h=50&rc=5")}else{$(".art",l).attr("src",server_info.is_address+"?m="+b.baseIcon+"&w=50&h=50&ov=2")}$.each(h.tracks,function(n){var m=this;var o="";if("track" in this){m=this.track;o=this.time}j._generateTrackRow(m,b,g,n,o).appendTo($(".song_list",l))});$(".source_info .menu_sus",l).autoSuspenders(b,{inside:"#now_playing_dialog .now_playing_content, #now_playing .now_playing_content"})}};NowPlayingManager.prototype._addCountSelector=function(a,b){$(".secondary_description",b).append($("<select />").append($("<option />").val("25").text("25 songs"),$("<option />").val("50").text("50 songs"),$("<option />").val("75").text("75 songs"),$("<option />").val("100").text("100 songs")).change(function(c){getPlayer()._setCurrentSourceLength(parseInt($(".secondary_description select",b).val()))}));$(".secondary_description select",b).val(a.count);$(".secondary_description select",b).selectSuspenders()};NowPlayingManager.prototype._addMixSelector=function(a,b){$("<div />").addClass("mix").append($("<input />").attr({type:"checkbox",id:"mix_related"}),$("<label />").text("Mix in related songs").attr("for","mix_related"),$("<a />").addClass("button").text("Refresh").attr("href","#")).insertAfter($("button.play",b));if(a.type=="tr"&&!a.hasRadio){$(".mix input",b).remove();$(".mix label",b).remove()}if(a.type=="rr"){$(".mix input",b).attr("checked",true)}$(".mix a.button",b).click(function(c){var d={};d.id=a.id;d.count=a.count;if($(".mix input",b).is(":checked")){d.type="rr"}else{d.type="tr"}getPlayer()._mixSource(d);c.preventDefault();return false})};NowPlayingManager.prototype._generateTrackRow=function(a,g,f,d,h){var b=this;var c=$("#now_playing_templates > .track").clone();if(d==0){c.addClass("first")}if(f){$(".index span",c).text(d+1);if(!a.can_stream){c.addClass("no_stream");if(!a.can_download){if(a.can_download_album_only){$(".duration",c).text("Album Download Only")}else{if(a.can_sample){$(".duration",c).text("Preview Only")}else{$(".duration",c).text("Not Available")}}}else{$(".duration",c).text("Download Only")}}else{$(".duration",c).text(formatSeconds(a.duration))}if(player_model.sourcePosition==d&&b._is_self){c.addClass("now_playing")}if(b._is_self){$(".play",c).click(function(l){var j=$(".index span",$(l.target).closest(".track")).text()-1;getPlayer()._setCurrentPosition(j);return false})}else{$(".play",c).click(function(l){var j=$(".index span",$(l.target).closest(".track")).text()-1;g.initial_offset=j;getPlayer()._playSource(g);delete g.initial_offset;return false})}}else{$(".index",c).remove()}if(g.type=="p"||g.type=="rl"||g.type=="rr"||g.type=="tr"||(f&&g.type=="t")){var e=$('<div class="icon shadowbox_35" />').append($("<img />").attr("src",server_info.is_address+"?m="+a.baseIcon+"&w=35&h=35"));if(f){e.insertAfter($(".index",c))}else{e.prependTo(c)}$('<div class="album_info"/>').append($('<a class="artist" />').text(a.artist).attr("href",a.artistUrl)," - ",$('<a class="album" />').text(a.album).attr("href",a.albumUrl)).insertAfter($(".title_info",c))}if(g.type=="a"&&g.artistID==server_info.various_artist_id){$(c).addClass("various_artists");$('<div class="artist_info"/>').append($('<a class="artist" />').text(a.artist).attr("href",a.artistUrl)).insertAfter($(".title_info",c))}$(".title_info a",c).text(a.name).attr("href",a.url);if(!f){$("<button />").addClass("play medium").play(a).prependTo(c);$(".duration",c).append($('<span class="relative_date" />').text(h).attr("title",h).relativeTime())}$(".menu_sus",c).autoSuspenders(a,{inside:"#now_playing_dialog .now_playing_content, #now_playing .now_playing_content"});return c};NowPlayingManager.prototype.loadHistory=function(){var a=this;var b=$(".history",a._container);b.empty();if(history_sources.length>0){$.each(history_sources,function(c){a._appendSourceItem(b,this,false)});$("div:last-child",b).addClass("last")}else{b.html($("#js_templates #empty_states .now_playing_empty").html());$(".big_empty_state h3",b).html("Nothing played yet");$(".big_empty_state p",b).html("Check back later.");$(".big_empty_state p.action",b).html("")}};NowPlayingManager.prototype._getTargetIndexFromEvent=function(a){var b=$(a.target).closest("div.queue_item");return $(".queue",this._container).find("> .queue_item").index(b)};NowPlayingManager.prototype.removeFromQueue=function(a){self._expecting_queue_change=true;this._player._removeFromQueue(a);$(".queue",this._container).find("> .queue_item:nth-child("+(a+1)+")").remove()};NowPlayingManager.prototype.loadItems=function(){if(this._is_self){this.onChange(player_model.queue)}else{var a=this;asyncRequest({call:"getQueue",content:{uid:this._user_id},success:function(b){a.onChange(b.sources)}})}};NowPlayingManager.prototype.onChange=function(a){this._queue=a;if(this._expecting_queue_change){this._expecting_queue_change=false;this._updateQueueDurationLabels();return}if(a&&a.length==0){$(".queue",this._container).html($("#js_templates #empty_states .now_playing_empty").html());if(this._is_self){$(".queue .big_empty_state",this._container).addClass("empty_queue").html('<h3>There is nothing in your queue.</h3><p>Your queue is a place to store music that you\'d like to listen to at some point in the future. You can add as many songs, albums, and playlists as you want.<p class="action">To add something to your queue, click <span class="plus_button">the plus menu</span> next to it and choose &ldquo;Add to Queue.&rdquo; </p>');this._clear_queue_button.hide()}else{$(".queue .big_empty_state",this._container).addClass("empty_queue").html("<h3>There is nothing in the queue.</h3><p>The queue is a place to store music that you'd like to listen to at some point in the future. You can add as many songs, albums, and playlists as you want.</p>")}}else{if(this._is_self){this._clear_queue_button.show()}$(".queue",this._container).empty();this._generateItems()}this._updateQueueDurationLabels()};NowPlayingManager.prototype._generateItems=function(){$(".queue",this._container).empty();if(!this._queue){return}var j=this;for(var e=0;e<this._queue.length;++e){var c=this._queue[e];var f=c.type;var h=parseInt(Math.random()*1000000);var n=$("#now_playing_templates .queue_item").clone();if(e==0){n.addClass("first")}if(n==null){throw ("Could not clone the template url.");return}n.attr("id","queue_item_"+h);n.attr("index",e);$(".index span",n).html(e+1);var b=c.baseIcon;$(".album_art img",n).attr("src",server_info.is_address+"?w=50&h=50&ov=2&m="+b);$("button.play",n).attr("value",c.id);var d=$(".metadata_1",n);var a=$(".metadata_2",n);var g="";if(c.tracks){g+=c.tracks.length+" songs, "}g+=formatSeconds(j._sourceDuration(c))+" minutes";a.find(".info_1").text(g);if(f=="t"){n.find(".title a").text(c.name).attr("href",c.url).end().find("button.play").play(c);d.find(".info_1 a").text(c.album).attr("href",c.albumUrl).end().find(".info_2 a").text(c.artist).attr("href",c.artistUrl).end();a.find(".badge").text("song").end()}else{if(f=="a"){n.find(".title a").attr("href",c.url).text(c.name).end().find("button.play").play(c);d.find(".info_1 a, .separator").hide().end().find(".info_2 a").attr("href",c.artistUrl).text(c.artist);a.find(".badge").text("album").end()}else{if(f=="p"){n.find(".title a").attr("href",c.url).html(c.name).end().find("button.play").play(c);d.find(".info_1").hide().end().find(".separator").hide().end().find(".info_2 a").html(c.owner).attr("href",c.ownerUrl);a.find(".badge").text("playlist").end()}else{if(f=="al"){var m=$(".info_1",d).remove();m.html("from "+c.userName+"&rsquo;s Collection");n.find(".title").append(m).end().find(".title a").text(c.albumName).end().find("button.play").play(c);d.find(".info_1").text("from ").end().find(".separator").hide().end().find(".info_2 a").text(c.artistName).attr("href",c.artistUrl);a.find(".badge").text("album").end()}else{if(f=="rl"){n.find(".title a").text(c.artistName).attr("href",c.url).end().find("button.play").play(c);d.find(".info_1").text("from ").end().find(".separator").hide().end().find(".info_2 a").html(c.userName+"&rsquo;s collection").attr("href",c.url);a.find(".badge").text("artist").end()}else{if(f=="rr"){n.find(".title a").attr("href",c.artistUrl).text("Songs based on "+c.artistName);a.find(".badge").hide();d.find(".separator").hide()}else{if(f=="tr"){n.find(".title a").attr("href",c.url).text("Top songs by "+c.name);a.find(".badge").hide();d.find(".separator").hide()}}}}}}}$(".queue",this._container).append(n);if($.inArray(f,["t","a","p"])==-1){var l=$.extend({},c,{inside:"#now_playing_dialog .now_playing_content, #now_playing .now_playing_content"});$(".menu_sus",n).multiSuspenders(l)}else{$(".menu_sus",n).autoSuspenders(c,{inside:"#now_playing_dialog .now_playing_content, #now_playing .now_playing_content"})}}if(j._is_self){$(".queue",this._container).find(".remove").show();this._initializeListeners();this._updateQueueDurationLabels()}else{$(".queue",this._container).find(".remove").hide()}};NowPlayingManager.prototype._updateQueueDurationLabels=function(){this._calculateQueueDuration();this._calculateNumSongs();var a=(this._queue_num_songs==1)?" song":" songs";this._queue_track_count.html(this._queue_num_songs+a+". "+formatSeconds(this._duration)+" minutes")};NowPlayingManager.prototype._initializeListeners=function(){var a=this;$(".queue",this._container).find(".remove").click(function(c){var d=a._getTargetIndexFromEvent(c);var b=$(c.target).closest("div.queue_item");a._expecting_queue_change=true;b.fadeOut(function(){a.removeFromQueue(d);a.updateQueuePositions()});return false});$(".queue",this._container).find(".play").click(function(d){var b=$(d.target).closest(".queue_item");var c=b.attr("index");a._expecting_queue_change=true;getPlayer()._playQueuedTrack(c,0);$(b).fadeOut(function(){$(this).remove();a.updateQueuePositions()});return false});$(".queue",this._container).find(".move_to_top").click(function(b){var c=a._getTargetIndexFromEvent(b);if(c==0){return false}a._player._moveQueuedSource(c,0);return false})};NowPlayingManager.prototype.updateQueuePositions=function(){$(".queue",this._container).find("> .queue_item").each(function(a){$(this).attr("index",a);$(this).find(".index span").text(a+1)});$(".queue .queue_item.first",this._container).removeClass("first");$(".queue .queue_item:first",this._container).addClass("first")};NowPlayingManager.prototype._sourceDuration=function(a){var b=0;if(a.type=="t"){b+=a.duration}else{$.each(a.tracks,function(c){b+=this.duration})}return b};NowPlayingManager.prototype._calculateQueueDuration=function(){this._duration=0;if(!this._queue){return}var a=this;for(var b=0;b<this._queue.length;b++){var c=this._queue[b];a._duration+=a._sourceDuration(c)}};NowPlayingManager.prototype._calculateNumSongs=function(){this._queue_num_songs=0;if(!this._queue){return}for(var a=0;a<this._queue.length;a++){var b=this._queue[a];if(b.type=="t"){this._queue_num_songs++}else{if(b.tracks){this._queue_num_songs+=b.tracks.length}}}};var Bujagali=(function(){var headEl=(typeof document!="undefined")?document.getElementsByTagName("head")[0]:null;var pendingExec={};return{fxns:{},helpers:{},render:function(name,context,callback,args){this.load(name,context.bgDeps?context.bgDeps[name]:null,context.bgRoot);this.exec.apply(this,arguments)},load:function(name,version,root){root=root?root:"";var src;if(this.fxns[name]&&this.fxns[name].version==version){return}if(version){src=root+"/media/bujagali/"+name+"."+version+".js"}else{throw new Error("No template version found for "+name)}if(headEl){var script;script=document.createElement("script");script.type="text/javascript";script.src=src;headEl.appendChild(script)}else{if(typeof load!="undefined"){load(src)}else{if(typeof require!="undefined"){fs=require("fs");eval(fs.readFileSync(src).toString())}}}},fxnLoaded:function(name){if(pendingExec[name]){this.exec.apply(this,pendingExec[name]);pendingExec[name]=undefined}},exec:function(name,data,idOrCallback,args){var template=this.fxns[name];if(template){if(data.bgDeps&&template.version!=data.bgDeps[name]){log("old template cached, requesting new one");pendingExec[name]=arguments;this.load(name,data.bgDeps[name],data.bgRoot)}else{template(data,args,function(markup){if(typeof idOrCallback==="string"){$(idOrCallback).html(markup)}else{if(typeof idOrCallback==="function"){idOrCallback(data,markup,args)}}})}}else{pendingExec[name]=arguments}},randomID:function(){return Math.floor(Math.random()*10000000)},dateDisplay:function(date){return'<span class="relative_date" title="'+date+'">'+date+"</span>"},displayName:function(user){return user.firstName+" "+user.lastName},possessivePronoun:function(user){if(user.gender=="m"||user.gender=="M"){return"his"}return"her"},possessiveName:function(name){if(name.match("s$")===null){return name+"'s"}return name+"'"},prettyType:function(t){if(t=="t"){return"Song"}if(t=="a"){return"Album"}if(t=="p"){return"Playlist"}if(t=="r"){return"Artist"}},pluralize:function(num,suffix){if(num>1){return suffix||"s"}else{return""}},escape:function(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},zeroPad:function(num){if(num<10){return"0"+num}else{return num}},formatSeconds:function(s){seconds=s%60;minutes=Math.floor(s/60)%60;hours=Math.floor(s/3600)%24;days=Math.floor(s/86400);return(days>=1?days+":":"")+(hours>=1?hours+":":"")+(minutes>=1?minutes+":":"")+this.zeroPad(seconds)},deEscape:function(str){if(!str){return""}var retval=str.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&");return retval},url:function(object,suburl){if(arguments.length==1){suburl=""}if(object=="management-subscriptions"){return"/management/subscriptions/"}if(suburl===""){return object.url}if(object.type=="s"){if(suburl=="collection"){return object.url+"collection/"}}return""}}})();if(typeof exports!="undefined"){for(key in Bujagali){if(Bujagali.hasOwnProperty(key)){exports[key]=Bujagali[key]}}}Bujagali.fxns["templates/player/player.bg.html"]=function(c,e,a){var h="";var f=true;function g(){f=false}function b(){a(h)}function d(j){h+=j}d(['<div id="p_column" class="clearfix">\n  <div id="logo">\n    <a href="/"><img src="'].join(""));d([(server_info.media_address),'images/base/logo.png" /></a>\n  </div>\n  <div id="inner_container" class="clearfix">\n    <div id="player_container">\n      <div id="player_image_container">\n        <img id="playerNowPlayingImage" src="'].join(""));d([(server_info.is_address),'?m=artist/no-artist-image-square.jpg&w=180&h=180&ov=1&rc=5,5,0,0" />\n      </div>\n      <div id="playerNowPlayingContainer" class="clearfix">\n        <div class="clearfix">\n          <button id="previousButton" class="disabled"></button>\n          <button id="playButton" class="disabled"></button>\n          <button id="pauseButton"></button>\n          <button id="nextButton" class="disabled"></button>\n          <button id="flyout_button" title="Display List of Upcoming Songs."></button>\n        </div>\n        <div class="player_now_playing_info">\n          <div id="playerNowPlayingTitle"> <span class="sample" title="Song not available for full-length streaming.">clip only</span><a></a></div>\n          <div id="playerNowPlayingArtist"><a></a></div>\n          <div id="playerNowPlayingAlbum"><a></a></div>\n        </div>\n        <div id="playerTrackSlider">\n        </div>\n        <img id="playerTrackBufferingSlider" src="'].join(""));d([(server_info.media_address),'images/player/player_buffering.gif" />\n        <div id="playerTrackSliderLabelValue">-:--</div>\n        <div id="playerTrackSliderLabelTimeLeft">-:--</div>\n      </div>\n      <div id="nonPlaybackButtonsContainer" class="clearfix">\n        <span id="player_source_size"></span>\n        <button id="repeat_button" title="Play Once, Repeat All or Repeat Song."></button>\n        <button id="shuffle_button" title="Turn Shuffle On or Off."></button>\n      </div>\n      <div id="volume_container" class="clearfix">\n        <button id="volume_button" title="Adjust Volume."></button>\n        <div id="volume_tray">\n          <div id="volumeSlider" class="hover"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="warning_box" style="display:none;">\n  </div>\n</div>\n'].join(""));if(f){b()}};Bujagali.fxns["templates/player/player.bg.html"].version="8f403b9feb5e5e61458feae198e6cd13";Bujagali.fxnLoaded("templates/player/player.bg.html");Bujagali.fxns["profiles/templates/hr.bg.html"]=function(c,e,a){var h="";var f=true;function g(){f=false}function b(){a(h)}function d(j){h+=j}d([""].join(""));if(c.items.length!=0){d(["\n  "].join(""));$.each(c.items,function(){d(["\n    "].join(""));var j=$.t.randomID();d(['\n    <div id="a-'].join(""));d([(j),'" class="album">\n      <div class="image_wrapper shadowbox_132">\n        <a class="has_overlay" href="'].join(""));d([(this.url),'">\n          <img src="'].join(""));d([(server_info.is_address),"?m="].join(""));d([(this.baseIcon),'&w=132&h=132&ov=2" width="132" height="132" />\n        </a>\n      </div>\n      <div class="info_card">\n        <a href="'].join(""));d([(this.url),'" class="name" title="'].join(""));d([(this.name),'">'].join(""));d([(this.name),'</a>\n        <a href="'].join(""));d([(this.artistUrl),'" class="artist" title="'].join(""));d([(this.artist),'">'].join(""));d([(this.artist),"</a>\n      </div>\n    </div>\n    <script>\n      artworkOverlays("].join(""));d([($.toJSON(this)),", {\n        'location': $('#a-"].join(""));d([(j)," .has_overlay')\n      });\n    <\/script>\n  "].join(""))});d(["\n"].join(""))}else{d(['\n  <div class="wrapper" style="position:relative">\n    <div style="clear:both;"></div>\n    <div class="overlay_tip">\n      <div class="big_empty_state empty_plays round_box">\n        '].join(""));if(e.id==clientManager.current_user.id){d(["\n          "].join(""));if(e.scope=="person"){d(['\n            <h3>You haven\'t played any music yet</h3>\n            <p>As you listen to music, Rdio will learn which albums you play the most. Those albums will show up here, so you can quickly play your favorite stuff.</p>\n            <p class="action"><a href="/browse/">See what\'s popular on Rdio</a> or search for something to play.</p>\n          '].join(""))}else{d(['\n            <h3>Your network hasn\'t played any music yet.</h3>\n            <p>When you follow people, the albums they play the most are added to Heavy Rotation. You might find something new, or just keep tabs of what\'s making the rounds in your own personal network.</p>\n            <p class="action"><a href="/invite/suggested_people/">Find some people to follow</a> or invite some friends to join.</p>\n          '].join(""))}d(["\n        "].join(""))}else{d(["\n          <h3>"].join(""));d([(c.firstName)," hasn't played any music yet.</h3>\n          <p>As "].join(""));d([(c.firstName),' listens to music, Rdio will learn which albums get the most plays and show them here.</p>\n          <p class="action">Check back later to see what '].join(""));d([(c.firstName)," is listening to.</p>\n        "].join(""))}d(["\n      </div>\n    </div>\n  </div>\n"].join(""))}d(["\n"].join(""));if(f){b()}};Bujagali.fxns["profiles/templates/hr.bg.html"].version="d0bc23f19b1c67a8b93977fd90f354fb";Bujagali.fxnLoaded("profiles/templates/hr.bg.html");Bujagali.fxns["profiles/templates/recent_activity.bg.html"]=function(q,a,n){var b="";var d=true;function o(){d=false}function l(){n(b)}function m(x){b+=x}m([""].join(""));if(q.updates.length!=0){m(["\n  "].join(""));$.each(q.updates,function(x){m(["\n    "].join(""));if(this.update_type==0){m(["\n      "].join(""));m([(s(this)),"\n    "].join(""))}else{if(this.update_type==1){m(["\n      "].join(""));m([(h(this)),"\n    "].join(""))}else{if(this.update_type==3){m(["\n      "].join(""));m([(j(this)),"\n    "].join(""))}else{if(this.update_type==6||this.update_type==7||this.update_type==8|this.update_type==9){m(["\n      "].join(""));m([(g(this)),"\n    "].join(""))}else{if(this.update_type==10){m(["\n      "].join(""));m([(w(this)),"\n    "].join(""))}else{if(this.update_type==11){m(["\n      "].join(""));m([(c(this)),"\n    "].join(""))}}}}}}m(["\n  "].join(""))});m(["\n"].join(""))}else{m(["\n  "].join(""));if(a.last_id==-1){m(['\n    <div class="big_empty_state empty_activity">\n      '].join(""));if(a.id==clientManager.current_user.id){m(["\n        "].join(""));if(a.scope=="person"){m(['\n          <h3>You don\'t have any activity yet.</h3>\n          <p>Whenever you add some music to your collection or update a playlist or write a review, it will show up here. Anyone who follows you on Rdio will also see it in their network activity.</p>\n          <p class="action"><a href="/browse/">Check out what\'s popular on Rdio</a> or search for your favorite music to get started.</p>\n        '].join(""))}else{m(['\n          <h3>There is no recent activity in your network.</h3>\n          <p>When you follow people, their activity shows up here. It\'s a great place to discover new music and playlists. Just follow some people and your Recent Activity will start filling up.</p>\n          <p class="action"><a class="button default_button more" href="/invite/suggested_people/">Find people to follow</a></p>\n        '].join(""))}m(["\n      "].join(""))}else{m(["\n        <h3>"].join(""));m([(q.user.firstName)," doesn't have any activity yet.</h3>\n        <p>Whenever "].join(""));m([(q.user.firstName)," adds music to "].join(""));m([($.t.possessivePronoun(q.user.gender)),' collection or updates a playlist or writes a review, it will show up here.</p>\n        <p class="action">Check back later to see what '].join(""));m([(q.user.firstName)," is up to.</p>\n      "].join(""))}m(["\n    </div>\n  "].join(""))}m(["\n"].join(""))}m(["\n\n"].join(""));function s(x){m(['\n  <div class="update clearfix">\n    <div class="icon person">\n      <a href="'].join(""));m([(x.owner.url),'"><img src="'].join(""));m([(server_info.is_address),"?m="].join(""));m([(x.owner.baseIcon),'&w=35&h=35&rc=4" width="35" height="35" /></a>\n    </div>\n    <div class="content">\n      <a class="name" href="'].join(""));m([(x.owner.url),'">'].join(""));m([($.t.displayName(x.owner)),"</a> added some music to "].join(""));m([($.t.possessivePronoun(x.owner)),' <a href="'].join(""));m([($.t.url(x.owner,"collection")),'">collection</a>.\n      <div class="album_list album_grid small clearfix">\n        '].join(""));$.each(x.albums,function(y){m(["\n          "].join(""));m([(f(this)),"\n        "].join(""))});m(['\n      </div>\n      <div class="timestamp">\n        '].join(""));m([($.t.dateDisplay(x.date)),"\n      </div>\n    </div>\n  </div>\n"].join(""))}m(["\n\n"].join(""));function h(x){m(['\n  <div class="update clearfix">\n    <div class="icon person">\n      <a href="'].join(""));m([(x.owner.url),'"><img src="'].join(""));m([(server_info.is_address),"?m="].join(""));m([(x.owner.baseIcon),'&w=35&h=35&rc=4" width="35" height="35" /></a>\n    </div>\n    <div class="content">\n      <a class="name" href="'].join(""));m([(x.owner.url),'">'].join(""));m([($.t.displayName(x.owner)),"</a> updated "].join(""));if(x.owner.id==x.playlist.ownerID){m([""].join(""));m([($.t.possessivePronoun(x.owner)),""].join(""))}else{m(['<a href="'].join(""));m([(x.playlist.ownerUrl),'">'].join(""));m([($.t.possessiveName(x.playlist.owner)),"</a>"].join(""))}m([' <a href="'].join(""));m([(x.playlist.url),'">playlist</a>.\n      '].join(""));m([(e(x.playlist)),'\n      <div class="timestamp">\n        '].join(""));m([($.t.dateDisplay(x.date)),"\n      </div>\n    </div>\n  </div>\n"].join(""))}m(["\n\n"].join(""));function j(x){m(['\n  <div class="update followed clearfix">\n    <div class="icon">\n      <img src="/media/images/dashboard/people_following.png" />\n    </div>\n    <div class="content">\n      <a class="name" href="'].join(""));m([(x.owner.url),'">'].join(""));m([($.t.displayName(x.owner)),"</a> started following\n      "].join(""));$.each(x.people,function(y){m(['\n        <a href="'].join(""));m([(this.url),'">'].join(""));m([($.t.displayName(this)),"</a>"].join(""));if(y!=x.people.length-1){m([", "].join(""))}m(["\n      "].join(""))});m(["\n    </div>\n  </div>\n"].join(""))}m(["\n\n"].join(""));function g(x){m(['\n  <div class="update clearfix">\n    <div class="icon person">\n      <a href="'].join(""));m([(x.owner.url),'"><img src="'].join(""));m([(server_info.is_address),"?m="].join(""));m([(x.owner.baseIcon),'&w=35&h=35&rc=4" width="35" height="35" /></a>\n    </div>\n    <div class="content">\n      <a class="name" href="'].join(""));m([(x.owner.url),'">'].join(""));m([($.t.displayName(x.owner)),"</a> reviewed a"].join(""));if(x.update_type==7||x.update_type==8){m(["n"].join(""))}m([' <a href="'].join(""));m([(x.reviewed_item.url),'">'].join(""));m([($.t.prettyType(x.reviewed_item.type).toLowerCase()),"</a>.\n      "].join(""));m([(e(x.reviewed_item)),'\n      <div class="review">\n        '].join(""));m([(x.comment),'\n      </div>\n      <div class="timestamp">\n        '].join(""));m([($.t.dateDisplay(x.date)),"\n      </div>\n    </div>\n  </div>\n"].join(""))}m(["\n\n"].join(""));function w(x){m(['\n  <div class="update clearfix">\n    <div class="icon person">\n      <a href="'].join(""));m([(x.owner.url),'"><img src="'].join(""));m([(server_info.is_address),"?m="].join(""));m([(x.owner.baseIcon),'&w=35&h=35&rc=4" width="35" height="35" /></a>\n    </div>\n    <div class="content">\n      <a class="name" href="'].join(""));m([(x.owner.url),'">'].join(""));m([($.t.displayName(x.owner)),"</a> matched "].join(""));m([($.t.possessivePronoun(x.owner))," local library and added some music to "].join(""));m([($.t.possessivePronoun(x.owner)),' <a href="'].join(""));m([($.t.url(x.owner,"collection")),'">collection</a>.\n      <div class="album_list album_grid small clearfix">\n        '].join(""));$.each(x.albums,function(y){m(["\n          "].join(""));m([(f(this)),"\n        "].join(""))});m(['\n      </div>\n      <div class="timestamp">\n        '].join(""));m([($.t.dateDisplay(x.date)),' from <a href="/apps/desktop/">Rdio Desktop</a>.\n      </div>\n    </div>\n  </div>\n'].join(""))}m(["\n\n"].join(""));function c(x){m(['\n  <div class="update followed clearfix">\n    <div class="icon">\n      <img src="/media/images/dashboard/rdio_message.png" />\n    </div>\n    <div class="content">\n      <a class="name" href="'].join(""));m([(x.owner.url),'">'].join(""));m([($.t.displayName(x.owner)),'</a> <a href="'].join(""));m([($.t.url("management-subscriptions")),'">subscribed</a> to Rdio.\n    </div>\n  </div>\n'].join(""))}m(["\n\n"].join(""));function f(y){m(["\n  "].join(""));var x=$.t.randomID();m(["\n  "].join(""));var A=!y.can_stream;m(["\n  "].join(""));var z=(A&&!y.can_sample);m(['\n  <div id="album-'].join(""));m([(x),'" class="album_container album'].join(""));if(A){m([" no_stream"].join(""))}m([""].join(""));if(z){m([" no_sample"].join(""))}m(['">\n    <div class="icon_container shadowbox_100">\n      <a href="'].join(""));m([(y.url),'" class="icon has_overlay">\n        <img src="'].join(""));m([(server_info.is_address),"?m="].join(""));m([(y.baseIcon),'&w=100&h=100&ov=2" width="100" height="100" />\n      </a>\n    </div>\n    <div class="info_card">\n      <h3 class="name">\n        <a href="'].join(""));m([(y.url),'" title="'].join(""));m([(y.name),'">'].join(""));m([(y.name),'</a>\n      </h3>\n      <p class="artist_name">\n        <a href="'].join(""));m([(y.artistUrl),'" title="'].join(""));m([(y.artist),'">'].join(""));m([(y.artist),"</a>\n      </p>\n    </div>\n  </div>\n  <script>\n    artworkOverlays("].join(""));m([($.toJSON(y)),", {\n      location: $('#album-"].join(""));m([(x),' .has_overlay\')\n    });\n    $(\'#album-.no_stream .play\').tipSuspenders({\n      width: "150px",\n      persist: true,\n      content: \'<div class="centered padded light">Currently unavailable for full-length streaming in your region. <a href="http://help.rdio.com/faqs/using-rdio/clip-only" target="_blank">Why?</a></div>\'\n    });\n  <\/script>\n'].join(""))}m(["\n\n"].join(""));function e(x){m(["\n  "].join(""));if(x.type=="p"){m(["\n    "].join(""));m([(p(x)),"\n  "].join(""))}else{if(x.type=="a"){m(["\n    "].join(""));m([(u(x)),"\n  "].join(""))}else{if(x.type=="t"){m(["\n    "].join(""));m([(r(x)),"\n  "].join(""))}else{if(x.type=="r"){m(["\n    "].join(""));m([(v(x)),"\n  "].join(""))}}}}m(["\n"].join(""))}m(["\n\n"].join(""));function v(x){m(["\n  "].join(""));var y=$.t.randomID();m(['\n  <div id="artist-'].join(""));m([(y),'" class="item artist clearfix">\n    <button class="play large" ></button>\n    <script>\n      $(\'#artist-'].join(""));m([(y)," button.play').play({type: 'tr', id: "].join(""));m([(x.id),' });\n    <\/script>\n    <div class="image_wrapper">\n      <a href="'].join(""));m([(x.url),'"><img src="'].join(""));m([(server_info.is_address),"?m="].join(""));m([(x.baseIcon),'&w=35&h=35&rc=4" /></a>\n    </div>\n    <div class="name">\n      <a href="'].join(""));m([(x.url),'">\n        '].join(""));m([(x.name),"\n      </a>\n    </div>\n  </div>\n"].join(""))}m(["\n\n"].join(""));function r(y){m(["\n  "].join(""));var x=$.t.randomID();m(["\n  "].join(""));var A=!y.can_stream;m(["\n  "].join(""));var z=(A&&!y.can_sample);m(['\n  <div id="track-'].join(""));m([(x),'" class="item track clearfix'].join(""));if(A){m([" no_stream"].join(""))}m([""].join(""));if(z){m([" no_sample"].join(""))}m(['">\n    <div class="menu_holder">\n      '].join(""));if(y.is_explicit){m(['\n        <span class="badge explicit">explicit</span>\n      '].join(""))}m(["\n      "].join(""));if(y.is_clean){m(['\n        <span class="badge">clean</span>\n      '].join(""))}m(["\n      "].join(""));if(z){m(['\n        <span class="duration streaminfo no_stream no_sample">Not Available</span>\n      '].join(""))}else{if(A&&y.can_download){m(['\n        <span class="duration streaminfo no_stream">Download Only</span>\n      '].join(""))}else{if(A&&y.can_download_album_only){m(['\n        <span class="duration streaminfo no_stream">Album Download Only</span>\n      '].join(""))}else{if(A){m(['\n        <span class="duration streaminfo no_stream">Preview Only</span>\n      '].join(""))}else{m(['\n        <span class="duration">'].join(""));m([(formatSeconds(y.duration)),"</span>\n      "].join(""))}}}}m(['\n      <span class="menu_sus"></span>\n    </div>\n    <button class="play large"></button>\n    <div class="image_wrapper shadowbox_35">\n      <a href="'].join(""));m([(y.url),'"><img src="'].join(""));m([(server_info.is_address),"?m="].join(""));m([(y.baseIcon),'&w=35&h=35&ov=2" /></a>\n    </div>\n    <div class="name">\n      <a href="'].join(""));m([(y.url),'" title="'].join(""));m([(y.name),'">\n        '].join(""));m([(y.name),'\n      </a>\n    </div>\n    <div class="info">\n      <a class="grey" href="'].join(""));m([(y.artistUrl),'" title="'].join(""));m([(y.artist),'">'].join(""));m([(y.artist),'</a> - <a class="grey" href="'].join(""));m([(y.albumUrl),'" title="'].join(""));m([(y.album),'">'].join(""));m([(y.album),'</a>\n    </div>\n    <script type="text/javascript">\n      $(\'#track-'].join(""));m([(x),"').data('object', "].join(""));m([($.toJSON(y)),");\n      $('#track-"].join(""));m([(x)," .menu_sus').autoSuspenders($('#track-"].join(""));m([(x),"').data('object'));\n      $('#track-"].join(""));m([(x)," button.play').play($('#track-"].join(""));m([(x),"').data('object'));\n      $('#track-"].join(""));m([(x),' .streaminfo.no_stream\').tipSuspenders({\n        width: "150px",\n        persist: true,\n        content: \'<div class="centered padded light">Currently unavailable for full-length streaming in your region. <a href="http://help.rdio.com/faqs/using-rdio/clip-only" target="_blank">Why?</a></div>\'\n      });\n    <\/script>\n  </div>\n'].join(""))}m(["\n\n"].join(""));function u(y){m(["\n  "].join(""));var x=$.t.randomID();m(["\n  "].join(""));var A=!y.can_stream;m(["\n  "].join(""));var z=(A&&!y.can_sample);m(['\n  <div id="album-'].join(""));m([(x),'" class="item album clearfix'].join(""));if(A){m([" no_stream"].join(""))}m([""].join(""));if(z){m([" no_sample"].join(""))}m(['">\n    <div class="menu_holder">\n      '].join(""));if(y.is_explicit){m(['\n        <span class="badge explicit">explicit</span>\n      '].join(""))}m(["\n      "].join(""));if(y.is_clean){m(['\n        <span class="badge">clean</span>\n      '].join(""))}m(["\n      "].join(""));if(z){m(['\n        <span class="duration streaminfo no_sample no_stream">Not Available</span>\n      '].join(""))}else{if(A&&y.price){m(['\n        <span class="duration streaminfo no_stream">Download Only</span>\n      '].join(""))}else{if(A){m(['\n        <span class="duration streaminfo no_stream">Preview Only</span>\n      '].join(""))}}}m(['\n      <span class="menu_sus"></span>\n    </div>\n    <button class="play large" ></button>\n    <div class="image_wrapper shadowbox_50">\n      <a href="'].join(""));m([(y.url),'"><img src="'].join(""));m([(server_info.is_address),"?m="].join(""));m([(y.baseIcon),'&w=50&h=50&ov=2" /></a>\n    </div>\n    <div class="name">\n      <a href="'].join(""));m([(y.artistUrl),'" title="'].join(""));m([(y.artist),'">\n        '].join(""));m([(y.artist),'\n      </a>\n    </div>\n    <div class="info">\n      <a href="'].join(""));m([(y.url),'" title="'].join(""));m([(y.name),'">'].join(""));m([(y.name),'</a>\n    </div>\n    <script type="text/javascript">\n      var a_obj = '].join(""));m([($.toJSON(y)),";\n      $('#album-"].join(""));m([(x)," .menu_sus').autoSuspenders(a_obj);\n      $('#album-"].join(""));m([(x)," button.play').play(a_obj);\n      $('#album-"].join(""));m([(x),' .streaminfo.no_stream\').tipSuspenders({\n        width: "150px",\n        persist: true,\n        content: \'<div class="centered padded light">Currently unavailable for full-length streaming in your region. <a href="http://help.rdio.com/faqs/using-rdio/clip-only" target="_blank">Why?</a></div>\'\n      });\n    <\/script>\n  </div>\n'].join(""))}m(["\n\n"].join(""));function p(y){m(["\n  "].join(""));var x=$.t.randomID();m(['\n  <div id="playlist-'].join(""));m([(x),'" class="item clearfix">\n    <a class="inner_box" href="'].join(""));m([(y.url),'">\n      <div class="songs box_info">\n        <div class="box_title">songs</div>\n        <div class="box_data">'].join(""));m([(y.length),'</div>\n      </div>\n    </a>\n    <div class="menu_holder">\n      '].join(""));if(y.allow_collaboration){m(['\n        <span class="collaboration_indicator"></span>\n      '].join(""))}m(['\n      <span class="menu_sus"></span>\n    </div>\n    <button class="play large"></button>\n    <div class="name">\n      <a href="'].join(""));m([(y.url),'" title="'].join(""));m([(y.name),'">\n        '].join(""));m([($.t.deEscape(y.name)),'\n      </a>\n    </div>\n    <div class="info">\n      by <a class="grey" href="'].join(""));m([(y.ownerUrl),'" title="'].join(""));m([(y.owner),'">'].join(""));m([(y.owner),"</a>\n    </div>\n    "].join(""));if(y.description){m(['\n      <div class="description"><div class="description_inner">'].join(""));m([($.t.deEscape(y.description)),' <span class="more_link more_down">more</span></div></div>\n    '].join(""))}m(['\n    <script type="text/javascript">\n      var p_obj = '].join(""));m([($.toJSON(y)),";\n      $('#playlist-"].join(""));m([(x)," .menu_sus').autoSuspenders(p_obj);\n      $('#playlist-"].join(""));m([(x)," button.play').play(p_obj);\n      $('#playlist-"].join(""));m([(x)," .inner_box').tipSuspenders({\n        width: \"250px\",\n        content: '<b>Artists in this playlist: </b>' + p_obj.artistsTooltip + \".\"\n      });\n      var desc_inner_height = $('#playlist-"].join(""));m([(x)," .description .description_inner').height();\n      var desc_height = $('#playlist-"].join(""));m([(x)," .description').height();\n      if (desc_inner_height > desc_height)\n      {\n        $('#playlist-"].join(""));m([(x)," .description').addClass('collapsed');\n      }\n      $('#playlist-"].join(""));m([(x)," .description .more_link').click(function(event)\n      {\n        $('#playlist-"].join(""));m([(x)," .description').addClass('expanded');\n        $('#playlist-"].join(""));m([(x)," .description').removeClass('collapsed');\n      });\n      $('#playlist-"].join(""));m([(x)," .menu_sus').autoSuspenders(p_obj);\n      $('#playlist-"].join(""));m([(x)," button.play').play(p_obj);\n      $('#playlist-"].join(""));m([(x),' .inner_box\').tipSuspenders({\n        width: "250px",\n        content: \'<b>Artists in this playlist: </b>\' + p_obj.artistsTooltip + "."\n      });\n      '].join(""));if(y.allowCollaboration){m(["\n        var collab_content = $('<div style=\"text-align:center\">').html('This playlist is open for collaboration');\n        var collab_button = $('<a>').attr('href', '#').addClass('button').append(\n          $('<span>').text("].join(""));if(y.isCollaborating){m(["'Stop Participating'"].join(""))}else{m(["'Participate'"].join(""))}m([")\n        ).css('margin-top', '5px');\n        "].join(""));if(y.isCollaborating){m(["\n          collab_button.addClass('is_collaborating');\n        "].join(""))}m(["\n\n        collab_button.click(function(event)\n        {\n          if ($(this).hasClass('is_collaborating'))\n          {\n            stopPlaylistCollaboration("].join(""));m([(y.id),");\n            $(this).removeClass('is_collaborating');\n            $('span', this).text('Participate');\n          }\n          else\n          {\n            startPlaylistCollaboration("].join(""));m([(y.id),");\n            $(this).addClass('is_collaborating');\n            $('span', this).text('Stop Participating');\n          }\n\n          event.preventDefault();\n          return false;\n        });\n\n        collab_content.append(collab_button);\n        $('#playlist-"].join(""));m([(x)," .collaboration_indicator').tipSuspenders({\n          content: collab_content,\n          persist: true,\n          width: '140px'\n        });\n      "].join(""))}m(["\n    <\/script>\n  </div>\n"].join(""))}m(["\n"].join(""));if(d){l()}};Bujagali.fxns["profiles/templates/recent_activity.bg.html"].version="8d020bfba9301f7399000f328dd1f047";Bujagali.fxnLoaded("profiles/templates/recent_activity.bg.html");Bujagali.fxns["profiles/templates/top_artists.bg.html"]=function(c,e,a){var h="";var f=true;function g(){f=false}function b(){a(h)}function d(j){h+=j}d(['<ol class="artists_list">\n  '].join(""));$.each(c.items,function(j){d(['\n    <li id="topartist-'].join(""));d([(this.id),'">\n      <span class="index">'].join(""));d([(j+1+". "),' <button class="play small"></button></span><a href="'].join(""));d([(this.url),'">'].join(""));d([(this.name),"</a>\n      <script>\n        $('#topartist-"].join(""));d([(this.id)," button.play').play({type: 'tr', id: "].join(""));d([(this.id)," });\n      <\/script>\n    </li>\n  "].join(""))});d(["\n</ol>\n"].join(""));if(f){b()}};Bujagali.fxns["profiles/templates/top_artists.bg.html"].version="e83a2680b32c206d2786f349fb554080";Bujagali.fxnLoaded("profiles/templates/top_artists.bg.html");Bujagali.fxns["templates/snippets/playlist.bg.html"]=function(c,e,a){var h="";var f=true;function g(){f=false}function b(){a(h)}function d(j){h+=j}d([""].join(""));R.BG.helpers.render_playlist_for_list=function(l,m,u,o){var q="";var n=R.BG.randomID();function s(w){q+=w}s(['\n  <div id="playlist-'].join(""));s([(n),'" class="playlist_list_item clearfix'].join(""));if(l.allowCollaboration){s(" can_collaborate")}s(['">\n    <a class="icon" href="'].join(""));s([(l.ownerUrl),'">\n      <img src="'].join(""));s([(o),"?m="].join(""));s([(l.ownerIcon),'&h=35&w=35&rc=3" height="35" width="35" />\n    </a>\n    <button class="play large" />\n    <a class="inner_box icons clearfix" href="'].join(""));s([(l.url),'">\n      <div class="songs box_info">\n        <div class="box_title">\n          songs\n        </div>\n        <div class="box_data">\n          '].join(""));s([(l.length),'\n        </div>\n      </div>\n      <div class="canvas">\n        '].join(""));if(l.length>0){var r=l.baseThumbnails.length<4?l.baseThumbnails.length:4;for(var p=0;p<r;p++){var j=l.baseThumbnails[p];s(['\n            <img src="'].join(""));s([(o),"?m="].join(""));s([(j),'&w=35&h=35&ov=2" height="35" width="35" '].join(""));if(p==l.baseThumbnails.length-1){s(' class="last"')}s([" />\n          "].join(""))}s(["\n        "].join(""))}s(['\n      </div>\n    </a>\n    <div class="data">\n      <div class="menu_holder">\n        '].join(""));if(l.allowCollaboration){s(['\n          <span class="requires_login collaboration_indicator"></span>\n        '].join(""))}s(['\n        <span class="menu_sus"></span>\n      </div>\n      <a class="name" href="'].join(""));s([(l.url),'">'].join(""));s([(l.name),'</a>\n      <div class="info">\n        '].join(""));if(m){s(m+", ")}s(['\n        by <a href="'].join(""));s([(l.ownerUrl),'">'].join(""));s([(l.owner),"</a>\n        "].join(""));if(l.collaborationMode!=0){s(" and others")}s(['\n      </div>\n    </div>\n  </div>\n  <script type="text/javascript">\n    var p_obj = '].join(""));s([(JSON.stringify(l)),";\n    $('#playlist-"].join(""));s([(n)," .menu_sus').autoSuspenders(p_obj, { location: $('#playlist-"].join(""));s([(n)," .data') });\n    $('#playlist-"].join(""));s([(n)," button.play').play(p_obj);\n    $('#playlist-"].join(""));s([(n)," .inner_box.icons').tipSuspenders({\n      "].join(""));if(u){s(['width: "250px",'].join(""))}s(["\n      content: '<b>Artists in this playlist: </b>' + p_obj.artistsTooltip + '.'\n    });\n    "].join(""));if(l.allowCollaboration){s(["\n      "].join(""));var v=l.isCollaborating;s(["\n      var collab_content = $('<div style=\"text-align:center\">').html('This playlist is open for collaboration');\n      var collab_button = $('<a>').attr('href', '#').addClass('button').append(\n      $('<span>').text("].join(""));if(v){s(["'Stop Participating'"].join(""))}else{s(["'Participate'"].join(""))}s([")\n      ).css('margin-top', '5px');\n      "].join(""));if(v){s(["\n        collab_button.addClass('is_collaborating');\n      "].join(""))}s(["\n      \n      collab_button.click(function(event)\n      {\n        if ($(this).hasClass('is_collaborating'))\n        {\n          stopPlaylistCollaboration("].join(""));s([(l.id),");\n          $(this).removeClass('is_collaborating');\n          $('span', this).text('Participate');\n        }\n        else\n        {\n          startPlaylistCollaboration("].join(""));s([(l.id),");\n          $(this).addClass('is_collaborating');\n          $('span', this).text('Stop Participating');\n        }\n        \n        event.preventDefault();\n        return false;\n      });\n      \n      collab_content.append(collab_button);\n      $('#playlist-"].join(""));s([(n)," .collaboration_indicator').tipSuspenders({\n        content: collab_content,\n        persist: true,\n        width: '140px'\n      });\n    "].join(""))}s(["\n  <\/script>\n"].join(""));return q};d(["\n\n"].join(""));d(["\n"].join(""));if(f){b()}};Bujagali.fxns["templates/snippets/playlist.bg.html"].version="5a2363d293e195479c51843c947d8c5f";Bujagali.fxnLoaded("templates/snippets/playlist.bg.html");Bujagali.fxns["templates/snippets/navigation.bg.html"]=function(m,h,b){var g="";var f=true;function e(){f=false}function d(){b(g)}function j(n){g+=n}j([""].join(""));R.BG.helpers.breadcrumbs=function(n){j(['\n  <div class="breadcrumbs clearfix">\n    '].join(""));for(item in n){j(['\n      <div class="'].join(""));if(!loop.last){j("has_arrow")}j(['">\n        '].join(""));if(item.link){j(['\n          <a href="'].join(""));j([(item.link),'">\n            '].join(""));j([(item.title),"\n          </a>\n        "].join(""))}else{j(["\n          "].join(""));j([(item.title),"\n        "].join(""))}j(["\n      </div>\n    "].join(""))}j(["\n  </div>\n"].join(""))};j(["\n\n"].join(""));function a(p,n){var o;j(['\n  <div class="'].join(""));j([(p),' clearfix">\n    '].join(""));for(o in n.tabs){o=n.tabs[o];if(o.visible===undefined||o.visible){j(['\n        <span class="tab'].join(""));if(o.name==n.selected_tab){j("selected")}j(['"><a href="'].join(""));j([(o.url),'">'].join(""));j([(o.text),"</a></span>\n      "].join(""))}j(["\n    "].join(""))}j(["\n  </div>\n"].join(""))}j(["\n\n"].join(""));function l(n){var o;j(['\n  <div class="header_tab_bar clearfix">\n    '].join(""));for(o in n.tabs){o=n.tabs[o];if(o.visible===undefined||o.visible){j(['\n        <span class="tab'].join(""));if(o.name==n.selected_tab){j("selected")}j(['"><a href="'].join(""));j([(o.url),'"><span class="left_cap"></span><span class="tab_title">'].join(""));j([(o.text),'</span><span class="right_cap"></span></a></span>\n      '].join(""))}j(["\n    "].join(""))}j(["\n  </div>\n"].join(""))}j(["\n\n"].join(""));R.BG.helpers.render_sub_header_tab_bar=function(o){var q="";var r;function n(u){q+=u}n(['\n  <div class="sub_tab_bar clearfix">\n    '].join(""));for(var p=0;p<o.tabs.length;p++){var r=o.tabs[p];if(r.visible===undefined||r.visible){n(["\n      "].join(""));if(p!=0){n(["\n        "].join(""));if(r.name==o.selected_tab){n(["sel"].join(""))}else{n(["unsel"].join(""))}n(['"></span>\n      '].join(""))}n(['\n      <span class="tab'].join(""));if(r.name==o.selected_tab){n([" selected"].join(""))}}n([""].join(""));if(r.inactive){n([" inactive"].join(""))}n(['"><a href="'].join(""));n([(r.url),'">'].join(""));n([(r.text),""].join(""));if(r.count){n([' <span class="tab_count">'].join(""));n([(r.count),"</span>"].join(""))}n(["</a></span>\n      "].join(""));if(p==o.tabs.length-1){n(["\n        "].join(""));if(r.name==o.selected_tab){n(['\n          <span class="divider sel_to_unsel"></span>\n        '].join(""))}else{n(['\n          <span class="divider unsel_to_unsel"></span>\n        '].join(""))}n(["\n      "].join(""))}else{n(['\n        <span class="divider '].join(""));if(r.name==o.selected_tab){n(["sel_to_"].join(""))}else{n(["unsel_to_"].join(""))}n(["\n      "].join(""))}n(["\n    "].join(""))}n(["\n  </div>\n"].join(""));return q};j(["\n\n"].join(""));var c=R.BG.helpers;c.render_tab_bar=function(n){return a("tab_bar",n)};c.render_sub_tabs=function(n){return R.BG.helpers.render_sub_header_tab_bar(n)};c.render_small_tab_bar=function(n){return a("small_tab_bar",n)};c.render_container_tabs=function(n){return a("container_tab_bar",n)};j(["\n\n"].join(""));if(f){d()}};Bujagali.fxns["templates/snippets/navigation.bg.html"].version="00be067302195eb4e3709b7ad72e2873";Bujagali.fxnLoaded("templates/snippets/navigation.bg.html");