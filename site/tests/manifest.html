<html>
<head>
  <title>Manifest Tests</title>
  <script type="text/javascript" src="doctestjs/doctest.js"></script>
  <link rel="stylesheet" type="text/css" href="doctestjs/doctest.css" />
</head>
<body>
<h2> Manifest Tests </h2>

<p>
`manifest.js` is a small javascript library responsible for parsing and 
normalization of manifests.  This page tests and demonstrates its functioning.
</p>

<div>
  <button onclick="doctest()" type="button">Test all</button>
  <pre id="doctestOutput"></pre>
</div>

<h3>Simplest Possible Manifest</h3>

<pre class="doctest">
$ writeln(null !== Manifest.parse({
>   manifest_version: "1.0",
>   name: "SimplestPossibleManifest",
>   base_url: "http://simple.mozillalabs.com/",
>   default_locale: "en",
> }));
true
</pre>

<h3>Missing Required Properties</h3>

<pre class="doctest">
$ writeln(null !== Manifest.parse({
> }));
Error: Invalid manifest: missing "manifest_version" property
</pre>

<pre class="doctest">
$ writeln(null !== Manifest.parse({
>   manifest_version: "1.0"
> }));
Error: Invalid manifest: missing "name" property
</pre>

<pre class="doctest">
$ writeln(null !== Manifest.parse({
>   manifest_version: "1.0",
>   name: "SimplestPossibleManifest"
> }));
Error: Invalid manifest: missing "base_url" property
</pre>

<pre class="doctest">
$ writeln(null !== Manifest.parse({
>   manifest_version: "1.0",
>   name: "SimplestPossibleManifest",
>   base_url: "http://simple.mozillalabs.com/"
> }));
Error: Invalid manifest: missing "default_locale" property
</pre>

<h3>Property: version</h3>
<pre class="doctest">
$ var m = {
>   manifest_version: "1.00",
>   name: "SimplestPossibleManifest",
>   base_url: "http://simple.mozillalabs.com/",
>   default_locale: "en",
> };
> writeln(null !== Manifest.parse(m));
true
$ m.manifest_version = "1"
> Manifest.parse(m);
Error: Invalid manifest: invalid value for "manifest_version": 1
$ m.manifest_version = ".1"
> Manifest.parse(m);
Error: Invalid manifest: invalid value for "manifest_version": .1
</pre>


</body>
<script type="text/javascript" src="../js/manifest.js"></script>
</html>
