<html>
<head>
<title>Apptast.ic</title>
<script src="http://localhost:8123/jsapi/include.js"></script>
<script>
var manifest = {{ manifestText }};

function doInstall()
{
  AppClient.install({manifest:manifest, callback:installCallback});
}
function installCallback(result)
{
  document.getElementById("result").innerHTML = "Callback done!";
}
function changeName(field)
{
  manifest.name = field.value;
}
</script>
<style>
body {
  background:#f7f4f4 url("/static/apptastic.jpg") no-repeat left top;
}
#form {
  position:absolute;
  left:250px;
  top:200px;
  font:16pt "Gill Sans",Arial,sans-serif;
}
#form div {
  margin-bottom:16px;
}
#inputfield {
  width:400px;
}
.button {
  margin-top:16px;
  width:300px;
  font:14pt "Gill Sans",Arial,sans-serif;
}
.appbox {
  position:relative;
}
.app {
  width:140px;
  height:140px;
  position:relative;
  background-color:white;
  border:1px solid #808080;
  -moz-border-radius:8px;
}
.app .icon {
  width:48px;
  height:48px;
  margin:auto;
  margin-top:24px;
}
.app .name {
  width:130px;
  margin:auto;
  border:none;
}
.appname {
  border:none;
  background-color:#f0f0f0;
  text-align:center;
  width:128px 
}
.pointer {
  position:absolute;
  top:85px;
  left:145px;
  width:200px;
  font:8pt sans-serif;
}

</style>
</head>
<body>

<div id="form">
<div>shazam!  here's your app:</div>

<div class="appbox">
<div class="app">
<div class="icon"><img width="48" height="48" src="{{ manifest["icons"]["48"] }}"></div>
<div class="name"><input class="appname" type="text" name="name" id="appname" onkeyup="changeName(this)" value="{{ manifest["name"] }}"></div>
</div>
<div class="pointer">
&lt;-- you can change the name if you want
</div>
</div>

<button onclick="doInstall()" class="button">install app into my browser</button>
<div id="result"></div>
<br>
<button onclick="document.location='/'" class="button">make another app</button>

</div>



</body>
